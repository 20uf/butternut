!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define(b):function(){var c=a.Ractive,d=b();d.noConflict=function(){a.Ractive=c;return d};return a.Ractive=d}()}(this,function(){'use strict';var g={el:void 0,append:!1,template:null,delimiters:['{{','}}'],tripleDelimiters:['{{{','}}}'],staticDelimiters:['[[',']]'],staticTripleDelimiters:['[[[',']]]'],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},h={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow((a-1),3)+1},easeInOut:function(a){if((a/=0.5)<1){return 0.5*Math.pow(a,3)}return 0.5*(Math.pow((a-2),3)+2)}},i=null,j=typeof window!=='undefined'?window:null,l=j?document:null,p=!!l,u=typeof console!=='undefined'&&typeof console.warn==='function'&&typeof console.warn.apply==='function',w;try{Object.defineProperty({},'test',{value:0}),w=!0}catch(a){w=!1};var z=l?l.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure','1.1'):!1,A=['o','ms','moz','webkit'],B='http://www.w3.org/1999/xhtml',C='http://www.w3.org/1998/Math/MathML',D='http://www.w3.org/2000/svg',E='http://www.w3.org/1999/xlink',F='http://www.w3.org/XML/1998/namespace',G='http://www.w3.org/2000/xmlns',H={html:B,mathml:C,svg:D,xlink:E,xml:F,xmlns:G},I,J,K,L,M,N,O,P,Q;z?(I=function(a,b,c){if(!b||b===B){return c?l.createElement(a,c):l.createElement(a)}return c?l.createElementNS(b,a,c):l.createElementNS(b,a)}):(I=function(a,b,c){if(b&&b!==B){throw 'This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you\'re trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information'}return c?l.createElement(a,c):l.createElement(a)});function R(){return l.createDocumentFragment()}function S(a){var b;if(!a||typeof a==='boolean'){return}if(!j||!l||!a){return null}if(a.nodeType){return a}if(typeof a==='string'){b=l.getElementById(a);!b&&l.querySelector&&(b=l.querySelector(a));if(b&&b.nodeType){return b}}if(a[0]&&a[0].nodeType){return a[0]}return null}if(!p)J=null;else{K=I('div');L=['matches','matchesSelector'];Q=function(a){return function(b,c){return b[a](c)}};O=L.length;while(O--&&!J){M=L[O];if(K[M])J=Q(M);else{P=A.length;while(P--){N=A[O]+M.substr(0,1).toUpperCase()+M.substring(1);if(K[N]){J=Q(N);break}}}}J||(J=function(a,b){var c,d,e;d=a.parentNode;d||(K.innerHTML='',d=K,a=a.cloneNode(),K.appendChild(a));c=d.querySelectorAll(b);e=c.length;while(e--){if(c[e]===a){return !0}}return !1})}function T(a){a&&typeof a.parentNode!=='unknown'&&a.parentNode&&a.parentNode.removeChild(a);return a}function U(a){returna==null||!a.toString?'':''+a}var V,W,X;try{Object.defineProperty({},'test',{get:function(){},set:function(){}}),l&&Object.defineProperty(I('div'),'test',{value:0}),W=Object.defineProperty}catch(a){W=function(a,b,c){a[b]=c.value}};try{try{Object.defineProperties({},{test:{value:0}})}catch(a){throw a};l&&Object.defineProperties(I('div'),{test:{value:0}});X=Object.defineProperties}catch(a){X=function(a,b){var c;for(c in b){b.hasOwnProperty(c)&&W(a,c,b[c])}}};try{Object.create(null),V=Object.create}catch(a){V=function(){var a=function(){};return function(b,c){var d;if(b===null){return{}}a.prototype=b;d=new a();c&&Object.defineProperties(d,c);return d}}()};function Y(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];var d;b.forEach(function(b){for(d in b){_.call(b,d)&&(a[d]=b[d])}});return a}function Z(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];b.forEach(function(b){for(var c in b){_.call(b,c)&&!(c in a)&&(a[c]=b[c])}});return a}var _=Object.prototype.hasOwnProperty,$=Object.prototype.toString;function aa(a){return $.call(a)==='[object Array]'}function ab(a,b){if(a===null&&b===null){return !0}if(typeof a==='object'||typeof b==='object'){return !1}return a===b}function ac(a){return!isNaN(parseFloat(a))&&isFinite(a)}function ad(a){return a&&$.call(a)==='[object Object]'}function ae(){}var af={},ag,ah,ai;if(u){var aj=["%cRactive.js %c0.8.0-edge %cin debug mode, %cmore...",'color: rgb(114, 157, 52); font-weight: normal;','color: rgb(85, 85, 85); font-weight: normal;','color: rgb(85, 85, 85); font-weight: normal;','color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;'],ak="You're running Ractive 0.8.0-edge in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";ai=function(){var a=!!console.groupCollapsed;console[a?'groupCollapsed':'log'].apply(console,aj);console.log(ak);a&&console.groupEnd(aj);ai=ae};ah=function(a,b){ai();if(typeof b[b.length-1]==='object'){var c=b.pop(),d=c?c.ractive:null;if(d){var e;d.component&&(e=d.component.name)&&(a+="<"+e+"> ");var f;(f=c.node||d.fragment&&d.fragment.rendered&&d.find('*'))&&b.push(f)}}console.warn.apply(console,['%cRactive.js: %c'+a,'color: rgb(114, 157, 52);','color: rgb(85, 85, 85);'].concat(b))};ag=function(){console.log.apply(console,arguments)}}else ah=ag=ai=ae;function al(a,b){return a.replace(/%s/g,function(){return b.shift()})}function am(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];a=al(a,b);throw new Error( a )}function an(){mQ.DEBUG&&ag.apply(null,arguments)}function ao(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];a=al(a,b);ah(a,b)}function ap(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];a=al(a,b);if(af[a]){return}af[a]=!0;ah(a,b)}function aq(){mQ.DEBUG&&ao.apply(null,arguments)}function ar(){mQ.DEBUG&&ap.apply(null,arguments)}var as='Bad arguments',at='A function was specified for "%s" %s, but no %s was returned',au=function(a,b){return "Missing \""+a+"\" "+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+b+"s"};function av(a,b,c){var d=aw(a,b,c);return d?d[a][c]:null}function aw(a,b,c){while(b){if(c in b[a]){return b}if(b.isolated){return null}b=b.parent}}function ax(a,b,c,d){if(a===b)return null;if(d){var e=av('interpolators',c,d);if(e)return e(a,b)||null;am(au(d,'interpolator'))}return az.number(a,b)||az.array(a,b)||az.object(a,b)||null}function ay(a){return function(){return a}}var az={number:function(a,b){var c;if(!ac(a)||!ac(b)){return null}a=+a;b=+b;c=b-a;if(!c){return function(){return a}}return function(b){return a+b*c}},array:function(a,b){var c,d,e,f;if(!aa(a)||!aa(b)){return null}c=[];d=[];f=e=Math.min(a.length,b.length);while(f--)d[f]=ax(a[f],b[f]);for(f=e;f<a.length;f+=1)c[f]=a[f];for(f=e;f<b.length;f+=1)c[f]=b[f];return function(a){var b=e;while(b--)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!ad(a)||!ad(b)){return null}c=[];f={};e={};for(g in a){_.call(a,g)&&(_.call(b,g)?(c.push(g),e[g]=ax(a[g],b[g])||ay(b[g])):(f[g]=a[g]))}for(g in b){_.call(b,g)&&!_.call(a,g)&&(f[g]=b[g])}d=c.length;return function(a){var b=d,g;while(b--){g=c[b],f[g]=e[g](a)}return f}}},aA=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,aB=/([^\\](?:\\\\)*)\./,aC=/\\|\./g,aD=/((?:\\)+)\1|\\(\.)/g;function aE(a){if(typeof a==='string'){return a.replace(aC,'\\$&')}return a}function aF(a){return a?a.replace(aA,'.$1'):''}function aG(a){var b=[],c;a=aF(a);while(c=aB.exec(a)){var d=c.index+c[1].length;b.push(a.substr(0,d));a=a.substr(d+1)}b.push(a);return b}function aH(a){if(typeof a==='string'){return a.replace(aD,'$1$2')}return a}var aI='Cannot add to a non-numeric value';function aJ(a,b,c){if(typeof b!=='string'||!ac(c)){throw new Error( 'Bad arguments' )}var d;if(/\*/.test(b)){d={};a.viewmodel.findMatches(aG(b)).forEach(function(a){var b=a.get();if(!ac(b))throw new Error( aI );d[a.getKeypath()]=b+c});return a.set(d)}var e=a.get(b);if(!ac(e)){throw new Error( aI )}return a.set(b,+e+c)}function aK(a,b){return aJ(this,a,(b===undefined?1:+b))}var aL={construct:{deprecated:'beforeInit',replacement:'onconstruct'},render:{deprecated:'init',message:"The \"init\" method has been deprecated and will likely be removed in a future release. You can either use the \"oninit\" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use \"onrender\" instead. See http://docs.ractivejs.org/latest/migrating for more information."},complete:{deprecated:'complete',replacement:'oncomplete'}},aM=function b(a){this.event=a;this.method='on'+a;this.deprecate=aL[a]};aM.prototype.call=function d(a,b,c){if(b[a]){c?b[a](c):b[a]();return !0}};aM.prototype.fire=function c(a,b){this.call(this.method,a,b);!a[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,a,b)&&(this.deprecate.message?aq(this.deprecate.message):aq('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));b?a.fire(this.event,b):a.fire(this.event)};function aN(a,b){var c=a.indexOf(b);c===-1&&a.push(b)}function aO(a,b){for(var c=0,d=a.length;c<d;c++){if(a[c]==b){return !0}}return !1}function aP(a,b){var c;if(!aa(a)||!aa(b)){return !1}if(a.length!==b.length){return !1}c=a.length;while(c--){if(a[c]!==b[c]){return !1}}return !0}function aQ(a){if(typeof a==='string'){return[a]}if(a===undefined){return[]}return a}function aR(a){return a[a.length-1]}function aS(a,b){if(!a){return}var c=a.indexOf(b);c!==-1&&a.splice(c,1)}function aT(a){var b=[],c=a.length;while(c--)b[c]=a[c];return b}var aU,aV={},aW={},aX={};typeof Promise==='function'?(aU=Promise):(aU=function(a){var b=[],c=[],d=aV,e,f,g,h,i,j;g=function(a){return function(g){if(d!==aV){return}e=g;d=a;f=a_((d===aW?b:c),e);aZ(f)}};h=g(aW);i=g(aX);try{a(h,i)}catch(a){i(a)};j={then:function(a,e){var g=new aU( function(h,i){var j=function(a,b,c){typeof a==='function'?b.push(function(b){var c;try{c=a(b),a$(g,c,h,i)}catch(a){i(a)}}):b.push(c)};j(a,b,h);j(e,c,i);d!==aV&&aZ(f)});return g}};j['catch']=function(a){return this.then(null,a)};return j},aU.all=function(a){return new aU( function(b,c){var d=[],e,f,g;if(!a.length){b(d);return}g=function(a,f){a&&typeof a.then==='function'?a.then(function(a){d[f]=a;--e||b(d)},c):(d[f]=a,--e||b(d))};e=f=a.length;while(f--)g(a[f],f)})},aU.resolve=function(a){return new aU( function(b){b(a)})},aU.reject=function(a){return new aU( function(b,c){c(a)})});var aY=aU;function aZ(a){setTimeout(a,0)}function a_(a,b){return function(){var c;while(c=a.shift())c(b)}}function a$(a,b,c,d){var f;if(b===a){throw new TypeError( 'A promise\'s fulfillment handler cannot return the same promise' )}if(b instanceof aU)b.then(c,d);else if(b&&(typeof b==='object'||typeof b==='function')){try{f=b.then}catch(a){d(a);return};if(typeof f==='function'){var g,h,i;h=function(b){if(g){return}g=!0;a$(a,b,c,d)};i=function(a){if(g){return}g=!0;d(a)};try{f.call(b,h,i)}catch(a){if(!g){d(a);g=!0;return}}}else c(b)}else c(b)}var ba=function c(a,b){this.callback=a;this.parent=b;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.outrosComplete=!1;b&&b.addChild(this)};ba.prototype.add=function b(a){var c=a.isIntro?this.intros:this.outros;c.push(a)};ba.prototype.addChild=function b(a){this.children.push(a);this.totalChildren+=1;this.outroChildren+=1};ba.prototype.decrementOutros=function a(){this.outroChildren-=1;bd(this)};ba.prototype.decrementTotal=function a(){this.totalChildren-=1;bd(this)};ba.prototype.detachNodes=function a(){this.detachQueue.forEach(bb);this.children.forEach(bc)};ba.prototype.remove=function b(a){var c=a.isIntro?this.intros:this.outros;aS(c,a);bd(this)};ba.prototype.start=function a(){be(this);this.intros.concat(this.outros).forEach(function(a){return a.start()});this.ready=!0;bd(this)};function bb(a){a.detach()}function bc(a){a.detachNodes()}function bd(a){if(!a.ready||a.outros.length||a.outroChildren)return;a.outrosComplete||(a.parent&&!a.parent.outrosComplete?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0);!a.intros.length&&!a.totalChildren&&(typeof a.callback==='function'&&a.callback(),a.parent&&a.parent.decrementTotal())}function be(a){var b=a.detachQueue,c=bf(a),d=b.length,e=0,f,g;start: while(d--){f=b[d].node;e=c.length;while(e--){g=c[e].node;if(g===f||g.contains(f)||f.contains(g))continue start}b[d].detach();b.splice(d,1)}}function bf(a,b){if(!b){b=[];var c=a;while(c.parent)c=c.parent;return bf(c,b)}else{var d=a.children.length;while(d--)b=bf(a.children[d],b);b=b.concat(a.outros);return b}}var bg=new aM( 'change' ),bh,bi={start:function(a,b){var c,d;b&&(c=new aY( function(a){return d=a} ));bh={previousBatch:bh,transitionManager:new ba( d, bh&&bh.transitionManager ),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],ractives:[],instance:a};return c},end:function(){bk();bh=bh.previousBatch},addFragment:function(a){aN(bh.fragments,a)},addInstance:function(a){bh&&aN(bh.ractives,a)},addObserver:function(a,b){aN(b?bh.deferredObservers:bh.immediateObservers,a)},registerTransition:function(a){a._manager=bh.transitionManager;bh.transitionManager.add(a)},detachWhenReady:function(a){bh.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(!bh)a();else{c=bh;while(b&&c.previousBatch)c=c.previousBatch;c.tasks.push(a)}}};function bj(a){a.dispatch()}function bk(){var a=bh.immediateObservers;bh.immediateObservers=[];a.forEach(bj);var b=bh.fragments.length,c;a=bh.fragments;bh.fragments=[];var d=bh.ractives;bh.ractives=[];while(b--){c=a[b];var e=c.ractive;bg.fire(e,e.viewmodel.changes);e.viewmodel.changes={};aS(d,e);c.update()}b=d.length;while(b--){var f=d[b];bg.fire(f,f.viewmodel.changes);f.viewmodel.changes={}}bh.transitionManager.start();a=bh.deferredObservers;bh.deferredObservers=[];a.forEach(bj);var g=bh.tasks;bh.tasks=[];for(b=0;b<g.length;b+=1)g[b]();if(bh.fragments.length||bh.immediateObservers.length||bh.deferredObservers.length||bh.ractives.length)return bk()}var bl=aY.resolve();W(bl,'stop',{value:ae});var bm=h.linear;function bn(a,b){a=a||{};var c;a.easing&&(c=typeof a.easing==='function'?a.easing:b.easing[a.easing]);return{easing:c||bm,duration:'duration' in a?a.duration:400,complete:a.complete||ae,step:a.step||ae}}function bo(a,b,c){if(typeof a==='object'){var d=Object.keys(a);throw new Error( ("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+d.map(function(b){return "'"+b+"': "+a[b]}).join('\n  ')+"\n}, {...}), do\n\n"+d.map(function(b){return "ractive.animate('"+b+"', "+a[b]+", {...});"}).join('\n')+"\n") )}c=bn(c,this);var e=this.viewmodel.joinAll(aG(a)),f=e.get();if(ab(f,b)){c.complete(c.to);return bl}var g=ax(f,b,this,c.interpolator);if(!g){bi.start();e.set(b);bi.end();return bl}return e.animate(f,b,c,g)}var bp=new aM( 'detach' );function bq(){if(this.isDetached){return this.el}this.el&&aS(this.el.__ractive_instances__,this);this.el=this.fragment.detach();this.isDetached=!0;bp.fire(this);return this.el}function br(a){if(!this.el)throw new Error( ("Cannot call ractive.find('"+a+"') unless instance is rendered to the DOM") );return this.fragment.find(a)}function bs(a,b){if(a.compareDocumentPosition){var c=a.compareDocumentPosition(b);returnc&2?1:-1}return bt(a,b)}function bt(a,b){var c=bv(a.component||a._ractive.proxy),d=bv(b.component||b._ractive.proxy),e=aR(c),f=aR(d),g;while(e&&e===f){c.pop(),d.pop(),g=e,e=aR(c),f=aR(d)}e=e.component||e;f=f.component||f;var h=e.parentFragment,i=f.parentFragment;if(h===i){var j=h.items.indexOf(e),k=i.items.indexOf(f);returnj-k||c.length-d.length}var l=g.iterations;if(l){var m=l.indexOf(h),n=l.indexOf(i);returnm-n||c.length-d.length}throw new Error( 'An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!' )}function bu(a){var b=a.parentFragment;if(b)return b.owner;if(a.component&&(b=a.component.parentFragment)){return b.owner}}function bv(a){var b=[a],c=bu(a);while(c){b.push(c),c=bu(c)}return b}var bw=function e(a,b,c,d){this.ractive=a;this.selector=b;this.live=c;this.isComponentQuery=d;this.result=[];this.dirty=!0};bw.prototype.add=function b(a){this.result.push(a);this.makeDirty()};bw.prototype.cancel=function a(){var b=this._root[this.isComponentQuery?'liveComponentQueries':'liveQueries'],c=this.selector,d=b.indexOf(c);d!==-1&&(b.splice(d,1),b[c]=null)};bw.prototype.init=function a(){this.dirty=!1};bw.prototype.makeDirty=function a(){var b=this;this.dirty||(this.dirty=!0,bi.scheduleTask(function(){return b.update()}))};bw.prototype.remove=function b(a){var c=this.result.indexOf(this.isComponentQuery?a.instance:a);c!==-1&&this.result.splice(c,1)};bw.prototype.update=function a(){this.result.sort(this.isComponentQuery?bt:bs);this.dirty=!1};bw.prototype.test=function b(a){return this.isComponentQuery?!this.selector||a.name===this.selector:(a?J(a,this.selector):null)};function bx(a,b){if(!this.el)throw new Error( ("Cannot call ractive.findAll('"+a+"', ...) unless instance is rendered to the DOM") );b=b||{};var c=this._liveQueries,d=c[a];if(d){returnb&&b.live?d:d.slice()}d=new bw( this, a, !!b.live, !1 );d.live&&(c.push(a),c['_'+a]=d);this.fragment.findAll(a,d);d.init();return d.result}function by(a,b){b=b||{};var c=this._liveComponentQueries,d=c[a];if(d){returnb&&b.live?d:d.slice()}d=new bw( this, a, !!b.live, !0 );d.live&&(c.push(a),c['_'+a]=d);this.fragment.findAllComponents(a,d);d.init();return d.result}function bz(a){return this.fragment.findComponent(a)}function bA(a){if(this.container){if(this.container.component&&this.container.component.name===a){return this.container}else{return this.container.findContainer(a)}}return null}function bB(a){if(this.parent){if(this.parent.component&&this.parent.component.name===a){return this.parent}else{return this.parent.findParent(a)}}return null}function bC(a,b){a.event&&a._eventQueue.push(a.event);a.event=b}function bD(a){a._eventQueue.length?(a.event=a._eventQueue.pop()):(a.event=null)}var bE={};function bF(a){var b,c,d,e,f,g;b=aG(a);(c=bE[b.length])||(c=bG(b.length));f=[];d=function(a,c){return a?'*':b[c]};e=c.length;while(e--){g=c[e].map(d).join('.'),f.hasOwnProperty(g)||(f.push(g),f[g]=!0)}return f}function bG(a){var b='',c,d,e,f,g,h,i,j;if(!bE[a]){e=[];while(b.length<a)b+=1;c=parseInt(b,2);f=function(a){return a==='1'};for(g=0;g<=c;g+=1){d=g.toString(2);while(d.length<a)d+='0';j=[];i=d.length;for(h=0;h<i;h++)j.push(f(d[h]));e[g]=j}bE[a]=e}return bE[a]}var bH={};function bI(a,b,c){c===void 0&&(c={});if(!b){return}c.event?(c.event.name=b):(c.event={name:b,_noArg:!0});var d=bJ(b);bK(a,d,c.event,c.args,!0)}function bJ(a){if(bH.hasOwnProperty(a)){return bH[a]}else{return bH[a]=bF(a)}}function bK(a,b,c,d,e){e===void 0&&(e=!1);var f,g,h=!0;bC(a,c);for(g=b.length;g>=0;g--){f=a._subs[b[g]],f&&(h=bL(a,f,c,d)&&h)}bD(a);if(a.parent&&h){if(e&&a.component){var i=a.component.name+'.'+b[b.length-1];b=bJ(i);c&&!c.component&&(c.component=a)}bK(a.parent,b,c,d)}}function bL(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d));b=b.slice();for(var g=0,h=b.length;g<h;g+=1){b[g].apply(a,d)===!1&&(f=!0)}c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation());return!f}function bM(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];bI(this,a,{args:b})}function bN(a){throw new Error( ("An index or key reference ("+a+") cannot have child properties") )}function bO(a,b){var c=a.findContext().root,d=aG(b),e=d[0],f,g,h;while(a){if(a.isIteration){if(e===a.parent.keyRef){d.length>1&&bN(e);return a.context.getKeyModel()}if(e===a.parent.indexRef){d.length>1&&bN(e);return a.context.getIndexModel(a.index)}}if(((h=a.owner.aliases)||(h=a.aliases))&&h.hasOwnProperty(e)){var i=h[e];if(d.length===1)return i;else if(typeof i.joinAll==='function'){return i.joinAll(d.slice(1))}}if(a.context){(!a.isRoot||a.ractive.component)&&(f=!0);if(a.context.has(e)){g&&c.map(e,a.context.joinKey(e));return a.context.joinAll(d)}}a.componentParent&&!a.ractive.isolated?(a=a.componentParent,g=!0):(a=a.parent)}if(!f){return c.joinAll(d)}}var bP=[],bQ;function bR(){bP.push(bQ=[])}function bS(){var a=bP.pop();bQ=bP[bP.length-1];return a}function bT(a){bQ&&bQ.push(a)}function bU(a){a.bind()}function bV(a){a.cancel()}function bW(a){a.handleChange()}function bX(a){a.mark()}function bY(a){a.render()}function bZ(a){a.rebind()}function b_(a){a.teardown()}function b$(a){a.unbind()}function ca(a){a.unrender()}function cb(a){a.unrender(!0)}function cc(a){a.update()}function cd(a){return a.toString()}function ce(a){return a.toString(!0)}var cf;j?(!function(a,b,c){var d,e;if(c.requestAnimationFrame){return}for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+'RequestAnimationFrame'];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;c=Date.now();d=Math.max(0,16-(c-b));f=e(function(){a(c+d)},d);b=c+d;return f})}(A,0,j),cf=j.requestAnimationFrame):(cf=null);var cg=cf,ch=j&&j.performance&&typeof j.performance.now==='function'?function(){return j.performance.now()}:function(){return Date.now()},ci=[],cj=!1;function ck(){bi.start();var a=ch(),b,c;for(b=0;b<ci.length;b+=1){c=ci[b],c.tick(a)||ci.splice(b--,1)}bi.end();ci.length?cg(ck):(cj=!1)}var cl=function b(a){this.duration=a.duration;this.step=a.step;this.complete=a.complete;this.easing=a.easing;this.start=ch();this.end=this.start+this.duration;this.running=!0;ci.push(this);cj||cg(ck)};cl.prototype.tick=function b(a){if(!this.running)return !1;if(a>this.end){this.step&&this.step(1);this.complete&&this.complete(1);return !1}var c=a-this.start,d=this.easing(c/this.duration);this.step&&this.step(d);return !0};cl.prototype.stop=function a(){this.abort&&this.abort();this.running=!1};var cm={};function cn(a,b){var c={},d;if(!b){return a}b+='.';for(d in a){a.hasOwnProperty(d)&&(c[b+d]=a[d])}return c}function co(a){var b;cm[a]||(b=a?a+'.':'',cm[a]=function(c,d){var e;if(typeof c==='string'){e={};e[b+c]=d;return e}if(typeof c==='object'){return b?cn(c,a):c}});return cm[a]}var cp=function b(a){this.value=a;this.isReadonly=!0;this.dependants=[]};cp.prototype.get=function a(){return aH(this.value)};cp.prototype.getKeypath=function a(){return aH(this.value)};cp.prototype.rebind=function b(a){this.value=a;this.dependants.forEach(bW)};cp.prototype.register=function b(a){this.dependants.push(a)};cp.prototype.unregister=function b(a){aS(this.dependants,a)};var cq=function c(a,b){this.parent=a;this.ractive=b;this.value=b?a.getKeypath(b):a.getKeypath();this.dependants=[];this.children=[]};cq.prototype.addChild=function b(a){this.children.push(a);a.owner=this};cq.prototype.get=function a(){return this.value};cq.prototype.getKeypath=function a(){return this.value};cq.prototype.handleChange=function a(){this.value=this.ractive?this.parent.getKeypath(this.ractive):this.parent.getKeypath();this.ractive&&this.owner&&(this.ractive.viewmodel.keypathModels[this.owner.value]=this);this.children.forEach(bW);this.dependants.forEach(bW)};cq.prototype.register=function b(a){this.dependants.push(a)};cq.prototype.removeChild=function b(a){aS(this.children,a)};cq.prototype.teardown=function a(){this.owner&&this.owner.removeChild(this);this.children.forEach(b_)};cq.prototype.unregister=function b(a){aS(this.dependants,a)};var cr=Object.prototype.hasOwnProperty;function cs(a){a.updateFromBindings(!0)}function ct(a){a.updateKeypathDependants()}var cu=null,cv=function c(a,b){this.deps=[];this.children=[];this.childByKey={};this.indexModels=[];this.unresolved=[];this.unresolvedByKey={};this.bindings=[];this.patternObservers=[];this.value=undefined;this.ticker=null;a&&(this.parent=a,this.root=a.root,this.key=aH(b),this.isReadonly=a.isReadonly,a.value&&(this.value=a.value[this.key],this.adapt()))};cv.prototype.adapt=function a(){var b=this,c=this.root.adaptors,d=c.length;this.rewrap=!1;if(d===0)return;var e=this.value,f=this.root.ractive,g=this.getKeypath();if(this.wrapper){var h=!this.wrapper.reset||this.wrapper.reset(e)===!1;if(h){this.wrapper.teardown();this.wrapper=null;if(this.value!==undefined){var i=this.parent.value||this.parent.createBranch(this.key);i[this.key]!==this.value&&(i[this.key]=e)}}else{this.value=this.wrapper.get();return}}var j;for(j=0;j<d;j+=1){var k=c[j];if(k.filter(e,g,f)){b.wrapper=k.wrap(f,e,g,co(g));b.wrapper.value=b.value;b.wrapper.__model=b;b.value=b.wrapper.get();break}}};cv.prototype.addUnresolved=function c(a,b){this.unresolvedByKey[a]||(this.unresolved.push(a),this.unresolvedByKey[a]=[]);this.unresolvedByKey[a].push(b)};cv.prototype.animate=function e(a,b,c,d){var f=this;this.ticker&&this.ticker.stop();var g,h=new aY( function(a){return g=a} );this.ticker=new cl({duration:c.duration,easing:c.easing,step:function(a){var b=d(a);f.applyValue(b);c.step&&c.step(a,b)},complete:function(){f.applyValue(b);c.complete&&c.complete(b);f.ticker=null;g()}});h.stop=this.ticker.stop;return h};cv.prototype.applyValue=function b(a){if(ab(a,this.value))return;this.registerChange(this.getKeypath(),a);if(this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,a),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.adapt();else if(this.wrapper)this.value=a,this.adapt();else{var c=this.parent.value||this.parent.createBranch(this.key);c[this.key]=a;this.value=a;this.adapt()}this.parent.clearUnresolveds();this.clearUnresolveds();var d=cu;cu=this;this.children.forEach(bX);this.deps.forEach(bW);this.notifyUpstream();cu=d};cv.prototype.clearUnresolveds=function b(a){var c=this,d=this.unresolved.length;while(d--){var e=c.unresolved[d];if(a&&e!==a)continue;var f=c.unresolvedByKey[e],g=c.has(e),h=f.length;while(h--){g&&f[h].attemptResolution(),f[h].resolved&&f.splice(h,1)}f.length||(c.unresolved.splice(d,1),c.unresolvedByKey[e]=null)}};cv.prototype.createBranch=function b(a){var c=ac(a)?[]:{};this.set(c);return c};cv.prototype.findMatches=function b(a){var c=a.length,d=[this],e,f,g=function(){var b=a[f];b==='*'?(e=[],d.forEach(function(a){e.push.apply(e,a.getValueChildren(a.get()))})):(e=d.map(function(a){return a.joinKey(b)}));d=e};for(f=0;f<c;f+=1)g();return e};cv.prototype.get=function b(a){a&&bT(this);return this.value};cv.prototype.getIndexModel=function b(a){var c=this.parent.indexModels;if(typeof this.key==='string'&&a!==undefined){return new cp( a )}else c[this.key]||(c[this.key]=new cp( this.key ));return c[this.key]};cv.prototype.getKeyModel=function a(){return new cp( aE(this.key) )};cv.prototype.getKeypathModel=function b(a){var c=this.getKeypath(),d=this.keypathModel||(this.keypathModel=new cq( this ));if(a&&a.component){var e=this.getKeypath(a);if(e!==c){var f=a.viewmodel.keypathModels||(a.viewmodel.keypathModels={}),g=f[c]||(f[c]=new cq( this, a ));d.addChild(g);return g}}return d};cv.prototype.getKeypath=function b(a){var c=this.parent.isRoot?aE(this.key):this.parent.getKeypath()+'.'+aE(this.key);if(a&&a.component){var d=a.viewmodel.mappings;for(var e in d){if(c.indexOf(d[e].getKeypath())>=0){c=c.replace(d[e].getKeypath(),e);break}}}return c};cv.prototype.getValueChildren=function b(a){var c=this,d;if(aa(a))d=[],cu&&cu.parent===this&&cu.key==='length'&&d.push(cu),a.forEach(function(a,b){d.push(c.joinKey(b))});else if(ad(a)||typeof a==='function')d=Object.keys(a).map(function(a){return c.joinKey(a)});else if(a!=null){return[]}return d};cv.prototype.has=function b(a){var c=this.get();if(!c)return !1;a=aH(a);if(cr.call(c,a))return !0;var d=c.constructor;while(d!==Function&&d!==Array&&d!==Object){if(cr.call(d.prototype,a))return !0;d=d.constructor}return !1};cv.prototype.joinKey=function b(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){var c=new cv( this, a );this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]};cv.prototype.joinAll=function b(a){var c=this;for(var d=0;d<a.length;d+=1)c=c.joinKey(a[d]);return c};cv.prototype.mark=function a(){var b=this.retrieve();if(!ab(b,this.value)){var c=this.value;this.value=b;(c!==b||this.rewrap)&&this.adapt();this.children.forEach(bX);this.deps.forEach(bW);this.clearUnresolveds()}};cv.prototype.merge=function c(a,b){var d=b?this.value.map(b):this.value,e=b?a.map(b):a,f=d.length,g={},h=0,i=d.map(function(a){var b,c=h;do {b=e.indexOf(a,c);if(b===-1){return-1}c=b+1}while(g[b]===!0&&c<f);b===h&&(h+=1);g[b]=!0;return b});this.parent.value[this.key]=a;this._merged=!0;this.shuffle(i)};cv.prototype.notifyUpstream=function a(){var b=this.parent,c=this;while(b){b.patternObservers.length&&b.patternObservers.forEach(function(a){return a.notify(c.key)}),b.deps.forEach(bW),c=b,b=b.parent}};cv.prototype.register=function b(a){this.deps.push(a)};cv.prototype.registerChange=function c(a,b){this.isRoot?(this.changes[a]=b,bi.addInstance(this.root.ractive)):this.root.registerChange(a,b)};cv.prototype.registerPatternObserver=function b(a){this.patternObservers.push(a);this.register(a)};cv.prototype.registerTwowayBinding=function b(a){this.bindings.push(a)};cv.prototype.removeUnresolved=function c(a,b){var d=this.unresolvedByKey[a];d&&aS(d,b)};cv.prototype.retrieve=function a(){return this.parent.value?this.parent.value[this.key]:undefined};cv.prototype.set=function b(a){this.ticker&&this.ticker.stop();this.applyValue(a)};cv.prototype.shuffle=function b(a){var c=this,d=[];a.forEach(function(a,b){a!==b&&c.childByKey[b]&&c.childByKey[b].shuffled();if(!~a)return;var e=c.indexModels[b];if(!e)return;d[a]=e;a!==b&&e.rebind(a)});this.indexModels=d;this.deps.forEach(function(b){b.shuffle&&b.shuffle(a)});this.updateKeypathDependants();this.mark();this.deps.forEach(function(a){a.shuffle||a.handleChange()})};cv.prototype.shuffled=function a(){var b=this,c=this.children.length;while(c--)b.children[c].shuffled();this.wrapper&&(this.wrapper.teardown(),this.wrapper=null,this.rewrap=!0)};cv.prototype.teardown=function a(){this.children.forEach(b_);this.wrapper&&this.wrapper.teardown();if(this.keypathModels){for(var b in this.keypathModels)this.keypathModels[b].teardown()}};cv.prototype.unregister=function b(a){aS(this.deps,a)};cv.prototype.unregisterPatternObserver=function b(a){aS(this.patternObservers,a);this.unregister(a)};cv.prototype.unregisterTwowayBinding=function b(a){aS(this.bindings,a)};cv.prototype.updateFromBindings=function b(a){var c=this,d=this.bindings.length;while(d--){var e=c.bindings[d].getValue();e!==c.value&&c.set(e)}a&&this.children.forEach(cs)};cv.prototype.updateKeypathDependants=function a(){this.children.forEach(ct);this.keypathModel&&this.keypathModel.handleChange()};var cw=function(a){function b(){a.call(this,null,'@global');this.value=typeof global!=='undefined'?global:window;this.isRoot=!0;this.root=this;this.adaptors=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getKeypath=function a(){return'@global'};b.prototype.registerChange=function a(){};return b}(cv),cx=new cw();function cy(a,b){var c=a.findContext();if(b==='.'||b==='this')return c;if(b==='@keypath')return c.getKeypathModel(a.ractive);if(b==='@rootpath')return c.getKeypathModel();if(b==='@index'){var d=a.findRepeatingFragment();if(!d.isIteration)return;return d.context.getIndexModel(d.index)}if(b==='@key')return a.findRepeatingFragment().context.getKeyModel();if(b==='@ractive'){return a.ractive.viewmodel.getRactiveModel()}if(b==='@global'){return cx}if(b[0]==='~')return a.ractive.viewmodel.joinAll(aG(b.slice(2)));if(b[0]==='.'){var e=b.split('/');while(e[0]==='.'||e[0]==='..'){var f=e.shift();f==='..'&&(c=c.parent)}b=e.join('/');b[0]==='.'&&(b=b.slice(1));return c.joinAll(aG(b))}return bO(a,b)}function cz(a){if(!a)return this.viewmodel.get(!0);var b=aG(a),c=b[0],d;this.viewmodel.has(c)||(this.component&&!this.isolated&&(d=cy(this.component.parentFragment,c),d&&this.viewmodel.map(c,d)));d=this.viewmodel.joinAll(b);return d.get(!0)}var cA=new aM( 'insert' );function cB(a,b){if(!this.fragment.rendered){throw new Error( 'The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.' )}a=S(a);b=S(b)||null;if(!a){throw new Error( 'You must specify a valid target to insert into' )}a.insertBefore(this.detach(),b);this.el=a;(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this);this.isDetached=!1;cC(this)}function cC(a){cA.fire(a);a.findAllComponents('*').forEach(function(a){cC(a.instance)})}function cD(a,b){if(b===a||(a+'.').indexOf(b+'.')===0||(b+'.').indexOf(a+'.')===0){throw new Error( 'A keypath cannot be linked to itself.' )}var c=bi.start(),d,e=this._links[b];if(e){if(e.source.model.str!==a||e.dest.model.str!==b)e.unlink(),delete this._links[b],this.viewmodel.joinAll(aG(b)).set(e.initialValue);else{bi.end();return c}}var f=aG(a);!this.viewmodel.has(f[0])&&this.component&&(d=cy(this.component.parentFragment,f[0]),d&&this.viewmodel.map(f[0],d));e=new cE( this.viewmodel.joinAll(f), this.viewmodel.joinAll(aG(b)), this );this._links[b]=e;e.source.handleChange();bi.end();return c}var cE=function d(a,b,c){this.source=new cF( a, this );this.dest=new cF( b, this );this.ractive=c;this.locked=!1;this.initialValue=b.get()};cE.prototype.sync=function b(a){this.locked||(this.locked=!0,a===this.dest?this.source.model.set(this.dest.model.get()):this.dest.model.set(this.source.model.get()),this.locked=!1)};cE.prototype.unlink=function a(){this.source.model.unregister(this.source);this.dest.model.unregister(this.dest)};var cF=function c(a,b){this.model=a;this.owner=b;a.register(this)};cF.prototype.handleChange=function a(){this.owner.sync(this)};var cG={};function cH(a){if(!a)return null;if(a===!0)return JSON.stringify;if(typeof a==='function')return a;if(typeof a==='string'){return cG[a]||(cG[a]=function(b){return b[a]})}throw new Error( 'If supplied, options.compare must be a string, function, or `true`' )}function cI(a,b,c){var d=this.viewmodel.joinAll(aG(a)),e=bi.start(this,!0),f=d.get();if(b===f){throw new Error( 'You cannot merge an array with itself' )}else if(!aa(f)||!aa(b)){throw new Error( 'You cannot merge an array with a non-array' )}var g=cH(c&&c.compare);d.merge(b,g);bi.end();return e}function cJ(a,b,c){var d=this,e=[],f;if(ad(a))f=a,c=b||{},Object.keys(f).forEach(function(a){var b=f[a];a.split(' ').forEach(function(a){e.push(cK(d,a,b,c))})});else{var g;typeof a==='function'?(c=b,b=a,g=['']):(g=a.split(' '));g.forEach(function(a){e.push(cK(d,a,b,c||{}))})}this._observers.push.apply(this._observers,e);return{cancel:function(){e.forEach(function(a){aS(d._observers,a);a.cancel()})}}}function cK(a,b,c,d){var e=a.viewmodel,f=aG(b),g=f.indexOf('*');if(!~g){var h=f[0];if(h!==''&&!e.has(h)){if(a.component){var i=cy(a.component.parentFragment,h);i&&e.map(h,i)}}var j=e.joinAll(f);return new cL( a, j, c, d )}var k=g===0?e:e.joinAll(f.slice(0,g));return new cM( a, k, f.splice(g), c, d )}var cL=function e(a,b,c,d){this.context=d.context||a;this.model=b;this.keypath=b.getKeypath(a);this.callback=c;this.oldValue=undefined;this.newValue=b.get();this.defer=d.defer;this.once=d.once;this.strict=d.strict;this.dirty=!1;d.init!==!1?this.dispatch():(this.oldValue=this.newValue);b.register(this)};cL.prototype.cancel=function a(){this.model.unregister(this)};cL.prototype.dispatch=function a(){this.callback.call(this.context,this.newValue,this.oldValue,this.keypath);this.oldValue=this.newValue;this.dirty=!1};cL.prototype.handleChange=function a(){if(!this.dirty){this.newValue=this.model.get();if(this.strict&&this.newValue===this.oldValue)return;bi.addObserver(this,this.defer);this.dirty=!0;this.once&&this.cancel()}};var cM=function f(a,b,c,d,e){var g=this;this.context=e.context||a;this.ractive=a;this.baseModel=b;this.keys=c;this.callback=d;var h=c.join('\\.').replace(/\*/g,'(.+)'),i=b.getKeypath(a);this.pattern=new RegExp( ("^"+(i?i+'\\.':'')+""+h+"$") );this.oldValues={};this.newValues={};this.defer=e.defer;this.once=e.once;this.strict=e.strict;this.dirty=!1;this.changed=[];this.partial=!1;var j=b.findMatches(this.keys);j.forEach(function(a){g.newValues[a.getKeypath(g.ractive)]=a.get()});e.init!==!1?this.dispatch():(this.oldValues=this.newValues);b.registerPatternObserver(this)};cM.prototype.cancel=function a(){this.baseModel.unregisterPatternObserver(this)};cM.prototype.dispatch=function a(){var b=this;Object.keys(this.newValues).forEach(function(a){if(b.newKeys&&!b.newKeys[a])return;var c=b.newValues[a],d=b.oldValues[a];if(b.strict&&c===d)return;if(ab(c,d))return;var e=[c,d,a];if(a){var f=b.pattern.exec(a).slice(1);e=e.concat(f)}b.callback.apply(b.context,e)});if(this.partial){for(var c in this.newValues)this.oldValues[c]=this.newValues[c]}else this.oldValues=this.newValues;this.newKeys=null;this.dirty=!1};cM.prototype.notify=function b(a){this.changed.push(a)};cM.prototype.shuffle=function b(a){var c=this;if(!aa(this.baseModel.value))return;var d=this.baseModel.getKeypath(this.ractive),e=this.baseModel.value.length,f=this.keys.length>1?'.'+this.keys.slice(1).join('.'):'';this.newKeys={};for(var g=0;g<a.length;g++){if(a[g]===-1||a[g]===g)continue;c.newKeys[(""+d+"."+g+""+f)]=!0}for(var h=a.touchedFrom;h<e;h++)c.newKeys[(""+d+"."+h+""+f)]=!0};cM.prototype.handleChange=function a(){var b=this;if(!this.dirty){this.newValues={};if(!this.changed.length)this.baseModel.findMatches(this.keys).forEach(function(a){var c=a.getKeypath(b.ractive);b.newValues[c]=a.get()}),this.partial=!1;else{var c=this.baseModel.isRoot?this.changed:this.changed.map(function(a){return b.baseModel.getKeypath(b.ractive)+'.'+aE(a)});this.baseModel.findMatches(this.keys).forEach(function(a){var d=a.getKeypath(b.ractive);c.filter(function(a){return d.indexOf(a)===0&&(d.length===a.length||d[a.length]==='.')}).length&&(b.newValues[d]=a.get())});this.partial=!0}bi.addObserver(this,this.defer);this.dirty=!0;this.changed.length=0;this.once&&this.cancel()}};function cN(a,b,c){if(typeof a!=='string'){throw new Error( 'ractive.observeList() must be passed a string as its first argument' )}var d=this.viewmodel.joinAll(aG(a)),e=new cP( this, d, b, c||{} );this._observers.push(e);return{cancel:function(){e.cancel()}}}function cO(){return-1}var cP=function e(a,b,c,d){this.context=a;this.model=b;this.keypath=b.getKeypath();this.callback=c;this.pending=null;b.register(this);d.init!==!1?(this.sliced=[],this.shuffle([]),this.handleChange()):(this.sliced=this.slice())};cP.prototype.handleChange=function a(){this.pending?(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(cO)),this.handleChange())};cP.prototype.shuffle=function b(a){var c=this,d=this.slice(),e=[],f=[],g,h={};a.forEach(function(a,b){h[a]=!0;a!==b&&g===undefined&&(g=b);a===-1&&f.push(c.sliced[b])});g===undefined&&(g=a.length);var i=d.length;for(var j=0;j<i;j+=1){h[j]||e.push(d[j])}this.pending={inserted:e,deleted:f,start:g};this.sliced=d};cP.prototype.slice=function a(){var b=this.model.get();return aa(b)?b.slice():[]};var cQ={init:!1,once:!0};function cR(a,b,c){if(ad(a)||typeof a==='function'){c=Y(b||{},cQ);return this.observe(a,c)}c=Y(c||{},cQ);return this.observe(a,b,c)}function cS(a){return a.trim()};function cT(a){return a!==''};function cU(a,b){var c=this;if(!a){for(a in this._subs)delete this._subs[a]}else{var d=a.split(' ').map(cS).filter(cT);d.forEach(function(a){var d=c._subs[a];if(d){if(b){var e=d.indexOf(b);e!==-1&&d.splice(e,1)}else c._subs[a]=[]}})}return this}function cV(a,b){var c=this;if(typeof a==='object'){var d=[],e;for(e in a){a.hasOwnProperty(e)&&d.push(this.on(e,a[e]))}return{cancel:function(){var a;while(a=d.pop())a.cancel()}}}var f=a.split(' ').map(cS).filter(cT);f.forEach(function(a){(c._subs[a]||(c._subs[a]=[])).push(b)});return{cancel:function(){return c.off(a,b)}}}function cW(a,b){var c=this.on(a,function(){b.apply(this,arguments);c.cancel()});return c}function cX(a,b,c){var d,e=[],f,g,h,i;d=cY(a,b,c);if(!d){return null}h=d.length-2-d[1];f=Math.min(a,d[0]);g=f+d[1];for(i=0;i<f;i+=1)e.push(i);for(;i<g;i+=1)e.push(-1);for(;i<a;i+=1)e.push(i+h);h!==0?(e.touchedFrom=d[0]):(e.touchedFrom=a);return e}function cY(a,b,c){switch(b){case 'splice':c[0]!==undefined&&c[0]<0&&(c[0]=a+Math.max(c[0],-a));while(c.length<2)c.push(a-c[0]);c[1]=Math.min(c[1],a-c[0]);return c;case 'sort':;case 'reverse':return null;case 'pop':if(a){return[a-1,1]};return[0,0];case 'push':return[a,0].concat(c);case 'shift':return[0,a?1:0];case 'unshift':return[0,0].concat(c)}}var cZ=Array.prototype;function c_(a){return function(b){var c=[],d=arguments.length-1;while(d-->0)c[d]=arguments[d+1];var e=this.viewmodel.joinAll(aG(b)),f=e.get();if(!aa(f)){if(f===undefined){f=[];var g=cZ[a].apply(f,c);return this.set(b,f).then(function(){return g})}else{throw new Error( ("shuffle array method "+a+" called on non-array at "+e.getKeypath()) )}}var h=cX(f.length,a,c),i=cZ[a].apply(f,c),j=bi.start(this,!0).then(function(){return i});j.result=i;h?e.shuffle(h):e.set(i);bi.end();return j}}var c$=c_('pop'),da=c_('push'),db='/* Ractive.js component styles */',dc=[],dd=!1,de=null,df=null;function dg(a){dc.push(a);dd=!0}function dh(){if(!l||!dd)return;df?(de.styleSheet.cssText=di(null)):(de.innerHTML=di(null));dd=!1}function di(a){var b=a?dc.filter(function(b){return~a.indexOf(b.id)}):dc;return b.reduce(function(a,b){return ""+a+"\n\n/* {"+b.id+"} */\n"+b.styles},db)}l&&(!de||!de.parentNode)&&(de=l.createElement('style'),de.type='text/css',l.getElementsByTagName('head')[0].appendChild(de),df=!!de.styleSheet);var dj=new aM( 'render' ),dk=new aM( 'complete' );function dl(a,b,c,d){var e=a.transitionsEnabled;a.noIntro&&(a.transitionsEnabled=!1);var f=bi.start(a,!0);bi.scheduleTask(function(){return dj.fire(a)},!0);if(a.fragment.rendered){throw new Error( 'You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first' )}c=S(c)||a.anchor;a.el=b;a.anchor=c;a.cssId&&dh();if(b){(b.__ractive_instances__||(b.__ractive_instances__=[])).push(a);if(c){var g=l.createDocumentFragment();a.fragment.render(g);b.insertBefore(g,c)}else a.fragment.render(b,d)}bi.end();a.transitionsEnabled=e;return f.then(function(){return dk.fire(a)})}function dm(a,b){a=S(a)||this.el;if(!this.append&&a){var c=a.__ractive_instances__;c&&c.forEach(b_);this.enhance||(a.innerHTML='')}var d=this.enhance?aT(a.childNodes):null,e=dl(this,a,b,d);if(d){while(d.length)a.removeChild(d.pop())}return e}var dn={extend:function(a,b,c){b.adapt=dp(b.adapt,aQ(c.adapt))},init:function(){}};function dp(a,b){var c=a.slice(),d=b.length;while(d--){~c.indexOf(b[d])||c.push(b[d])}return c}var dq=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,dr=/\/\*.*?\*\//g,ds=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,dt=/^(?:@|\d+%)/,du=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;function dv(a){return a.trim()}function dw(a){return a.str}function dx(a,b){var c=[],d;while(d=ds.exec(a))c.push({str:d[0],base:d[1],modifiers:d[2]});var e=c.map(dw),f=[],g=c.length;while(g--){var h=e.slice(),i=c[g];h[g]=i.base+b+i.modifiers||'';var j=e.slice();j[g]=b+' '+j[g];f.push(h.join(' '),j.join(' '))}return f.join(', ')}function dy(a,b){var c="[data-ractive-css~=\"{"+b+"}\"]",d;du.test(a)?(d=a.replace(du,c)):(d=a.replace(dr,'').replace(dq,function(a,b){if(dt.test(b))return a;var d=b.split(',').map(dv),e=d.map(function(a){return dx(a,c)}).join(', ')+' ';return a.replace(b,e)}));return d}function dz(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1)}function dA(){return dz()+dz()+'-'+dz()+'-'+dz()+'-'+dz()+'-'+dz()+dz()+dz()}var dB={name:'css',extend:function(a,b,c){if(!c.css)return;var d=dA(),e=c.noCssTransform?c.css:dy(c.css,d);b.cssId=d;dg({id:d,styles:e})},init:function(a,b,c){if(!c.css)return;aq("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}};function dC(a,b){if(!/this/.test(a.toString()))return a;var c=a.bind(b);for(var d in a)c[d]=a[d];return c}function dD(a){a&&a.constructor!==Object&&(typeof a==='function'||(typeof a!=='object'?am(("data option must be an object or a function, `"+a+"` is not valid")):aq('If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged')))}var dE={name:'data',extend:function(a,b,c){var d,e;if(c.data&&ad(c.data)){for(d in c.data){e=c.data[d],e&&typeof e==='object'&&((ad(e)||aa(e))&&aq("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }"))}}b.data=dF(b.data,c.data)},init:function(a,b,c){var d=dF(a.prototype.data,c.data);typeof d==='function'&&(d=d.call(b));if(d&&d.constructor===Object){for(var e in d){typeof d[e]==='function'&&(d[e]=dC(d[e],b))}}return d||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.root.set(b);return !0}};function dF(a,b){dD(b);var c=typeof a==='function',d=typeof b==='function';!b&&!c&&(b={});if(!c&&!d){return dH(b,a)}return function(){var e=d?dG(b,this):b,f=c?dG(a,this):a;return dH(e,f)}}function dG(a,b){var c=a.call(b);if(!c)return;typeof c!=='object'&&am('Data function must return an object');c.constructor!==Object&&ar('Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged');return c}function dH(a,b){if(a&&b){for(var c in b){(c in a)||(a[c]=b[c])}return a}return a||b}var dI=3,dJ=/\$\{([^\}]+)\}/g;function dK(a,b){b===void 0&&(b=0);var c=new Array( b );while(b--)c[b]="_"+b;return new Function( [], ("return function ("+c.join(',')+"){return("+a+");};") )()}function dL(a,b){var c,d='return ('+a.replace(dJ,function(a,b){c=!0;return "__ractive.get(\""+b+"\")"})+');';c&&(d+="var __ractive = this; ";var e=new Function( d );return c?e.bind(b):e}var dM=V(null);function dN(a,b){if(dM[a])return dM[a];return dM[a]=hM(a,b)}function dO(a){if(!a)return;var b=a.e;if(!b)return;Object.keys(b).forEach(function(a){if(dM[a])return;dM[a]=b[a]})}var dP,dQ,dR=/^\s+/;dQ=function(a){this.name='ParseError';this.message=a;try{throw new Error(a)}catch(a){this.stack=a.stack}};dQ.prototype=Error.prototype;dP=function(a,b){var c=this,d,e,f=0;this.str=a;this.options=b||{};this.pos=0;this.lines=this.str.split('\n');this.lineEnds=this.lines.map(function(a){var b=f+a.length+1;f=b;return b},0);this.init&&this.init(a,b);d=[];while(c.pos<c.str.length&&(e=c.read()))d.push(e);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(d,b):d};dP.prototype={read:function(a){var b=this,c,d,e,f;a||(a=this.converters);c=this.pos;e=a.length;for(d=0;d<e;d+=1){b.pos=c;if(f=a[d](b)){return f}}return null},getLinePos:function(a){var b=this,c=0,d=0,e;while(a>=b.lineEnds[c]){d=b.lineEnds[c],c+=1}e=a-d;return[c+1,e+1,a]},error:function(a){var b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=0,g=e.replace(/\t/g,function(a,c){c<b[1]&&(f+=1);return'  '})+'\n'+new Array( b[1]+f ).join(' ')+'^----',h=new dQ( (""+a+" at line "+c+" character "+d+":\n"+g) );h.line=b[0];h.character=b[1];h.shortMessage=a;throw h},matchString:function(a){if(this.str.substr(this.pos,a.length)===a){this.pos+=a.length;return a}},matchPattern:function(a){var b;if(b=a.exec(this.remaining())){this.pos+=b[0].length;return b[1]||b[0]}},allowWhitespace:function(){this.matchPattern(dR)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};dP.extend=function(a){var b=this,c,d;c=function(a,b){dP.call(this,a,b)};c.prototype=V(b.prototype);for(d in a){_.call(a,d)&&(c.prototype[d]=a[d])}c.extend=dP.extend;return c};var dS=dP,dT=1,dU=2,dV=3,dW=4,dX=5,dY=6,dZ=7,d_=8,d$=9,ea=10,eb=14,ec=15,ed=16,ee=17,ef=18,eg=19,eh=20,ei=21,ej=22,ek=23,el=24,em=25,en=26,eo=27,ep=30,eq=31,er=32,es=33,et=34,eu=35,ev=36,ew=40,ex=50,ey=51,ez=52,eA=53,eB=54,eC=60,eD=61,eE=/^[^\s=]+/,eF=/^\s+/;function eG(a){var b,c,d;if(!a.matchString('=')){return null}b=a.pos;a.allowWhitespace();c=a.matchPattern(eE);if(!c){a.pos=b;return null}if(!a.matchPattern(eF)){return null}d=a.matchPattern(eE);if(!d){a.pos=b;return null}a.allowWhitespace();if(!a.matchString('=')){a.pos=b;return null}return[c,d]}var eH=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;function eI(a){var b;if(b=a.matchPattern(eH)){return{t:em,v:b}}return null}var eJ={t:ea,exclude:!0};function eK(a){var b,c;if(a.interpolate[a.inside]===!1){return null}for(c=0;c<a.tags.length;c+=1){if(b=eL(a,a.tags[c])){return b}}}function eL(a,b){var c,d,e,f;c=a.pos;if(a.matchString('\\'+b.open)){if(c===0||a.str[c-1]!=='\\'){return b.open}}else if(!a.matchString(b.open)){return null}if(d=eG(a)){if(!a.matchString(b.close)){return null}b.open=d[0];b.close=d[1];a.sortMustacheTags();return eJ}a.allowWhitespace();if(a.matchString('/')){a.pos-=1;var g=a.pos;eI(a)?(a.pos=g):(a.pos=g-b.close.length,a.error('Attempted to close a section that wasn\'t open'))}for(f=0;f<b.readers.length;f+=1){e=b.readers[f];if(d=e(a,b)){b.isStatic&&(d.s=!0);a.includeLinePositions&&(d.p=a.getLinePos(c));return d}}a.pos=c;return null}var eM='Expected a JavaScript expression',eN='Expected closing paren',eO=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;function eP(a){var b;if(b=a.matchPattern(eO)){return{t:eh,v:b}}return null}function eQ(a){var b=a.remaining();if(b.substr(0,4)==='true'){a.pos+=4;return{t:el,v:'true'}}if(b.substr(0,5)==='false'){a.pos+=5;return{t:el,v:'false'}}return null}var eR,eS,eT;eR=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;eS=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;eT=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;function eU(a){return function(b){var c='"',d=!1,e;while(!d){e=b.matchPattern(eR)||b.matchPattern(eS)||b.matchString(a),e?(e==="\""?(c+="\\\""):e==="\\'"?(c+="'"):(c+=e)):(e=b.matchPattern(eT),e?(c+='\\u'+('000'+e.charCodeAt(1).toString(16)).slice(-4)):(d=!0))}c+='"';return JSON.parse(c)}}var eV=eU("\""),eW=eU("'");function eX(a){var b,c;b=a.pos;if(a.matchString('"')){c=eW(a);if(!a.matchString('"')){a.pos=b;return null}return{t:ei,v:c}}if(a.matchString("'")){c=eV(a);if(!a.matchString("'")){a.pos=b;return null}return{t:ei,v:c}}return null}var eY=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,eZ=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function e_(a){var b;if(b=eX(a)){return eZ.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"'}if(b=eP(a)){return b.v}if(b=a.matchPattern(eY)){return b}return null}function e$(a){var b,c,d;b=a.pos;a.allowWhitespace();var e=a.nextChar()!=='\''&&a.nextChar()!=='"';c=e_(a);if(c===null){a.pos=b;return null}a.allowWhitespace();if(e&&(a.nextChar()===','||a.nextChar()==='}')){eY.test(c)||a.error(("Expected a valid reference, but found '"+c+"' instead."));return{t:eo,k:c,v:{t:ep,n:c}}}if(!a.matchString(':')){a.pos=b;return null}a.allowWhitespace();d=fx(a);if(d===null){a.pos=b;return null}return{t:eo,k:c,v:d}}function fa(a){var b,c,d,e;b=a.pos;d=e$(a);if(d===null){return null}c=[d];if(a.matchString(',')){e=fa(a);if(!e){a.pos=b;return null}return c.concat(e)}return c}function fb(a){var b,c;b=a.pos;a.allowWhitespace();if(!a.matchString('{')){a.pos=b;return null}c=fa(a);a.allowWhitespace();if(!a.matchString('}')){a.pos=b;return null}return{t:ek,m:c}}function fc(a){a.allowWhitespace();var b=fx(a);if(b===null)return null;var c=[b];a.allowWhitespace();if(a.matchString(',')){var d=fc(a);d===null&&a.error(eM);c.push.apply(c,d)}return c}function fd(a){var b,c;b=a.pos;a.allowWhitespace();if(!a.matchString('[')){a.pos=b;return null}c=fc(a);if(!a.matchString(']')){a.pos=b;return null}return{t:ej,m:c}}function fe(a){return eP(a)||eQ(a)||eX(a)||fb(a)||fd(a)||eI(a)}var ff=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,fg,fh;fg=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/;fh=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var fi=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,fj=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/;function fk(a){var b,c,d,e,f,g,h;b=a.pos;d=a.matchPattern(/^@(?:keypath|rootpath|index|key|ractive|global)/);d||(c=a.matchPattern(ff)||'',d=!c&&a.relaxedNames&&a.matchPattern(fj)||a.matchPattern(fi),!d&&c==='.'&&(c='',d='.'));if(!d){return null}if(!c&&!a.relaxedNames&&fh.test(d)){a.pos=b;return null}if(!c&&fg.test(d)){e=fg.exec(d)[0];a.pos=b+e.length;return{t:en,v:e}}g=(c||'').length+d.length;f=(c||'')+aF(d);if(a.matchString('(')){h=f.lastIndexOf('.');if(h!==-1&&d[d.length-1]!==']'){var i=f.length;f=f.substr(0,h);a.pos=b+(g-(i-h))}else a.pos-=1}return{t:ep,n:f.replace(/^this\./,'./').replace(/^this$/,'.')}}function fl(a){if(!a.matchString('('))return null;a.allowWhitespace();var b=fx(a);b||a.error(eM);a.allowWhitespace();a.matchString(')')||a.error(eN);return{t:et,x:b}}function fm(a){return fe(a)||fk(a)||fl(a)}function fo(a){a.strictRefinement||a.allowWhitespace();if(a.matchString('.')){a.allowWhitespace();var b=a.matchPattern(eY);if(b){return{t:eq,n:b}}a.error('Expected a property name')}if(a.matchString('[')){a.allowWhitespace();var c=fx(a);c||a.error(eM);a.allowWhitespace();a.matchString(']')||a.error("Expected ']'");return{t:eq,x:c}}return null}function fp(a){var b=fm(a);if(!b)return null;while(b){var c=fo(a);if(c)b={t:er,x:b,r:c};else if(a.matchString('(')){a.allowWhitespace();var d=fc(a);a.allowWhitespace();a.matchString(')')||a.error(eN);b={t:ew,x:b};d&&(b.o=d)}else{break}}return b}var fq,fr;fr=function(a,b){return function(c){var d;if(d=b(c)){return d}if(!c.matchString(a)){return null}c.allowWhitespace();d=fx(c);d||c.error(eM);return{s:a,o:d,t:es}}};!function(){var a,b,c,d,e;d='! ~ + - typeof'.split(' ');e=fp;for(a=0, b=d.length;a<b;a+=1){c=fr(d[a],e),e=c}fq=e}();var fs=fq,ft,fu;fu=function(a,b){return function(c){var d,e,f;e=b(c);if(!e){return null}while(!0){d=c.pos;c.allowWhitespace();if(!c.matchString(a)){c.pos=d;return e}if(a==='in'&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0))){c.pos=d;return e}c.allowWhitespace();f=b(c);if(!f){c.pos=d;return e}e={t:ev,s:a,o:[e,f]}}}};!function(){var a,b,c,d,e;d='* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||'.split(' ');e=fs;for(a=0, b=d.length;a<b;a+=1){c=fu(d[a],e),e=c}ft=e}();var fv=ft;function fw(a){var b,c,d,e;c=fv(a);if(!c){return null}b=a.pos;a.allowWhitespace();if(!a.matchString('?')){a.pos=b;return c}a.allowWhitespace();d=fx(a);d||a.error(eM);a.allowWhitespace();a.matchString(':')||a.error('Expected ":"');a.allowWhitespace();e=fx(a);e||a.error(eM);return{t:eu,o:[c,d,e]}}function fx(a){return fw(a)}function fy(a){var b;fz(a,b=[]);return{r:b,s:c(a)};function c(a){switch(a.t){case el:;case en:;case eh:;case em:return a.v;case ei:return JSON.stringify(String(a.v));case ej:return'['+(a.m?a.m.map(c).join(','):'')+']';case ek:return'{'+(a.m?a.m.map(c).join(','):'')+'}';case eo:return a.k+':'+c(a.v);case es:return(a.s==='typeof'?'typeof ':a.s)+c(a.o);case ev:return c(a.o[0])+(a.s.substr(0,2)==='in'?' '+a.s+' ':a.s)+c(a.o[1]);case ew:return c(a.x)+'('+(a.o?a.o.map(c).join(','):'')+')';case et:return'('+c(a.x)+')';case er:return c(a.x)+c(a.r);case eq:return a.n?'.'+a.n:'['+c(a.x)+']';case eu:return c(a.o[0])+'?'+c(a.o[1])+':'+c(a.o[2]);case ep:return'_'+b.indexOf(a.n);default:throw new Error( 'Expected legal JavaScript' )}}}function fz(a,b){var c,d;a.t===ep&&(b.indexOf(a.n)===-1&&b.unshift(a.n));d=a.o||a.m;if(d){if(ad(d))fz(d,b);else{c=d.length;while(c--)fz(d[c],b)}}a.x&&fz(a.x,b);a.r&&fz(a.r,b);a.v&&fz(a.v,b)}function fA(a,b){var c;if(a){while(a.t===et&&a.x)a=a.x;a.t===ep?(b.r=a.n):(c=fB(a))?(b.rx=c):(b.x=fy(a));return b}}function fB(a){var b=[],c;while(a.t===er&&a.r.t===eq){c=a.r,c.x?(c.x.t===ep?b.unshift(c.x):b.unshift(fy(c.x))):b.unshift(c.n),a=a.x}if(a.t!==ep){return null}return{r:a.n,m:b}}function fC(a,b){var c=fx(a),d;if(!c){return null}a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));d={t:dV};fA(c,d);return d}function fD(a,b){var c,d;if(!a.matchString('&')){return null}a.allowWhitespace();c=fx(a);if(!c){return null}a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));d={t:dV};fA(c,d);return d}var fE=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,fF=/^as/i;function fG(a){var b=[],c,d=a.pos;a.allowWhitespace();c=fH(a);if(c){c.x=fA(c.x,{});b.push(c);a.allowWhitespace();while(a.matchString(',')){c=fH(a),c||a.error('Expected another alias.'),c.x=fA(c.x,{}),b.push(c),a.allowWhitespace()}return b}a.pos=d;return null}function fH(a){var b,c,d=a.pos;a.allowWhitespace();b=fx(a,[]);if(!b){a.pos=d;return null}a.allowWhitespace();if(!a.matchPattern(fF)){a.pos=d;return null}a.allowWhitespace();c=a.matchPattern(fE);c||a.error('Expected a legal alias name.');return{n:c,x:b}}function fI(a,b){if(!a.matchString('>'))return null;a.allowWhitespace();a.relaxedNames=a.strictRefinement=!0;var c=fx(a);a.relaxedNames=a.strictRefinement=!1;if(!c)return null;var d={t:d_};fA(c,d);a.allowWhitespace();var e=fG(a);if(e)d={t:eg,z:e,f:[d]};else{var f=fx(a);f&&(d={t:dW,n:eA,f:[d]},fA(f,d))}a.allowWhitespace();a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));return d}function fJ(a,b){var c;if(!a.matchString('!')){return null}c=a.remaining().indexOf(b.close);if(c!==-1){a.pos+=c+b.close.length;return{t:d$}}}function fK(a,b){var c,d,e;c=a.pos;d=fx(a);if(!d){var f=a.matchPattern(/^(\w+)/);if(f){return{t:ep,n:f}}return null}for(e=0;e<b.length;e+=1){if(a.remaining().substr(0,b[e].length)===b[e]){return d}}a.pos=c;return fk(a)}function fL(a,b){var c,d,f,g;c=a.pos;try{d=fK(a,[b.close])}catch(a){g=a};if(!d){if(a.str.charAt(c)==='!'){a.pos=c;return null}if(g){throw g}}if(!a.matchString(b.close)){a.error(("Expected closing delimiter '"+b.close+"' after reference"));if(!d){if(a.nextChar()==='!'){return null}a.error("Expected expression or legal reference")}}f={t:dU};fA(d,f);return f}var fM=/^yield\s*/;function fN(a,b){if(!a.matchPattern(fM))return null;var c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(b.close)||a.error("expected legal partial name");var d={t:ed};c&&(d.n=c);return d}function fO(a,b){var c,d,e,f;c=a.pos;if(!a.matchString(b.open)){return null}a.allowWhitespace();if(!a.matchString('/')){a.pos=c;return null}a.allowWhitespace();d=a.remaining();e=d.indexOf(b.close);if(e!==-1){f={t:dY,r:d.substr(0,e).split(' ')[0]};a.pos+=e;a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));return f}a.pos=c;return null}var fP=/^\s*else\s*/;function fQ(a,b){var c=a.pos;if(!a.matchString(b.open)){return null}if(!a.matchPattern(fP)){a.pos=c;return null}a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));return{t:eC}}var fR=/^\s*elseif\s+/;function fS(a,b){var c=a.pos;if(!a.matchString(b.open)){return null}if(!a.matchPattern(fR)){a.pos=c;return null}var d=fx(a);a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));return{t:eD,x:d}}var fT={'each':ez,'if':ex,'with':eB,'unless':ey},fU=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,fV=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,fW=new RegExp( '^('+Object.keys(fT).join('|')+')\\b' );function fX(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=!1;c=a.pos;if(a.matchString('^'))e={t:dW,f:[],n:ey};else if(a.matchString('#'))e={t:dW,f:[]},a.matchString('partial')&&(a.pos=c-a.standardDelimiters[0].length,a.error('Partial definitions can only be at the top level of the template, or immediately inside components')),(i=a.matchPattern(fW))&&(n=i,e.n=fT[i]);else{return null}a.allowWhitespace();if(i==='with'){var p=fG(a);p&&(o=!0,e.z=p,e.t=eg)}else if(i==='each'){var q=fH(a);q&&(e.z=[{n:q.n,x:{r:'.'}}],d=q.x)}if(!o){d||(d=fx(a));d||a.error('Expected expression');if(m=a.matchPattern(fU)){var r;(r=a.matchPattern(fV))?(e.i=m+','+r):(e.i=m)}}a.allowWhitespace();a.matchString(b.close)||a.error(("Expected closing delimiter '"+b.close+"'"));a.sectionDepth+=1;g=e.f;k=[];do {if(f=fO(a,b))n&&f.r!==n&&a.error(("Expected "+b.open+"/"+n+""+b.close)),a.sectionDepth-=1,l=!0;else if(!o&&(f=fS(a,b)))e.n===ey&&a.error('{{else}} not allowed in {{#unless}}'),h&&a.error('illegal {{elseif...}} after {{else}}'),j||(j=fY(d)),j.f.push({t:dW,n:ex,x:fy(f_(k.concat(f.x))),f:g=[]}),k.push(fZ(f.x));else if(!o&&(f=fQ(a,b)))e.n===ey&&a.error('{{else}} not allowed in {{#unless}}'),h&&a.error('there can only be one {{else}} block, at the end of a section'),h=!0,j?j.f.push({t:dW,n:ex,x:fy(f_(k)),f:g=[]}):(j=fY(d),g=j.f);else{f=a.read(hG);if(!f){break}g.push(f)}}while(!l);j&&(e.l=j);o||fA(d,e);e.f.length||delete e.f;return e}function fY(a){var b={t:dW,n:ey,f:[]};fA(a,b);return b}function fZ(a){if(a.t===es&&a.s==='!'){return a.o}return{t:es,s:'!',o:f$(a)}}function f_(a){if(a.length===1){return a[0]}return{t:ev,s:'&&',o:[f$(a[0]),f$(f_(a.slice(1)))]}}function f$(a){return{t:et,x:a}}var ga='<!--',gb='-->';function gc(a){var b,c,d,e,f;b=a.pos;if(!a.matchString(ga)){return null}d=a.remaining();e=d.indexOf(gb);e===-1&&a.error('Illegal HTML - expected closing comment sequence (\'-->\')');c=d.substr(0,e);a.pos+=e+3;f={t:d$,c:c};a.includeLinePositions&&(f.p=a.getLinePos(b));return f}var gd=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,ge=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,gf={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,'int':8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},gg=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],gh=new RegExp( '&(#?(?:x[\\w\\d]+|\\d+|'+Object.keys(gf).join('|')+'));?', 'g' ),gi=typeof String.fromCodePoint==='function',gj=gi?String.fromCodePoint:String.fromCharCode;function gk(a){return a.replace(gh,function(a,b){var c;b[0]!=='#'?(c=gf[b]):b[1]==='x'?(c=parseInt(b.substring(2),16)):(c=parseInt(b.substring(1),10));if(!c){return a}return gj(gq(c))})}var gl=/</g,gm=/>/g,gn=/&/g,go=65533;function gp(a){return a.replace(gn,'&amp;').replace(gl,'&lt;').replace(gm,'&gt;')}function gq(a){if(!a){return go}if(a===10){return 32}if(a<128){return a}if(a<=159){return gg[a-128]}if(a<55296){return a}if(a<=57343){return go}if(a<=65535){return a}else if(!gi){return go}if(a>=65536&&a<=131071){return a}if(a>=131072&&a<=196607){return a}return go}var gr=/^[ \t\f\r\n]*\r?\n/,gs=/\r?\n[ \t\f\r\n]*$/;function gt(a){var b,c,d,e,f;for(b=1;b<a.length;b+=1){c=a[b],d=a[b-1],e=a[b-2],gu(c)&&gv(d)&&gu(e)&&(gs.test(e)&&gr.test(c)&&(a[b-2]=e.replace(gs,'\n'),a[b]=c.replace(gr,''))),gw(c)&&gu(d)&&(gs.test(d)&&gu(c.f[0])&&gr.test(c.f[0])&&(a[b-1]=d.replace(gs,'\n'),c.f[0]=c.f[0].replace(gr,''))),gu(c)&&gw(d)&&(f=aR(d.f),gu(f)&&gs.test(f)&&gr.test(c)&&(d.f[d.f.length-1]=f.replace(gs,'\n'),a[b]=c.replace(gr,'')))}return a}function gu(a){return typeof a==='string'}function gv(a){return a.t===d$||a.t===ea}function gw(a){return(a.t===dW||a.t===dX)&&a.f}function gx(a,b,c){var d;b&&(d=a[0],typeof d==='string'&&(d=d.replace(b,''),d?(a[0]=d):a.shift()));c&&(d=aR(a),typeof d==='string'&&(d=d.replace(c,''),d?(a[a.length-1]=d):a.pop()))}var gy=/[ \t\f\r\n]+/g,gz=/^(?:pre|script|style|textarea)$/i,gA=/^[ \t\f\r\n]+/,gB=/[ \t\f\r\n]+$/,gC=/^(?:\r\n|\r|\n)/,gD=/(?:\r\n|\r|\n)$/;function gE(a,b,c,d,e){var f,g,h,i,j,k,l,m;gt(a);f=a.length;while(f--){g=a[f],g.exclude?a.splice(f,1):b&&g.t===d$&&a.splice(f,1)}gx(a,d?gA:null,e?gB:null);f=a.length;while(f--){g=a[f];if(g.f){var n=g.t===dZ&&gz.test(g.e);j=c||n;!c&&n&&gx(g.f,gC,gD);j||(h=a[f-1],i=a[f+1],(!h||typeof h==='string'&&gB.test(h))&&(k=!0),(!i||typeof i==='string'&&gA.test(i))&&(l=!0));gE(g.f,b,j,k,l)}g.l&&(gE(g.l.f,b,c,k,l),a.splice(f+1,0,g.l),delete g.l);if(g.a){for(m in g.a){g.a.hasOwnProperty(m)&&typeof g.a[m]!=='string'&&gE(g.a[m],b,c,k,l)}}g.m&&gE(g.m,b,c,k,l);if(g.v){for(m in g.v){g.v.hasOwnProperty(m)&&(aa(g.v[m].n)&&gE(g.v[m].n,b,c,k,l),aa(g.v[m].d)&&gE(g.v[m].d,b,c,k,l))}}}f=a.length;while(f--){typeof a[f]==='string'&&(typeof a[f+1]==='string'&&(a[f]=a[f]+a[f+1],a.splice(f+1,1)),c||(a[f]=a[f].replace(gy,' ')),a[f]===''&&a.splice(f,1))}}var gF=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;function gG(a){var b,c;b=a.pos;if(!a.matchString('</')){return null}if(c=a.matchPattern(gF)){if(a.inside&&c!==a.inside){a.pos=b;return null}return{t:eb,e:c}}a.pos-=2;a.error('Illegal closing tag')}var gH=/[-/\\^$*+?.()|[\]{}]/g;function gI(a){return a.replace(gH,'\\$&')}var gJ={};function gK(a,b){return a.search(gJ[b.join()]||(gJ[b.join()]=new RegExp( b.map(gI).join('|') )))}var gL=/^[^\s"'>\/=]+/,gM=/^[^\s"'=<>`]+/;function gN(a){var b,c,d;a.allowWhitespace();c=a.matchPattern(gL);if(!c){return null}b={name:c};d=gO(a);d!=null&&(b.value=d);return b}function gO(a){var b,c,d,e;b=a.pos;/[=\/>\s]/.test(a.nextChar())||a.error('Expected `=`, `/`, `>` or whitespace');a.allowWhitespace();if(!a.matchString('=')){a.pos=b;return null}a.allowWhitespace();c=a.pos;d=a.sectionDepth;e=gR(a,"'")||gR(a,"\"")||gQ(a);e===null&&a.error('Expected valid attribute value');a.sectionDepth!==d&&(a.pos=c,a.error('An attribute value must contain as many opening section tags as closing section tags'));if(!e.length){return''}if(e.length===1&&typeof e[0]==='string'){return gk(e[0])}return e}function gP(a){var b,c,d,e,f;b=a.pos;c=a.matchPattern(gM);if(!c){return null}d=c;e=a.tags.map(function(a){return a.open});(f=gK(d,e))!==-1&&(c=c.substr(0,f),a.pos=b+c.length);return c}function gQ(a){var b,c;a.inAttribute=!0;b=[];c=eK(a)||gP(a);while(c!==null){b.push(c),c=eK(a)||gP(a)}if(!b.length){return null}a.inAttribute=!1;return b}function gR(a,b){var c,d,e;c=a.pos;if(!a.matchString(b)){return null}a.inAttribute=b;d=[];e=eK(a)||gS(a,b);while(e!==null){d.push(e),e=eK(a)||gS(a,b)}if(!a.matchString(b)){a.pos=c;return null}a.inAttribute=!1;return d}function gS(a,b){var c=a.remaining(),d=a.tags.map(function(a){return a.open});d.push(b);var e=gK(c,d);e===-1&&a.error('Quoted attribute value must have a closing quote');if(!e){return null}a.pos+=e;return c.substr(0,e)}var gT={'true':!0,'false':!1,'null':null,undefined:undefined},gU=new RegExp( '^(?:'+Object.keys(gT).join('|')+')' ),gV=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,gW=/\$\{([^\}]+)\}/g,gX=/^\$\{([^\}]+)\}/,gY=/^\s*$/,gZ=dS.extend({init:function(a,b){this.values=b.values;this.allowWhitespace()},postProcess:function(a){if(a.length!==1||!gY.test(this.leftover)){return null}return{value:a[0].v}},converters:[function b(a){if(!a.values)return null;var c=a.matchPattern(gX);if(c&&a.values.hasOwnProperty(c)){return{v:a.values[c]}}},function b(a){var c=a.matchPattern(gU);if(c)return{v:gT[c]}},function b(a){var c=a.matchPattern(gV);if(c)return{v:+c}},function b(a){var c=eX(a),d=a.values;if(c&&d){return{v:c.v.replace(gW,function(a,b){return b in d?d[b]:b})}}return c},function b(a){if(!a.matchString('{'))return null;var c={};a.allowWhitespace();if(a.matchString('}')){return{v:c}}var d;while(d=g_(a)){c[d.key]=d.value;a.allowWhitespace();if(a.matchString('}')){return{v:c}}if(!a.matchString(',')){return null}}return null},function b(a){if(!a.matchString('['))return null;var c=[];a.allowWhitespace();if(a.matchString(']')){return{v:c}}var d;while(d=a.read()){c.push(d.v);a.allowWhitespace();if(a.matchString(']')){return{v:c}}if(!a.matchString(',')){return null}a.allowWhitespace()}return null}]});function g_(a){a.allowWhitespace();var b=e_(a);if(!b)return null;var c={key:b};a.allowWhitespace();if(!a.matchString(':')){return null}a.allowWhitespace();var d=a.read();if(!d)return null;c.value=d.v;return c}function g$(a,b){var c=new gZ( a, {values:b});return c.result}var ha=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,hb=/\)\s*$/,hc=/(\s*,{0,1}\s*\.{3}arguments\s*)$/,hd;hd=dS.extend({converters:[fx]});function he(a,b){var c,d,e,f,g,h,i;if(typeof a==='string'){if(d=ha.exec(a)){var j=a.lastIndexOf(')');hb.test(a)||b.error(("Invalid input after method call expression '"+a.slice(j+1)+"'"));c={m:d[1]};var k=a.slice(c.m.length+1,j),l=k.replace(hc,'');k!==l&&(c.g=!0);if(l){var m=new hd( '['+l+']' );c.a=fy(m.result[0])}return c}if(a.indexOf(':')===-1){return a.trim()}a=[a]}c={};g=[];h=[];if(a){while(a.length){e=a.shift();if(typeof e==='string'){f=e.indexOf(':');if(f===-1)g.push(e);else{f&&g.push(e.substr(0,f));e.length>f+1&&(h[0]=e.substring(f+1));break}}else g.push(e)}h=h.concat(a)}g.length?h.length||typeof g!=='string'?(c={n:g.length===1&&typeof g[0]==='string'?g[0]:g},h.length===1&&typeof h[0]==='string'?(i=g$('['+h[0]+']'),c.a=i?i.value:[h[0].trim()]):(c.d=h)):(c=g):(c='');return c}var hf=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,hg=/^[\s\n\/>]/,hh=/^on/,hi=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,hj=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,hk={'intro-outro':'t0',intro:'t1',outro:'t2',decorator:'o'},hl={exclude:!0},hm;hm={li:['li'],dt:['dt','dd'],dd:['dt','dd'],p:'address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul'.split(' '),rt:['rt','rp'],rp:['rt','rp'],optgroup:['optgroup'],option:['option','optgroup'],thead:['tbody','tfoot'],tbody:['tbody','tfoot'],tfoot:['tbody'],tr:['tr','tbody'],td:['td','th','tr'],th:['td','th','tr']};function hn(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;b=a.pos;if(a.inside||a.inAttribute){return null}if(!a.matchString('<')){return null}if(a.nextChar()==='/'){return null}c={};a.includeLinePositions&&(c.p=a.getLinePos(b));if(a.matchString('!')){c.t=ef;a.matchPattern(/^doctype/i)||a.error('Expected DOCTYPE declaration');c.a=a.matchPattern(/^(.+?)>/);return c}c.t=dZ;c.e=a.matchPattern(hf);if(!c.e){return null}hg.test(a.nextChar())||a.error('Illegal tag name');f=function(b,d){var e=d.n||d;hj.test(e)&&(a.pos-=e.length,a.error('Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)'));c.v[b]=d};a.allowWhitespace();while(g=eK(a)||gN(a)){g.name?((d=hk[g.name])?(c[d]=he(g.value,a)):(e=hi.exec(g.name))?(c.v||(c.v={}),h=he(g.value,a),f(e[1],h)):(!a.sanitizeEventAttributes||!hh.test(g.name))&&(c.a||(c.a={}),c.a[g.name]=g.value||(g.value===''?'':0))):(c.m||(c.m=[]),c.m.push(g)),a.allowWhitespace()}a.allowWhitespace();a.matchString('/')&&(i=!0);if(!a.matchString('>')){return null}var r=c.e.toLowerCase(),s=a.preserveWhitespace;if(!i&&!ge.test(c.e)){a.elementStack.push(r);(r==='script'||r==='style'||r==='textarea')&&(a.inside=r);j=[];k=V(null);do {o=a.pos;p=a.remaining();p||a.error(("Missing end "+(a.elementStack.length>1?'tags':'tag')+" ("+a.elementStack.reverse().map(function(a){return "</"+a+">"}).join('')+")"));if(!ho(r,p))n=!0;else if(q=gG(a)){n=!0;var t=q.e.toLowerCase();if(t!==r){a.pos=o;if(!~a.elementStack.indexOf(t)){var u='Unexpected closing tag';ge.test(t)&&(u+=" (<"+t+"> is a void element - it cannot contain children)");a.error(u)}}}else (m=fO(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(n=!0,a.pos=o):(m=a.read(hH))?(k[m.n]&&(a.pos=o,a.error('Duplicate partial definition')),gE(m.f,a.stripComments,s,!s,!s),k[m.n]=m.f,l=!0):(m=a.read(hG))?j.push(m):(n=!0)}while(!n);j.length&&(c.f=j);l&&(c.p=k);a.elementStack.pop()}a.inside=null;if(a.sanitizeElements&&a.sanitizeElements.indexOf(r)!==-1){return hl}return c}function ho(a,b){var c,d;c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b);d=hm[a];if(!c||!d){return !0}return!~d.indexOf(c[1].toLowerCase())}function hp(a){var b,c,d,e;c=a.remaining();a.textOnlyMode?(d=a.tags.map(function(a){return a.open}),d=d.concat(a.tags.map(function(a){return'\\'+a.open})),b=gK(c,d)):(e=a.inside?'</'+a.inside:'<',a.inside&&!a.interpolate[a.inside]?(b=c.indexOf(e)):(d=a.tags.map(function(a){return a.open}),d=d.concat(a.tags.map(function(a){return'\\'+a.open})),a.inAttribute===!0?d.push("\"","'","=","<",">",'`'):a.inAttribute?d.push(a.inAttribute):d.push(e),b=gK(c,d)));if(!b){return null}b===-1&&(b=c.length);a.pos+=b;if(a.inside&&a.inside!=='textarea'||a.textOnlyMode){return c.substr(0,b)}else{return gk(c.substr(0,b))}}var hq=/^<!--\s*/,hr=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,hs=/\s*-->/;function ht(a){var b=a.pos,c=a.standardDelimiters[0],d=a.standardDelimiters[1];if(!a.matchPattern(hq)||!a.matchString(c)){a.pos=b;return null}var e=a.matchPattern(hr);ar(("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+e+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+e+"}} --> ... <!-- {{/"+e+"}} -->'"));if(!a.matchString(d)||!a.matchPattern(hs)){a.pos=b;return null}var f=[],g,h=new RegExp('^<!--\\s*'+gI(c)+'\\s*\\/\\s*'+e+'\\s*'+gI(d)+'\\s*-->');do {if(a.matchPattern(h))g=!0;else{var i=a.read(hG);i||a.error(("expected closing comment ('<!-- "+c+"/"+e+""+d+" -->')"));f.push(i)}}while(!g);return{t:ee,f:f,n:e}}var hu=/^#\s*partial\s+/;function hv(a){var b,c,d,e,f;b=a.pos;var g=a.standardDelimiters;if(!a.matchString(g[0])){return null}if(!a.matchPattern(hu)){a.pos=b;return null}c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/);c||a.error('expected legal partial name');a.matchString(g[1])||a.error(("Expected closing delimiter '"+g[1]+"'"));d=[];do {(e=fO(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(!e.r==='partial'&&a.error(("Expected "+g[0]+"/partial"+g[1])),f=!0):(e=a.read(hG),e||a.error(("Expected "+g[0]+"/partial"+g[1])),d.push(e))}while(!f);return{t:ee,n:c,f:d}}function hw(a){var b=[],c=V(null),d=!1,e=a.preserveWhitespace;while(a.pos<a.str.length){var f=a.pos,g,h;(h=a.read(hH))?(c[h.n]&&(a.pos=f,a.error('Duplicated partial definition')),gE(h.f,a.stripComments,e,!e,!e),c[h.n]=h.f,d=!0):(g=a.read(hG))?b.push(g):a.error('Unexpected template content')}var i={v:dI,t:b};d&&(i.p=c);return i}function hx(a,b){Object.keys(a).forEach(function(c){if(hy(c,a))return hz(a,b);var d=a[c];hA(d)&&hx(d,b)})}function hy(a,b){return a==='s'&&aa(b.r)}function hz(a,b){var c=a.s,d=a.r;b[c]||(b[c]=dK(c,d.length))}function hA(a){return aa(a)||ad(a)}var hB=[fI,fD,fX,fN,fL,fJ],hC=[fC],hD=[fD,fX,fL],hE;function hF(a,b){return new hE( a, b||{} ).result}hF.computedStrings=function(a){if(!a)return[];Object.keys(a).forEach(function(b){var c=a[b];typeof c==='string'&&(a[b]=dL(c))})};var hG=[eK,gc,hn,hp],hH=[ht,hv];hE=dS.extend({init:function(a,b){var c=b.tripleDelimiters||['{{{','}}}'],d=b.staticDelimiters||['[[',']]'],e=b.staticTripleDelimiters||['[[[',']]]'];this.standardDelimiters=b.delimiters||['{{','}}'];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:hB},{isStatic:!1,isTriple:!0,open:c[0],close:c[1],readers:hC},{isStatic:!0,isTriple:!1,open:d[0],close:d[1],readers:hD},{isStatic:!0,isTriple:!0,open:e[0],close:e[1],readers:hC}];this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!b.interpolate||b.interpolate.script!==!1,style:!b.interpolate||b.interpolate.style!==!1,textarea:!0};b.sanitize===!0&&(b.sanitize={elements:'applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title'.split(' '),eventAttributes:!0});this.stripComments=b.stripComments!==!1;this.preserveWhitespace=b.preserveWhitespace;this.sanitizeElements=b.sanitize&&b.sanitize.elements;this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes;this.includeLinePositions=b.includeLinePositions;this.textOnlyMode=b.textOnlyMode;this.csp=b.csp},postProcess:function(a){if(!a.length){return{t:[],v:dI}}this.sectionDepth>0&&this.error('A section was left open');gE(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);if(this.csp!==!1){var b={};hx(a[0].t,b);Object.keys(b).length&&(a[0].e=b)}return a[0]},converters:[hw],sortMustacheTags:function(){this.tags.sort(function(a,b){return b.open.length-a.open.length})}});var hI=['delimiters','tripleDelimiters','staticDelimiters','staticTripleDelimiters','csp','interpolate','preserveWhitespace','sanitize','stripComments'],hJ="Either preparse or use a ractive runtime source that includes the parser. ",hK="Either use:\n\n\tRactive.parse.computedStrings( component.computed )\n\nat build time to pre-convert the strings to functions, or use functions instead of strings in computed properties.";function hL(a,b,c){a||am(("Missing Ractive.parse - cannot parse "+b+". "+c))}function hM(a,b){hL(dK,'new expression function',hJ);return dK(a,b)}function hN(a,b){hL(dL,'compution string "${str}"',hK);return dL(a,b)}var hO={fromId:function(a,b){if(!l){if(b&&b.noThrow){return}throw new Error( ("Cannot retrieve template #"+a+" as Ractive is not running in a browser.") )}a&&(a=a.replace(/^#/,''));var c;if(!(c=l.getElementById(a))){if(b&&b.noThrow){return}throw new Error( ("Could not find template element with id #"+a) )}if(c.tagName.toUpperCase()!=='SCRIPT'){if(b&&b.noThrow){return}throw new Error( ("Template element with id #"+a+", must be a <script> element") )}return 'textContent' in c?c.textContent:c.innerHTML},isParsed:function(a){return!(typeof a==='string')},getParseOptions:function(a){a.defaults&&(a=a.defaults);return hI.reduce(function(b,c){b[c]=a[c];return b},{})},parse:function(a,b){hL(hF,'template',hJ);var c=hF(a,b);dO(c);return c},parseFor:function(a,b){return this.parse(a,this.getParseOptions(b))}},hP={name:'template',extend:function(a,b,c){if('template' in c){var d=c.template;typeof d==='function'?(b.template=d):(b.template=hS(d,b))}},init:function(a,b,c){var d='template' in c?c.template:a.prototype.template;d=d||{v:dI,t:[]};if(typeof d==='function'){var e=d;d=hR(b,e);b._config.template={fn:e,result:d}}d=hS(d,b);b.template=d.t;d.p&&hV(b.partials,d.p)},reset:function(a){var b=hQ(a);if(b){var c=hS(b,a);a.template=c.t;hV(a.partials,c.p,!0);return !0}}};function hQ(a){var b=a._config.template;if(!b||!b.fn){return}var c=hR(a,b.fn);if(c!==b.result){b.result=c;return c}}function hR(a,b){return b.call(a,{fromId:hO.fromId,isParsed:hO.isParsed,parse:function(b,c){c===void 0&&(c=hO.getParseOptions(a));return hO.parse(b,c)}})}function hS(a,b){typeof a==='string'?(a=hT(a,b)):(hU(a),dO(a));return a}function hT(a,b){a[0]==='#'&&(a=hO.fromId(a));return hO.parseFor(a,b)}function hU(a){if(a==undefined){throw new Error( ("The template cannot be "+a+".") )}else if(typeof a.v!=='number'){throw new Error( 'The template parser was passed a non-string template, but the template doesn\'t have a version.  Make sure you\'re passing in the template you think you are.' )}else if(a.v!==dI){throw new Error( ("Mismatched template version (expected "+dI+", got "+a.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app") )}}function hV(a,b,c){if(!b)return;for(var d in b){(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}}var hW=['adaptors','components','computed','decorators','easing','events','interpolators','partials','transitions'],hX=function c(a,b){this.name=a;this.useDefaults=b};hX.prototype.extend=function d(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)};hX.prototype.init=function a(){};hX.prototype.configure=function d(a,b,c){var e=this.name,f=c[e],g=V(a[e]);for(var h in f)g[h]=f[h];b[e]=g};hX.prototype.reset=function b(a){var c=a[this.name],d=!1;Object.keys(c).forEach(function(a){var b=c[a];b._fn&&(b._fn.isOwner?(c[a]=b._fn):delete c[a],d=!0)});return d};var hY=hW.map(function(a){return new hX( a, a==='computed' )});function hZ(a,b,c){if(!/_super/.test(c))return c;function d(){var a=h_(d._parent,b),e='_super' in this,f=this._super;this._super=a;var g=c.apply(this,arguments);e?(this._super=f):delete this._super;return g}d._parent=a;d._method=c;return d}function h_(a,b){if(b in a){var c=a[b];return typeof c==='function'?c:function(){return c}}return ae}function h$(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":'')}function ia(a,b,c){if(b in a){if(!(c in a))aq(h$(b,c)),a[c]=a[b];else{throw new Error( h$(b,c,!0) )}}}function ib(a){ia(a,'beforeInit','onconstruct');ia(a,'init','onrender');ia(a,'complete','oncomplete');ia(a,'eventDefinitions','events');aa(a.adaptors)&&ia(a,'adaptors','adapt')}var ic={adapt:dn,css:dB,data:dE,template:hP},ie=Object.keys(g),ig=im(ie.filter(function(a){return!ic[a]})),ih=im(ie.concat(hY.map(function(a){return a.name}))),ii=[].concat(ie.filter(function(a){return!hY[a]&&!ic[a]}),hY,ic.template,ic.css),ij={extend:function(a,b,c){return ik('extend',a,b,c)},init:function(a,b,c){return ik('init',a,b,c)},reset:function(a){return ii.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:ii};function ik(a,b,c,d){ib(d);for(var e in d){if(ig.hasOwnProperty(e)){var f=d[e];e!=='el'&&typeof f==='function'?aq((""+e+" is a Ractive option that does not expect a function and will be ignored"),a==='init'?c:null):(c[e]=f)}}if(d.append&&d.enhance){throw new Error( 'Cannot use append and enhance at the same time' )}hY.forEach(function(e){e[a](b,c,d)});dn[a](b,c,d);hP[a](b,c,d);dB[a](b,c,d);il(b.prototype,c,d)}function il(a,b,c){for(var d in c){if(!ih[d]&&c.hasOwnProperty(d)){var e=c[d];typeof e==='function'&&(e=hZ(a,d,e));b[d]=e}}}function im(a){var b={};a.forEach(function(a){return b[a]=!0});return b}var io=['template','partials','components','decorators','events'],ip=new aM( 'complete' ),iq=new aM( 'reset' ),ir=new aM( 'render' ),is=new aM( 'unrender' );function it(a){a=a||{};if(typeof a!=='object'){throw new Error( 'The reset method takes either no arguments, or an object containing new data' )}a=dE.init(this.constructor,this,{data:a});var b=bi.start(this,!0),c=this.viewmodel.wrapper;c&&c.reset?(c.reset(a)===!1&&this.viewmodel.set(a)):this.viewmodel.set(a);var d=ij.reset(this),e,f=d.length;while(f--){if(io.indexOf(d[f])>-1){e=!0;break}}e&&(is.fire(this),this.fragment.resetTemplate(this.template),ir.fire(this),ip.fire(this));bi.end();iq.fire(this,a);return b}function iu(a,b,c){a.forEach(function(a){if(a.type===d_&&(a.refName===b||a.name===b)){c.push(a);return}if(a.fragment)iu(a.fragment.iterations||a.fragment.items,b,c);else if(aa(a.items))iu(a.items,b,c);else if(a.type===ec&&a.instance){if(a.instance.partials[b])return;iu(a.instance.fragment.items,b,c)}a.type===dZ&&(aa(a.attributes)&&iu(a.attributes,b,c),aa(a.conditionalAttributes)&&iu(a.conditionalAttributes,b,c))})}function iv(a){a.forceResetTemplate()}function iw(a,b){var c=[];iu(this.fragment.items,a,c);var d=bi.start(this,!0);this.partials[a]=b;c.forEach(iv);bi.end();return d}var ix=function b(a){this.parentFragment=a.parentFragment;this.ractive=a.parentFragment.ractive;this.template=a.template;this.index=a.index;this.type=a.template.t;this.dirty=!1};ix.prototype.bubble=function a(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};ix.prototype.find=function a(){return null};ix.prototype.findAll=function a(){};ix.prototype.findComponent=function a(){return null};ix.prototype.findAllComponents=function a(){};ix.prototype.findNextNode=function a(){return this.parentFragment.findNextNode(this)};ix.prototype.valueOf=function a(){return this.toString()};var iy=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function b(a){a&&bT(this);var c=this.parent.get();return c?c[this.key]:undefined};b.prototype.handleChange=function a(){this.dirty=!0;this.deps.forEach(bW);this.children.forEach(bW);this.clearUnresolveds()};b.prototype.joinKey=function c(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){var d=new b( this, a );this.children.push(d);this.childByKey[a]=d}return this.childByKey[a]};return b}(cv);function iz(a){return a?a.get(!0):undefined}var iA=function(a){function b(b,c){var d=this;a.call(this,b.ractive.viewmodel,null);this.fragment=b;this.template=c;this.isReadonly=!0;this.fn=dN(c.s,c.r.length);this.computation=null;this.resolvers=[];this.models=this.template.r.map(function(a,b){var c=cy(d.fragment,a),e;c||(e=d.fragment.resolve(a,function(a){aS(d.resolvers,e);d.models[b]=a;d.bubble()}),d.resolvers.push(e));return c});this.bubble()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function a(){var b=this,c=this.fragment.ractive,d='@'+this.template.s.replace(/_(\d+)/g,function(a,c){if(c>=b.models.length)return a;var d=b.models[c];return d?d.getKeypath():'@undefined'}),e={getter:function(){var a=b.models.map(iz);return b.fn.apply(c,a)},getterString:d},f=c.viewmodel.compute(d,e);this.value=f.get();this.computation&&this.computation.unregister(this);this.computation=f;f.register(this);this.handleChange()};b.prototype.get=function b(a){return this.computation.get(a)};b.prototype.getKeypath=function a(){return this.computation?this.computation.getKeypath():'@undefined'};b.prototype.handleChange=function a(){this.deps.forEach(bW);this.children.forEach(bW);this.clearUnresolveds()};b.prototype.joinKey=function b(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){var c=new iy( this, a );this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]};b.prototype.mark=function a(){this.handleChange()};b.prototype.retrieve=function a(){return this.get()};b.prototype.teardown=function b(){this.unbind();this.fragment=undefined;this.computation&&this.computation.teardown();this.computation=undefined;a.prototype.teardown.call(this)};b.prototype.unregister=function c(b){a.prototype.unregister.call(this,b);this.deps.length||this.teardown()};b.prototype.unbind=function a(){var b=this;this.resolvers.forEach(b$);var c=this.models.length;while(c--){b.models[c]&&b.models[c].unregister(b)}};return b}(cv),iB=function(a){function b(b,c){a.call(this,b,c)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.applyValue=function b(a){if(ab(a,this.value))return;var c=this.parent,d=[this.key];while(c){if(c.base){var e=c.model.joinAll(d);e.applyValue(a);break}d.unshift(c.key);c=c.parent}};b.prototype.joinKey=function c(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){var d=new b( this, a );this.children.push(d);this.childByKey[a]=d}return this.childByKey[a]};return b}(cv),iC=function(a){function b(b,c){var d=this;a.call(this,null,null);this.root=b.ractive.viewmodel;this.resolvers=[];this.base=iD(b,c);var e;this.base||(e=b.resolve(c.r,function(a){d.base=a;d.bubble();aS(d.resolvers,e)}),this.resolvers.push(e));var f={handleChange:function(){return d.bubble()}};this.members=c.m.map(function(a,c){if(typeof a==='string'){return{get:function(){return a}}}var e,g;if(a.t===ep){e=cy(b,a.n);e?e.register(f):(g=b.resolve(a.n,function(a){d.members[c]=a;a.register(f);d.bubble();aS(d.resolvers,g)}),d.resolvers.push(g));return e}e=new iA( b, a );e.register(f);return e});this.isUnresolved=!0;this.bubble()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function a(){var b=this;if(!this.base)return;var c=this.members.length;while(c--){if(!b.members[c])return}this.isUnresolved=!1;var d=this.members.map(function(a){return aE(String(a.get()))}),e=this.base.joinAll(d);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this));this.model=e;this.parent=e.parent;e.register(this);e.registerTwowayBinding(this);this.keypathModel&&this.keypathModel.handleChange();this.mark()};b.prototype.forceResolution=function a(){this.resolvers.forEach(function(a){return a.forceResolution()});this.bubble()};b.prototype.get=function a(){return this.model?this.model.get():undefined};b.prototype.getValue=function a(){var b=this,c=this.bindings.length;while(c--){var d=b.bindings[c].getValue();if(d!==b.value)return d}return this.value};b.prototype.getKeypath=function a(){return this.model?this.model.getKeypath():'@undefined'};b.prototype.handleChange=function a(){this.mark()};b.prototype.joinKey=function b(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){var c=new iB( this, a );this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]};b.prototype.retrieve=function a(){return this.get()};b.prototype.set=function b(a){if(!this.model)throw new Error( 'Unresolved reference expression. This should not happen!' );this.model.set(a)};b.prototype.unbind=function a(){this.resolvers.forEach(b$)};return b}(cv);function iD(a,b){if(b.r){return cy(a,b.r)}else if(b.x){return new iA( a, b.x )}else{return new iC( a, b.rx )}}function iE(a){if(a.template.z){a.aliases={};var b=a.template.z;for(var c=0;c<b.length;c++)a.aliases[b[c].n]=iD(a.parentFragment,b[c].x)}}var iF=function(a){function b(b){a.call(this,b);this.fragment=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){iE(this);this.fragment=new mh({owner:this,template:this.template.f}).bind()};b.prototype.detach=function a(){return this.fragment?this.fragment.detach():R()};b.prototype.find=function b(a){if(this.fragment){return this.fragment.find(a)}};b.prototype.findAll=function c(a,b){this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function b(a){if(this.fragment){return this.fragment.findComponent(a)}};b.prototype.findAllComponents=function c(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function b(a){return this.fragment&&this.fragment.firstNode(a)};b.prototype.rebind=function a(){iE(this);this.fragment&&this.fragment.rebind()};b.prototype.render=function b(a){this.rendered=!0;this.fragment&&this.fragment.render(a)};b.prototype.toString=function b(a){return this.fragment?this.fragment.toString(a):''};b.prototype.unbind=function a(){this.aliases={};this.fragment&&this.fragment.unbind()};b.prototype.unrender=function b(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};b.prototype.update=function a(){this.dirty&&(this.dirty=!1,this.fragment.update())};return b}(ix);function iG(a,b,c,d){var e=a.__model;d&&e.shuffle(d)}var iH=['pop','push','reverse','shift','sort','splice','unshift'],iI=[];iH.forEach(function(a){var b=function(){var b=this,c=[],d=arguments.length;while(d--)c[d]=arguments[d];var e=cX(this.length,a,c),f=Array.prototype[a].apply(this,arguments);bi.start();this._ractive.setting=!0;var g=this._ractive.wrappers.length;while(g--)iG(b._ractive.wrappers[g],b,a,e);bi.end();this._ractive.setting=!1;return f};W(iI,a,{value:b})});var iJ,iK;({}).__proto__?(iJ=function(a){return a.__proto__=iI},iK=function(a){return a.__proto__=Array.prototype}):(iJ=function(a){var b=iH.length;while(b--){var c=iH[b];W(a,c,{value:iI[c],configurable:!0})}},iK=function(a){var b=iH.length;while(b--)delete a[iH[b]]});iJ.unpatch=iK;var iL=iJ,iM='Something went wrong in a rather interesting way',iN={filter:function(a){return aa(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new iO( a, b, c )}},iO=function c(a,b){this.root=a;this.value=b;this.__model=null;b._ractive||(W(b,'_ractive',{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),iL(b));b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a));b._ractive.instances[a._guid]+=1;b._ractive.wrappers.push(this)};iO.prototype.get=function a(){return this.value};iO.prototype.reset=function b(a){return this.value===a};iO.prototype.teardown=function a(){var b,c,d,e,f;b=this.value;c=b._ractive;d=c.wrappers;e=c.instances;if(c.setting){return !1}f=d.indexOf(this);if(f===-1){throw new Error( iM )}d.splice(f,1);if(!d.length)delete b._ractive,iL.unpatch(this.value);else{e[this.root._guid]-=1;if(!e[this.root._guid]){f=e.indexOf(this.root);if(f===-1){throw new Error( iM )}e.splice(f,1)}}};var iP;try{Object.defineProperty({},'test',{get:function(){},set:function(){}}),iP={filter:function(a){return a&&typeof a==='object'},wrap:function(a,b,c){return new iT( a, b, c )}}}catch(a){iP=!1};var iQ=iP;function iR(a,b,c){if(a.set&&a.set.__magic){a.set.__magic.dependants.push({ractive:b,keypath:c});return a}var d,e=[{ractive:b,keypath:c}],f={get:function(){return'value' in a?a.value:a.get()},set:function(b){if(d)return;'value' in a?(a.value=b):a.set(b);d=!0;e.forEach(function(a){var c=a.ractive,d=a.keypath;c.set(d,b)});d=!1},enumerable:!0};f.set.__magic={dependants:e,originalDescriptor:a};return f}function iS(a,b,c){if(!a.set||!a.set.__magic)return !0;var d=a.set.__magic,e=d.length;while(e--){var f=d[e];if(f.ractive===b&&f.keypath===c){d.splice(e,1);return !1}}}var iT=function d(a,b,c){var e=this;this.ractive=a;this.value=b;this.keypath=c;this.originalDescriptors={};Object.keys(b).forEach(function(b){var d=Object.getOwnPropertyDescriptor(e.value,b);e.originalDescriptors[b]=d;var f=c?""+c+"."+aE(b):aE(b),g=iR(d,a,f);Object.defineProperty(e.value,b,g)})};iT.prototype.get=function a(){return this.value};iT.prototype.reset=function b(a){return this.value===a};iT.prototype.set=function c(a,b){this.value[a]=b};iT.prototype.teardown=function a(){var b=this;Object.keys(this.value).forEach(function(a){var c=Object.getOwnPropertyDescriptor(b.value,a);if(!c.set||!c.set.__magic)return;iS(c);c.set.__magic.dependants.length===1&&Object.defineProperty(b.value,a,c.set.__magic.originalDescriptor)})};var iU=function d(a,b,c){this.value=b;this.magic=!0;this.magicWrapper=iQ.wrap(a,b,c);this.arrayWrapper=iN.wrap(a,b,c);Object.defineProperty(this,'__model',{get:function(){return this.arrayWrapper.__model},set:function(a){this.arrayWrapper.__model=a}})};iU.prototype.get=function a(){return this.value};iU.prototype.teardown=function a(){this.arrayWrapper.teardown();this.magicWrapper.teardown()};iU.prototype.reset=function b(a){return this.arrayWrapper.reset(a)&&this.magicWrapper.reset(a)};var iV={filter:function(a,b,c){return iQ.filter(a,b,c)&&iN.filter(a)},wrap:function(a,b,c){return new iU( a, b, c )}};function iW(a){var b=a.replace(/^\t+/gm,function(a){return a.split('\t').join('  ')}).split('\n'),c=b.length<2?0:b.slice(1).reduce(function(a,b){return Math.min(a,/^\s*/.exec(b)[0].length)},Infinity);return b.map(function(a,b){return'    '+(b?a.substring(c):a)}).join('\n')}function iX(a){if(!a)return'';var b=a.split('\n'),c=iY.name+'.getValue',d=[],e=b.length;for(var f=1;f<e;f+=1){var g=b[f];if(~g.indexOf(c)){return d.join('\n')}else d.push(g)}}var iY=function(a){function b(b,c,d){a.call(this,null,null);this.root=this.parent=b;this.signature=c;this.key=d;this.isExpression=d&&d[0]==='@';this.isReadonly=!this.signature.setter;this.context=b.computationContext;this.dependencies=[];this.children=[];this.childByKey={};this.deps=[];this.boundsSensitive=!0;this.dirty=!0;this.shuffle=undefined}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function b(a){a&&bT(this);this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.adapt());return this.value};b.prototype.getValue=function a(){bR();var b;try{b=this.signature.getter.call(this.context)}catch(a){aq(("Failed to compute "+this.getKeypath()+": "+(a.message||a)));if(u){console.groupCollapsed&&console.groupCollapsed('%cshow details','color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;');var c=iW(this.signature.getterString),d=this.signature.getterUseStack?'\n\n'+iX(a.stack):'';console.error((""+a.name+": "+a.message+"\n\n"+c+""+d));console.groupCollapsed&&console.groupEnd()}};var e=bS();this.setDependencies(e);return b};b.prototype.handleChange=function a(){this.dirty=!0;this.deps.forEach(bW);this.children.forEach(bW);this.clearUnresolveds()};b.prototype.joinKey=function b(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){var c=new iy( this, a );this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]};b.prototype.mark=function a(){this.handleChange()};b.prototype.set=function b(a){if(!this.signature.setter){throw new Error( ("Cannot set read-only computed value '"+this.key+"'") )}this.signature.setter(a)};b.prototype.setDependencies=function b(a){var c=this,d=this.dependencies.length;while(d--){var e=c.dependencies[d];~a.indexOf(e)||e.unregister(c)}d=a.length;while(d--){var f=a[d];~c.dependencies.indexOf(f)||f.register(c)}this.dependencies=a};b.prototype.teardown=function b(){var c=this,d=this.dependencies.length;while(d--){c.dependencies[d]&&c.dependencies[d].unregister(c)}this.root.computations[this.key]===this&&delete this.root.computations[this.key];a.prototype.teardown.call(this)};return b}(cv),iZ=function(a){function b(b){a.call(this,null,'');this.value=b;this.isRoot=!0;this.root=this;this.adaptors=[];this.ractive=b;this.changes={}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getKeypath=function a(){return'@ractive'};return b}(cv),i_=Object.prototype.hasOwnProperty,i$=function(a){function b(b){a.call(this,null,null);this.changes={};this.isRoot=!0;this.root=this;this.ractive=b.ractive;this.value=b.data;this.adaptors=b.adapt;this.adapt();this.mappings={};this.computationContext=b.ractive;this.computations={}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.applyChanges=function a(){this._changeHash={};this.flush();return this._changeHash};b.prototype.compute=function c(a,b){var d=new iY( this, b, a );this.computations[a]=d;return d};b.prototype.extendChildren=function b(a){var c=this.mappings;Object.keys(c).forEach(function(b){a(b,c[b])});var d=this.computations;Object.keys(d).forEach(function(b){var c=d[b];c.isExpression||a(b,c)})};b.prototype.get=function b(a){a&&bT(this);var c=Y({},this.value);this.extendChildren(function(a,b){c[a]=b.value});return c};b.prototype.getKeypath=function a(){return''};b.prototype.getRactiveModel=function a(){return this.ractiveModel||(this.ractiveModel=new iZ( this.ractive ))};b.prototype.getValueChildren=function b(){var c=a.prototype.getValueChildren.call(this,this.value);this.extendChildren(function(a,b){c.push(b)});return c};b.prototype.handleChange=function a(){this.deps.forEach(bW)};b.prototype.has=function b(a){if(a in this.mappings||a in this.computations)return !0;var c=this.value;a=aH(a);if(i_.call(c,a))return !0;var d=c.constructor;while(d!==Function&&d!==Array&&d!==Object){if(i_.call(d.prototype,a))return !0;d=d.constructor}return !1};b.prototype.joinKey=function c(b){if(b==='@global')return cx;if(b==='@ractive')return this.getRactiveModel();return this.mappings.hasOwnProperty(b)?this.mappings[b]:this.computations.hasOwnProperty(b)?this.computations[b]:a.prototype.joinKey.call(this,b)};b.prototype.map=function c(a,b){this.mappings[a]=b;b.register(this)};b.prototype.set=function b(a){var c=this.wrapper;if(c){var d=!c.reset||c.reset(a)===!1;d&&(c.teardown(),this.wrapper=null,this.value=a,this.adapt())}else this.value=a,this.adapt();this.deps.forEach(bW);this.children.forEach(bX);this.clearUnresolveds()};b.prototype.retrieve=function a(){return this.value};b.prototype.teardown=function b(){var c=this,d=Object.keys(this.mappings),e=d.length;while(e--){c.mappings[d[e]]&&c.mappings[d[e]].unregister(c)}a.prototype.teardown.call(this)};b.prototype.update=function a(){};b.prototype.updateFromBindings=function c(b){var d=this;a.prototype.updateFromBindings.call(this,b);b&&Object.keys(this.mappings).forEach(function(a){var c=d.mappings[a];c.updateFromBindings(b)})};return b}(cv);function ja(a,b,c){var d,e,f,g,h;typeof c==='function'&&(d=dC(c,a),f=c.toString(),g=!0);typeof c==='string'&&(d=hN(c,a),f=c);typeof c==='object'&&(typeof c.get==='string'?(d=hN(c.get,a),f=c.get):typeof c.get==='function'?(d=dC(c.get,a),f=c.get.toString(),g=!0):am('`%s` computation must have a `get()` method',b),typeof c.set==='function'&&(e=dC(c.set,a),h=c.set.toString()));return{getter:d,setter:e,getterString:f,setterString:h,getterUseStack:g}}var jb=new aM( 'construct' ),jc=['adaptors','components','decorators','easing','events','interpolators','partials','transitions'],jd=0;function je(a,b){mQ.DEBUG&&ai();jh(a);W(a,'data',{get:ji});jb.fire(a,b);jc.forEach(function(c){a[c]=Y(V(a.constructor[c]||null),b[c])});var c=new i$({adapt:jg(a,a.adapt,b),data:dE.init(a.constructor,a,b),ractive:a});a.viewmodel=c;var d=Y(V(a.constructor.prototype.computed),b.computed);for(var e in d){var f=ja(a,e,d[e]);c.compute(e,f)}}function jf(a,b){var c=a.slice(),d=b.length;while(d--){~c.indexOf(b[d])||c.push(b[d])}return c}function jg(a,b,c){b=b.map(g);var d=aQ(c.adapt).map(g);d=jf(b,d);var e='magic' in c?c.magic:a.magic,f='modifyArrays' in c?c.modifyArrays:a.modifyArrays;if(e){if(!w){throw new Error( 'Getters and setters (magic mode) are not supported in this browser' )}f&&d.push(iV);d.push(iQ)}f&&d.push(iN);return d;function g(b){typeof b==='string'&&(b=av('adaptors',a,b),b||am(au(b,'adaptor')));return b}}function jh(a){a._guid='r-'+jd++;a._subs=V(null);a._config={};a.nodes={};a.event=null;a._eventQueue=[];a._liveQueries=[];a._liveComponentQueries=[];a._observers=[];a._links={};a.component||(a.root=a,a.parent=a.container=null)}function ji(){throw new Error( 'Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead' )}function jj(a,b){return a[b._guid]||(a[b._guid]=[])}function jk(a,b){var c=jj(a.queue,b);a.hook.fire(b);while(c.length)jk(a,c.shift());delete a.queue[b._guid]}var jl=function b(a){this.hook=new aM( a );this.inProcess={};this.queue={}};jl.prototype.begin=function b(a){this.inProcess[a._guid]=!0};jl.prototype.end=function b(a){var c=a.parent;!c||!this.inProcess[c._guid]?jk(this,a):jj(this.queue,c).push(a);delete this.inProcess[a._guid]};var jm=new aM( 'config' ),jn=new jl( 'init' );function jo(a,b,c){Object.keys(a.viewmodel.computations).forEach(function(b){var c=a.viewmodel.computations[b];a.viewmodel.value.hasOwnProperty(b)&&c.set(a.viewmodel.value[b])});ij.init(a.constructor,a,b);jm.fire(a);jn.begin(a);var d;if(a.template){var e;(c.cssIds||a.cssId)&&(e=c.cssIds?c.cssIds.slice():[],a.cssId&&e.push(a.cssId));a.fragment=d=new mh({owner:a,template:a.template,cssIds:e}).bind(a.viewmodel)}jn.end(a);if(d){var f=S(a.el);if(f){var g=a.render(f,a.append);mQ.DEBUG_PROMISES&&g['catch'](function(b){ar('Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;');aq('An error happened during rendering',{ractive:a});an(b);throw b})}}}function jp(a){var b={},c={};while(a){if(a.parent&&(a.parent.indexRef||a.parent.keyRef)){var d=a.parent.indexRef;d&&!(d in c)&&(c[d]=a.index);d=a.parent.keyRef;d&&!(d in b)&&(b[d]=a.key)}a.componentParent&&!a.ractive.isolated?(a=a.componentParent):(a=a.parent)}return{key:b,index:c}}var jq=/^event(?:\.(.+))?$/,jr=/^arguments\.(\d*)$/,js=/^\$(\d*)$/,jt=function d(a,b,c){this.owner=a;this.event=b;this.template=c;this.ractive=a.parentFragment.ractive;this.parentFragment=a.parentFragment;this.context=null;this.passthru=!1;this.method=null;this.resolvers=null;this.models=null;this.argsFn=null;this.action=null;this.args=null};jt.prototype.bind=function a(){var b=this;this.context=this.parentFragment.findContext();var c=this.template;c.m?(this.method=c.m,this.passthru=!!c.g,c.a&&(this.resolvers=[],this.models=c.a.r.map(function(a,c){if(jq.test(a)){return{event:!0,keys:a.length>5?aG(a.slice(6)):[],unbind:ae}}var d=jr.exec(a);if(d){return{argument:!0,index:d[1]}}var e=js.exec(a);if(e){return{argument:!0,index:e[1]-1}}var f,g=cy(b.parentFragment,a);g||(f=b.parentFragment.resolve(a,function(a){b.models[c]=a;aS(b.resolvers,f)}),b.resolvers.push(f));return g}),this.argsFn=dN(c.a.s,c.a.r.length))):(this.action=typeof c==='string'?c:typeof c.n==='string'?c.n:new mh({owner:this,template:c.n}),this.args=c.a?(typeof c.a==='string'?[c.a]:c.a):c.d?new mh({owner:this,template:c.d}):[]);this.template.n&&typeof this.template.n!=='string'&&this.action.bind();this.template.d&&this.args.bind()};jt.prototype.bubble=function a(){this.dirty||(this.dirty=!0,this.owner.bubble())};jt.prototype.fire=function c(a,b){b===void 0&&(b=[]);if(a){var d=jp(this.parentFragment);a.keypath=this.context.getKeypath(this.ractive);a.rootpath=this.context.getKeypath();a.context=this.context.get();a.index=d.index;a.key=d.key}if(this.method){if(typeof this.ractive[this.method]!=='function'){throw new Error( ("Attempted to call a non-existent method (\""+this.method+"\")") )}var e;a&&b.unshift(a);if(this.models){var f=this.models.map(function(c){if(!c)return undefined;if(c.event){var d=a,e=c.keys.slice();while(e.length)d=d[e.shift()];return d}if(c.argument){return b?b[c.index]:void 0}if(c.wrapper){return c.wrapper.value}return c.get()});e=this.argsFn.apply(null,f)}this.passthru&&(e=e?e.concat(b):b);var g=this.ractive,h=g.event;g.event=a;var i=g[this.method].apply(g,e),j;i===!1&&(j=a.original)&&(j.preventDefault&&j.preventDefault(),j.stopPropagation&&j.stopPropagation());g.event=h}else{var k=this.action.toString(),l=this.template.d?this.args.getArgsList():this.args;b.length&&(l=l.concat(b));a&&(a.name=k);bI(this.ractive,k,{event:a,args:l})}};jt.prototype.rebind=function a(){this.unbind();this.bind()};jt.prototype.render=function a(){this.event.listen(this)};jt.prototype.unbind=function a(){var b=this.template;b.m?(this.resolvers&&this.resolvers.forEach(b$),this.resolvers=[],this.models=null):(this.action.unbind&&this.action.unbind(),this.args.unbind&&this.args.unbind())};jt.prototype.unrender=function a(){this.event.unlisten()};jt.prototype.update=function a(){if(this.method||!this.dirty)return;this.dirty=!1;this.action.update&&this.action.update();this.template.d&&this.args.update()};var ju=function c(a,b){this.ractive=a;this.name=b;this.handler=null};ju.prototype.listen=function b(a){var c=this.ractive;this.handler=c.on(this.name,function(){var b;arguments.length&&arguments[0]&&arguments[0].node&&(b=Array.prototype.shift.call(arguments),b.component=c);var d=Array.prototype.slice.call(arguments);a.fire(b,d);return !1})};ju.prototype.unlisten=function a(){this.handler.cancel()};function jv(a){var b=a.ractive;do {var c=b._liveComponentQueries,d=c.length;while(d--){var e=c[d],f=c[("_"+e)];f.test(a)&&(f.add(a.instance),a.liveQueries.push(f))}}while(b=b.parent)}function jw(a){var b=a.ractive;while(b){var c=b._liveComponentQueries[("_"+a.name)];c&&c.remove(a);b=b.parent}}function jx(a){a.makeDirty()}var jy=new aM( 'teardown' ),jz=function(a){function b(b,c){a.call(this,b);this.type=ec;var d=V(c.prototype);this.instance=d;this.name=b.template.e;this.parentFragment=b.parentFragment;this.complexMappings=[];this.liveQueries=[];d.el&&aq(("The <"+this.name+"> component has a default 'el' property; it has been disregarded"));var e=b.template.p||{};('content' in e)||(e.content=b.template.f||[]);this._partials=e;this.yielders={};var f=b.parentFragment,g;while(f){if(f.owner.type===ed){g=f.owner.container;break}f=f.parent}d.parent=this.parentFragment.ractive;d.container=g||null;d.root=d.parent.root;d.component=this;je(this.instance,{partials:e});d._inlinePartials=e;this.eventHandlers=[];this.template.v&&this.setupEvents()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){var b=this,c=this.instance.viewmodel,d=c.value;this.template.a&&Object.keys(this.template.a).forEach(function(a){var e=b.template.a[a],f,g;if(e===0)c.joinKey(a).set(!0);else if(typeof e==='string'){var h=g$(e);c.joinKey(a).set(h?h.value:e)}else aa(e)&&(e.length===1&&e[0].t===dU?(f=iD(b.parentFragment,e[0]),f||(ar(("The "+a+"='{{"+e[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity"),{ractive:b.instance}),b.parentFragment.ractive.get(a),f=b.parentFragment.findContext().joinKey(a)),c.map(a,f),f.get()===undefined&&a in d&&f.set(d[a])):(g=new mh({owner:b,template:e}).bind(),f=c.joinKey(a),f.set(g.valueOf()),g.bubble=function(){mh.prototype.bubble.call(g);g.update();f.set(g.valueOf())},b.complexMappings.push(g)))});jo(this.instance,{partials:this._partials},{cssIds:this.parentFragment.cssIds});this.eventHandlers.forEach(bU)};b.prototype.bubble=function a(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};b.prototype.checkYielders=function a(){var b=this;Object.keys(this.yielders).forEach(function(a){if(b.yielders[a].length>1){bi.end();throw new Error( ("A component template can only have one {{yield"+(a?' '+a:'')+"}} declaration at a time") )}})};b.prototype.detach=function a(){return this.instance.fragment.detach()};b.prototype.find=function b(a){return this.instance.fragment.find(a)};b.prototype.findAll=function c(a,b){this.instance.fragment.findAll(a,b)};b.prototype.findComponent=function b(a){if(!a||this.name===a)return this.instance;if(this.instance.fragment){return this.instance.fragment.findComponent(a)}};b.prototype.findAllComponents=function c(a,b){b.test(this)&&(b.add(this.instance),b.live&&this.liveQueries.push(b));this.instance.fragment.findAllComponents(a,b)};b.prototype.firstNode=function b(a){return this.instance.fragment.firstNode(a)};b.prototype.rebind=function a(){var b=this;this.complexMappings.forEach(bZ);this.liveQueries.forEach(jx);var c=this.instance.viewmodel;c.mappings={};this.template.a&&Object.keys(this.template.a).forEach(function(a){var d=b.template.a[a],e;aa(d)&&d.length===1&&d[0].t===dU&&(e=iD(b.parentFragment,d[0]),e||(ar(("The "+a+"='{{"+d[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity"),{ractive:b.instance}),b.parentFragment.ractive.get(a),e=b.parentFragment.findContext().joinKey(a)),c.map(a,e))});this.instance.fragment.rebind(c)};b.prototype.render=function c(a,b){dl(this.instance,a,null,b);this.checkYielders();this.eventHandlers.forEach(bY);jv(this);this.rendered=!0};b.prototype.setupEvents=function a(){var b=this,c=this.eventHandlers;Object.keys(this.template.v).forEach(function(a){var d=a.split('-'),e=b.template.v[a];d.forEach(function(a){var d=new ju( b.instance, a );c.push(new jt( b, d, e ))})})};b.prototype.toString=function a(){return this.instance.toHTML()};b.prototype.unbind=function a(){this.complexMappings.forEach(b$);var b=this.instance;b.viewmodel.teardown();b.fragment.unbind();b._observers.forEach(bV);jw(this);b.fragment.rendered&&b.el.__ractive_instances__&&aS(b.el.__ractive_instances__,b);Object.keys(b._links).forEach(function(a){return b._links[a].unlink()});jy.fire(b)};b.prototype.unrender=function b(a){var c=this;this.shouldDestroy=a;this.instance.unrender();this.eventHandlers.forEach(ca);this.liveQueries.forEach(function(a){return a.remove(c.instance)})};b.prototype.update=function a(){this.dirty=!1;this.instance.fragment.update();this.checkYielders();this.eventHandlers.forEach(cc);this.complexMappings.forEach(cc)};return b}(ix),jA=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){};b.prototype.render=function a(){};b.prototype.teardown=function a(){};b.prototype.toString=function a(){return'<!DOCTYPE'+this.template.a+'>'};b.prototype.unbind=function a(){};b.prototype.unrender=function a(){};return b}(ix);function jB(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})}var jC=/\s+/,jD={'float':'cssFloat'},jE=/\/\*(?:[\s\S]*?)\*\//g,jF=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\1).)*\2/gi,jG=/\0(\d+)/g;function jH(a){var b=[];if(typeof a!=='string')return{};return a.replace(jF,function(a){return "\u0000"+(b.push(a)-1)}).replace(jE,'').split(';').filter(function(a){return!!a.trim()}).map(function(a){return a.replace(jG,function(a,c){return b[c]})}).reduce(function(a,b){var c=b.indexOf(':'),d=jB(b.substr(0,c).trim());a[jD[d]||d]=b.substr(c+1).trim();return a},{})}function jI(a){var b=a.split(jC),c=b.length;while(c--){b[c]||b.splice(c,1)}return b}var jJ=[undefined,'text','search','url','email','hidden','password','search','reset','submit'];function jK(a){var b=a.element,c=a.name;if(c==='id')return jL;if(c==='value'){if(b.name==='select'&&c==='value'){return b.getAttribute('multiple')?jM:jN}if(b.name==='textarea')return jR;if(b.getAttribute('contenteditable')!=null)return jO;if(b.name==='input'){var d=b.getAttribute('type');if(d==='file')return ae;if(d==='radio'&&b.binding&&b.binding.attribute.name==='name')return jP;if(~jJ.indexOf(d))return jR}return jQ}var e=b.node;if(a.isTwoway&&c==='name'){if(e.type==='radio')return jS;if(e.type==='checkbox')return jT}if(c==='style')return jU;if(c.indexOf('style-')===0)return jW;if(c==='class'&&(!e.namespaceURI||e.namespaceURI===B))return jX;if(c.indexOf('class-')===0)return jY;if(a.isBoolean)return jZ;if(a.namespace&&a.namespace!==a.node.namespaceURI)return j$;return j_}function jL(){var a=this,b=a.node,c=this.getValue();delete this.ractive.nodes[b.id];this.ractive.nodes[c]=b;b.id=c}function jM(){var a=this.getValue();aa(a)||(a=[a]);var b=this.node.options,c=b.length;while(c--){var d=b[c],e=d._ractive?d._ractive.value:d.value;d.selected=aO(a,e)}}function jN(){var a=this.getValue();if(!this.locked){this.node._ractive.value=a;var b=this.node.options,c=b.length;while(c--){var d=b[c],e=d._ractive?d._ractive.value:d.value;if(e==a){d.selected=!0;return}}this.node.selectedIndex=-1}}function jO(){var a=this.getValue();this.locked||(this.node.innerHTML=a===undefined?'':a)}function jP(){var a=this.node,b=a.checked,c=this.getValue();a.value=this.node._ractive.value=c;a.checked=c===this.element.getAttribute('name');b&&!a.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function jQ(){if(!this.locked){var a=this.getValue();this.node.value=this.node._ractive.value=a;this.node.setAttribute('value',a)}}function jR(){if(!this.locked){var a=this.getValue();this.node._ractive.value=a;this.node.value=U(a);this.node.setAttribute('value',U(a))}}function jS(){this.node.checked=this.getValue()==this.node._ractive.value}function jT(){var a=this,b=a.element,c=a.node,d=b.binding,e=this.getValue(),f=b.getAttribute('value');if(!aa(e))d.isChecked=c.checked=e==f;else{var g=e.length;while(g--){if(f==e[g]){d.isChecked=c.checked=!0;return}}d.isChecked=c.checked=!1}}function jU(){var a=jH(this.getValue()||''),b=this.node.style,c=Object.keys(a),d=this.previous||[],e=0;while(e<c.length){c[e] in b&&(b[c[e]]=a[c[e]]),e++}e=d.length;while(e--){!~c.indexOf(d[e])&&d[e] in b&&(b[d[e]]='')}this.previous=c}var jV=/(-.)/g;function jW(){this.styleName||(this.styleName=this.name.substr(6).replace(jV,function(a){return a.charAt(1).toUpperCase()}));this.node.style[this.styleName]=this.getValue()}function jX(){var a=jI(U(this.getValue())),b=jI(this.node.className),c=this.previous||[],d=0;while(d<a.length){~b.indexOf(a[d])||b.push(a[d]),d++}d=c.length;while(d--){if(!~a.indexOf(c[d])){var e=b.indexOf(c[d]);~e&&b.splice(e,1)}}this.node.className=b.join(' ');this.previous=a}function jY(){var a=this.name.substr(6),b=jI(this.node.className),c=this.getValue();c&&!~b.indexOf(a)?b.push(a):!c&&~b.indexOf(a)&&b.splice(b.indexOf(a),1);this.node.className=b.join(' ')}function jZ(){this.locked||(this.useProperty?(this.node[this.propertyName]=this.getValue()):this.getValue()?this.node.setAttribute(this.propertyName,''):this.node.removeAttribute(this.propertyName))}function j_(){this.node.setAttribute(this.name,U(this.getString()))}function j$(){this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(':')+1),U(this.getString()))}var ka={'accept-charset':'acceptCharset',accesskey:'accessKey',bgcolor:'bgColor','class':'className',codebase:'codeBase',colspan:'colSpan',contenteditable:'contentEditable',datetime:'dateTime',dirname:'dirName','for':'htmlFor','http-equiv':'httpEquiv',ismap:'isMap',maxlength:'maxLength',novalidate:'noValidate',pubdate:'pubDate',readonly:'readOnly',rowspan:'rowSpan',tabindex:'tabIndex',usemap:'useMap'};function kb(a,b){var c="xmlns:"+b;while(a){if(a.hasAttribute(c))return a.getAttribute(c);a=a.parentNode}return H[b]}var kc=function(a){function b(b){a.call(this,b);this.name=b.name;this.namespace=null;this.element=b.element;this.parentFragment=b.element.parentFragment;this.ractive=this.parentFragment.ractive;this.rendered=!1;this.updateDelegate=null;this.fragment=null;this.value=null;aa(b.template)?(this.fragment=new mh({owner:this,template:b.template})):(this.value=b.template,this.value===0&&(this.value=''));this.interpolator=this.fragment&&this.fragment.items.length===1&&this.fragment.items[0].type===dU&&this.fragment.items[0]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){this.fragment&&this.fragment.bind()};b.prototype.bubble=function a(){this.dirty||(this.element.bubble(),this.dirty=!0)};b.prototype.getString=function a(){return this.fragment?this.fragment.toString():this.value!=null?''+this.value:''};b.prototype.getValue=function a(){return this.fragment?this.fragment.valueOf():gd.test(this.name)?!0:this.value};b.prototype.rebind=function a(){this.fragment&&this.fragment.rebind()};b.prototype.render=function a(){var b=this.element.node;this.node=b;(!b.namespaceURI||b.namespaceURI===H.html)&&(this.propertyName=ka[this.name]||this.name,b[this.propertyName]!==undefined&&(this.useProperty=!0),(gd.test(this.name)||this.isTwoway)&&(this.isBoolean=!0),this.propertyName==='value'&&(b._ractive.value=this.value));if(b.namespaceURI){var c=this.name.indexOf(':');c!==-1?(this.namespace=kb(b,this.name.slice(0,c))):(this.namespace=b.namespaceURI)}this.rendered=!0;this.updateDelegate=jK(this);this.updateDelegate()};b.prototype.toString=function a(){var b=this.getValue();if(this.name==='value'&&(this.element.getAttribute('contenteditable')!==undefined||(this.element.name==='select'||this.element.name==='textarea'))){return}if(this.name==='name'&&this.element.name==='input'&&this.interpolator&&this.element.getAttribute('type')==='radio'){return "name=\"{{"+this.interpolator.model.getKeypath()+"}}\""}if(gd.test(this.name))return b?this.name:'';if(b==null)return'';var c=U(this.getString()).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');return c?""+this.name+"=\""+c+"\"":this.name};b.prototype.unbind=function a(){this.fragment&&this.fragment.unbind()};b.prototype.update=function a(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate())};return b}(ix),kd=l?I('div'):null,ke=function(b){function c(a){b.call(this,a);this.attributes=[];this.owner=a.owner;this.fragment=new mh({ractive:this.ractive,owner:this,template:[this.template]});this.dirty=!1}c.prototype=Object.create(b&&b.prototype);c.prototype.constructor=c;c.prototype.bind=function a(){this.fragment.bind()};c.prototype.bubble=function a(){this.dirty||(this.dirty=!0,this.owner.bubble())};c.prototype.rebind=function a(){this.fragment.rebind()};c.prototype.render=function a(){this.node=this.owner.node;this.isSvg=this.node.namespaceURI===D;this.rendered=!0;this.dirty=!0;this.update()};c.prototype.toString=function a(){return this.fragment.toString()};c.prototype.unbind=function a(){this.fragment.unbind()};c.prototype.unrender=function a(){this.rendered=!1};c.prototype.update=function b(){var c=this,d,e;this.dirty&&(this.dirty=!1,this.fragment.update(),this.rendered&&(d=this.fragment.toString(),e=kf(d,this.isSvg),this.attributes.filter(function(a){return kg(e,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),e.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=e))};return c}(ix);function kf(a,b){var c=b?'svg':'div';return a?(kd.innerHTML="<"+c+" "+a+"></"+c+">")&&aT(kd.childNodes[0].attributes):[]}function kg(a,b){var c=a.length;while(c--){if(a[c].name===b.name){return !1}}return !0}var kh={update:ae,teardown:ae},ki=function c(a,b){this.owner=a;this.template=b;this.parentFragment=a.parentFragment;this.ractive=a.ractive;this.dynamicName=typeof b.n==='object';this.dynamicArgs=!!b.d;this.dynamicName?(this.nameFragment=new mh({owner:this,template:b.n})):(this.name=b.n||b);this.dynamicArgs?(this.argsFragment=new mh({owner:this,template:b.d})):(this.args=b.a||[]);this.node=null;this.intermediary=null};ki.prototype.bind=function a(){this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString());this.dynamicArgs&&this.argsFragment.bind()};ki.prototype.bubble=function a(){this.dirty||(this.dirty=!0,this.owner.bubble())};ki.prototype.rebind=function a(){this.dynamicName&&this.nameFragment.rebind();this.dynamicArgs&&this.argsFragment.rebind()};ki.prototype.render=function a(){var b=av('decorators',this.ractive,this.name);if(!b){ap(au(this.name,'decorator'));this.intermediary=kh;return}this.node=this.owner.node;var c=this.dynamicArgs?this.argsFragment.getArgsList():this.args;this.intermediary=b.apply(this.ractive,[this.node].concat(c));if(!this.intermediary||!this.intermediary.teardown){throw new Error( ("The '"+this.name+"' decorator must return an object with a teardown method") )}};ki.prototype.unbind=function a(){this.dynamicName&&this.nameFragment.unbind();this.dynamicArgs&&this.argsFragment.unbind()};ki.prototype.unrender=function a(){this.intermediary&&this.intermediary.teardown()};ki.prototype.update=function a(){if(!this.dirty)return;this.dirty=!1;var b=!1;if(this.dynamicName&&this.nameFragment.dirty){var c=this.nameFragment.toString();b=c!==this.name;this.name=c}if(this.intermediary){if(b||!this.intermediary.update)this.unrender(),this.render();else{if(this.dynamicArgs){if(this.argsFragment.dirty){var d=this.argsFragment.getArgsList();this.intermediary.update.apply(this.ractive,d)}}else this.intermediary.update.apply(this.ractive,this.args)}}this.dynamicName&&this.nameFragment.dirty&&this.nameFragment.update();this.dynamicArgs&&this.argsFragment.dirty&&this.argsFragment.update()};var kj=function c(a,b){a.indexOf('*')!==-1&&am(("Only component proxy-events may contain \"*\" wildcards, <"+b.name+" on-"+a+"=\"...\"/> is not valid"));this.name=a;this.owner=b;this.node=null;this.handler=null};kj.prototype.listen=function b(a){var c=this.node=this.owner.node,d=this.name;("on"+d in c)||ap(au(d,'events'));c.addEventListener(d,this.handler=function(b){a.fire({node:c,original:b})},!1)};kj.prototype.unlisten=function a(){this.node.removeEventListener(this.name,this.handler,!1)};var kk=function c(a,b){this.eventPlugin=a;this.owner=b;this.handler=null};kk.prototype.listen=function b(a){var c=this.owner.node;this.handler=this.eventPlugin(c,function(b){b===void 0&&(b={});b.node=b.node||c;a.fire(b)})};kk.prototype.unlisten=function a(){this.handler.teardown()};var kl;if(!p)kl=null;else{var km={},kn=I('div').style;kl=function(a){a=jB(a);if(!km[a]){if(kn[a]!==undefined)km[a]=a;else{var b=a.charAt(0).toUpperCase()+a.substring(1),c=A.length;while(c--){var d=A[c];if(kn[d+b]!==undefined){km[a]=d+b;break}}}}return km[a]}}var ko=kl,kp,kq='hidden';if(l){var kr;if(kq in l)kr='';else{var ks=A.length;while(ks--){var kt=A[ks];kq=kt+'Hidden';if(kq in l){kr=kt;break}}}kr!==undefined?(l.addEventListener(kr+'visibilitychange',ku),ku()):('onfocusout' in l?(l.addEventListener('focusout',kv),l.addEventListener('focusin',kw)):(j.addEventListener('pagehide',kv),j.addEventListener('blur',kv),j.addEventListener('pageshow',kw),j.addEventListener('focus',kw)),kp=!0)}function ku(){kp=!l[kq]}function kv(){kp=!1}function kw(){kp=!0}var kx=new RegExp( '^-(?:'+A.join('|')+')-' );function ky(a){return a.replace(kx,'')}var kz=new RegExp( '^(?:'+A.join('|')+')([A-Z])' );function kA(a){if(!a)return'';kz.test(a)&&(a+='-';return a.replace(/[A-Z]/g,function(a){return'-'+a.toLowerCase()})}var kB;if(!p)kB=null;else{var kC=I('div').style,kD=function(a){return a},kE={},kF={},kG,kH,kI,kJ,kK,kL;kC.transition!==undefined?(kG='transition',kH='transitionend',kI=!0):kC.webkitTransition!==undefined?(kG='webkitTransition',kH='webkitTransitionEnd',kI=!0):(kI=!1);kG&&(kJ=kG+'Duration',kK=kG+'Property',kL=kG+'TimingFunction');kB=function(a,b,c,d,e){setTimeout(function(){var f,g;function h(){f&&g&&(a.ractive.fire(a.name+':end',a.node,a.isIntro),e())}var i=(a.node.namespaceURI||'')+a.node.tagName,j=a.node.style,k={property:j[kK],timing:j[kL],duration:j[kJ]};j[kK]=d.map(ko).map(kA).join(',');j[kL]=kA(c.easing||'linear');j[kJ]=c.duration/1000+'s';function l(b){var c=d.indexOf(jB(ky(b.propertyName)));c!==-1&&d.splice(c,1);if(d.length){return}j[kK]=k.property;j[kL]=k.duration;j[kJ]=k.timing;a.node.removeEventListener(kH,l,!1);g=!0;h()}a.node.addEventListener(kH,l,!1);setTimeout(function(){var e=d.length,k,m,n,o=[],p,q,r;while(e--){p=d[e],k=i+p,kI&&!kF[k]&&(j[ko(p)]=b[p],kE[k]||(m=a.getStyle(p),kE[k]=a.getStyle(p)!=b[p],kF[k]=!kE[k],kF[k]&&(j[ko(p)]=m))),(!kI||kF[k])&&(m===undefined&&(m=a.getStyle(p)),n=d.indexOf(p),n===-1?aq('Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!',{node:a.node}):d.splice(n,1),q=/[^\d]*$/.exec(b[p])[0],r=ax(parseFloat(m),parseFloat(b[p]))||function(){return b[p]},o.push({name:ko(p),interpolator:r,suffix:q}))}if(o.length){var s;typeof c.easing==='string'?(s=a.ractive.easing[c.easing],s||(ar(au(c.easing,'easing')),s=kD)):typeof c.easing==='function'?(s=c.easing):(s=kD);new cl({duration:c.duration,easing:s,step:function(b){var c=o.length;while(c--){var d=o[c];a.node.style[d.name]=d.interpolator(b)+d.suffix}},complete:function(){f=!0;h()}})}else f=!0;d.length||(a.node.removeEventListener(kH,l,!1),g=!0,h())},0)},c.delay||0)}}var kM=kB;function kN(a,b){b?a.setAttribute('style',b):(a.getAttribute('style'),a.removeAttribute('style'))}var kO=j&&(j.getComputedStyle||i.getComputedStyle),kP=aY.resolve(),kQ=function f(a,b,c,d,e){this.ractive=a;this.node=b;this.name=c;this.params=d;this.eventName=e;this.isIntro=e!=='outro';typeof c==='function'?(this._fn=c):(this._fn=av('transitions',a,c),this._fn||ar(au(c,'transition'),{ractive:a}))};kQ.prototype.animateStyle=function d(a,b,c){var e=this;if(arguments.length===4){throw new Error( 't.animateStyle() returns a promise - use .then() instead of passing a callback' )}if(!kp){this.setStyle(a,b);return kP}var f;typeof a==='string'?(f={},f[a]=b):(f=a,c=b);c||(ar('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);return new aY( function(a){if(!c.duration){e.setStyle(f);a();return}var b=Object.keys(f),d=[],g=kO(e.node),h=b.length;while(h--){var i=b[h],j=g[ko(i)];j==='0px'&&(j=0);j!=f[i]&&(d.push(i),e.node.style[ko(i)]=j)}if(!d.length){a();return}kM(e,f,c,d,a)})};kQ.prototype.getStyle=function b(a){var c=kO(this.node);if(typeof a==='string'){var d=c[ko(a)];return d==='0px'?0:d}if(!aa(a)){throw new Error( 'Transition$getStyle must be passed a string, or an array of strings representing CSS properties' )}var e={},f=a.length;while(f--){var g=a[f],h=c[ko(g)];h==='0px'&&(h=0);e[g]=h}return e};kQ.prototype.processParams=function c(a,b){typeof a==='number'?(a={duration:a}):typeof a==='string'?(a==='slow'?(a={duration:600}):a==='fast'?(a={duration:200}):(a={duration:400})):a||(a={});return Y({},b,a)};kQ.prototype.setStyle=function c(a,b){if(typeof a==='string')this.node.style[ko(a)]=b;else{var d;for(d in a){a.hasOwnProperty(d)&&(this.node.style[ko(d)]=a[d])}}return this};kQ.prototype.start=function a(){var b=this,c=this.node,d=c.getAttribute('style'),e;this.complete=function(a){if(e){return}!a&&b.eventName==='intro'&&kN(c,d);b._manager.remove(b);e=!0};if(!this._fn){this.complete();return}var f=this._fn.apply(this.ractive,[this].concat(this.params));f&&f.then(this.complete)};function kR(a){var b=a.node,c=a.ractive;do {var d=c._liveQueries,e=d.length;while(e--){var f=d[e],g=d[("_"+f)];g.test(b)&&(g.add(b),a.liveQueries.push(g))}}while(c=c.parent)}function kS(a){while(a=a.parent){if(a.name==='form'){return a}}}function kT(a,b){ar(("The "+a+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity"),{ractive:b})}var kU=function c(a,b){b===void 0&&(b='value');this.element=a;this.ractive=a.ractive;this.attribute=a.attributeByName[b];var d=this.attribute.interpolator;d.twowayBinding=this;var e=d.model;if(!e)d.resolver.forceResolution(),e=d.model,kT(("'"+d.template.r+"' reference"),this.ractive);else if(e.isUnresolved)e.forceResolution(),kT('expression',this.ractive);else if(e.isReadonly){var f=e.getKeypath().replace(/^@/,'');ar(("Cannot use two-way binding on <"+a.name+"> element: "+f+" is read-only. To suppress this warning use <"+a.name+" twoway='false'...>"),{ractive:this.ractive});return !1}this.attribute.isTwoway=!0;this.model=e;var g=e.get();this.wasUndefined=g===undefined;g===undefined&&this.getInitialValue&&(g=this.getInitialValue(),e.set(g));var h=kS(a);h&&(this.resetValue=g,h.formBindings.push(this))};kU.prototype.bind=function a(){this.model.registerTwowayBinding(this)};kU.prototype.handleChange=function a(){var b=this;bi.start(this.root);this.attribute.locked=!0;this.model.set(this.getValue());bi.scheduleTask(function(){return b.attribute.locked=!1});bi.end()};kU.prototype.rebind=function a(){this.unbind();this.model=this.attribute.interpolator.model;this.bind()};kU.prototype.render=function a(){this.node=this.element.node;this.node._ractive.binding=this;this.rendered=!0};kU.prototype.setFromNode=function b(a){this.model.set(a.value)};kU.prototype.unbind=function a(){this.model.unregisterTwowayBinding(this)};kU.prototype.unrender=function a(){};function kV(){this._ractive.binding.handleChange()}var kW=function(a){function b(b){a.call(this,b,'checked')}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function b(){a.prototype.render.call(this);this.node.addEventListener('change',kV,!1);this.node.attachEvent&&this.node.addEventListener('click',kV,!1)};b.prototype.unrender=function a(){this.node.removeEventListener('change',kV,!1);this.node.removeEventListener('click',kV,!1)};b.prototype.getInitialValue=function a(){return!!this.element.getAttribute('checked')};b.prototype.getValue=function a(){return this.node.checked};b.prototype.setFromNode=function b(a){this.model.set(a.checked)};return b}(kU);function kX(a,b,c){var d=""+a+"-bindingGroup";return b[d]||(b[d]=new kY( d, b, c ))}var kY=function d(a,b,c){var e=this;this.model=b;this.hash=a;this.getValue=function(){e.value=c.call(e);return e.value};this.bindings=[]};kY.prototype.add=function b(a){this.bindings.push(a)};kY.prototype.bind=function a(){this.value=this.model.get();this.model.registerTwowayBinding(this);this.bound=!0};kY.prototype.remove=function b(a){aS(this.bindings,a);this.bindings.length||this.unbind()};kY.prototype.unbind=function a(){this.model.unregisterTwowayBinding(this);this.bound=!1;delete this.model[this.hash]};var kZ=[].push;function k_(){var a=this.bindings.filter(function(a){return a.node&&a.node.checked}).map(function(a){return a.element.getAttribute('value')}),c=[];a.forEach(function(a){aO(c,a)||c.push(a)});return c}var k$=function(a){function b(b){a.call(this,b,'name');this.checkboxName=!0;this.group=kX('checkboxes',this.model,k_);this.group.add(this);this.noInitialValue&&(this.group.noInitialValue=!0);if(this.group.noInitialValue&&this.element.getAttribute('checked')){var c=this.model.get(),d=this.element.getAttribute('value');aO(c,d)||kZ.call(c,d)}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){this.group.bound||this.group.bind()};b.prototype.changed=function a(){var b=!!this.isChecked;this.isChecked=this.node.checked;return this.isChecked===b};b.prototype.getInitialValue=function a(){this.noInitialValue=!0;return[]};b.prototype.getValue=function a(){return this.group.value};b.prototype.handleChange=function b(){this.isChecked=this.element.node.checked;this.group.value=this.model.get();var c=this.element.getAttribute('value');this.isChecked&&!aO(this.group.value,c)?this.group.value.push(c):!this.isChecked&&aO(this.group.value,c)&&aS(this.group.value,c);a.prototype.handleChange.call(this)};b.prototype.render=function b(){a.prototype.render.call(this);var c=this.node,d=this.model.get(),e=this.element.getAttribute('value');aa(d)?(this.isChecked=aO(d,e)):(this.isChecked=d==e);c.name='{{'+this.model.getKeypath()+'}}';c.checked=this.isChecked;c.addEventListener('change',kV,!1);c.attachEvent&&c.addEventListener('click',kV,!1)};b.prototype.setFromNode=function b(a){this.group.bindings.forEach(function(a){return a.wasUndefined=!0});if(a.checked){var c=this.group.getValue();c.push(this.element.getAttribute('value'));this.group.model.set(c)}};b.prototype.unbind=function a(){this.group.remove(this)};b.prototype.unrender=function a(){var b=this.element.node;b.removeEventListener('change',kV,!1);b.removeEventListener('click',kV,!1)};return b}(kU),la=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function a(){return this.element.fragment?this.element.fragment.toString():''};b.prototype.getValue=function a(){return this.element.node.innerHTML};b.prototype.render=function b(){a.prototype.render.call(this);var c=this.node;c.addEventListener('change',kV,!1);c.addEventListener('blur',kV,!1);this.ractive.lazy||(c.addEventListener('input',kV,!1),c.attachEvent&&c.addEventListener('keyup',kV,!1))};b.prototype.setFromNode=function b(a){this.model.set(a.innerHTML)};b.prototype.unrender=function a(){var b=this.node;b.removeEventListener('blur',kV,!1);b.removeEventListener('change',kV,!1);b.removeEventListener('input',kV,!1);b.removeEventListener('keyup',kV,!1)};return b}(kU);function lb(){kV.call(this);var a=this._ractive.binding.model.get();this.value=a==undefined?'':a}function lc(a){var b;return function(){var c=this;b&&clearTimeout(b);b=setTimeout(function(){var a=c._ractive.binding;a.rendered&&kV.call(c);b=null},a)}}var ld=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function a(){return''};b.prototype.getValue=function a(){return this.node.value};b.prototype.render=function b(){a.prototype.render.call(this);var c=this.ractive.lazy,d=!1;this.element.template.a&&'lazy' in this.element.template.a&&(c=this.element.template.a.lazy,c===0&&(c=!0));c==='false'&&(c=!1);ac(c)&&(d=+c,c=!1);this.handler=d?lc(d):kV;var e=this.node;e.addEventListener('change',kV,!1);c||(e.addEventListener('input',this.handler,!1),e.attachEvent&&e.addEventListener('keyup',this.handler,!1));e.addEventListener('blur',lb,!1)};b.prototype.unrender=function a(){var b=this.element.node;this.rendered=!1;b.removeEventListener('change',kV,!1);b.removeEventListener('input',this.handler,!1);b.removeEventListener('keyup',this.handler,!1);b.removeEventListener('blur',lb,!1)};return b}(kU);function le(a){return a.selectedOptions?aT(a.selectedOptions):a.options?aT(a.options).filter(function(a){return a.selected}):[]}var lf=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.forceUpdate=function a(){var b=this,c=this.getValue();c!==undefined&&(this.attribute.locked=!0,bi.scheduleTask(function(){return b.attribute.locked=!1}),this.model.set(c))};b.prototype.getInitialValue=function a(){return this.element.options.filter(function(a){return a.getAttribute('selected')}).map(function(a){return a.getAttribute('value')})};b.prototype.getValue=function a(){var b=this.element.node.options,c=b.length,d=[];for(var e=0;e<c;e+=1){var f=b[e];if(f.selected){var g=f._ractive?f._ractive.value:f.value;d.push(g)}}return d};b.prototype.handleChange=function b(){var c=this.attribute,d=c.getValue(),e=this.getValue();(d===undefined||!aP(e,d))&&a.prototype.handleChange.call(this);return this};b.prototype.render=function b(){a.prototype.render.call(this);this.node.addEventListener('change',kV,!1);this.model.get()===undefined&&this.handleChange()};b.prototype.setFromNode=function b(a){var c=le(a),d=c.length,e=new Array( d );while(d--){var f=c[d];e[d]=f._ractive?f._ractive.value:f.value}this.model.set(e)};b.prototype.setValue=function a(){throw new Error( 'TODO not implemented yet' )};b.prototype.unrender=function a(){this.node.removeEventListener('change',kV,!1)};b.prototype.updateModel=function a(){(this.attribute.value===undefined||!this.attribute.value.length)&&this.keypath.set(this.initialValue)};return b}(kU),lg=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function a(){return undefined};b.prototype.getValue=function a(){var b=parseFloat(this.node.value);return isNaN(b)?undefined:b};b.prototype.setFromNode=function b(a){var c=parseFloat(a.value);isNaN(c)||this.model.set(c)};return b}(ld),lh={};function li(a){return lh[a]||(lh[a]=[])}var lj=function(a){function b(b){a.call(this,b,'checked');this.siblings=li(this.ractive._guid+this.element.getAttribute('name'));this.siblings.push(this)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getValue=function a(){return this.node.checked};b.prototype.handleChange=function a(){bi.start(this.root);this.siblings.forEach(function(a){a.model.set(a.getValue())});bi.end()};b.prototype.render=function b(){a.prototype.render.call(this);this.node.addEventListener('change',kV,!1);this.node.attachEvent&&this.node.addEventListener('click',kV,!1)};b.prototype.setFromNode=function b(a){this.model.set(a.checked)};b.prototype.unbind=function a(){aS(this.siblings,this)};b.prototype.unrender=function a(){this.node.removeEventListener('change',kV,!1);this.node.removeEventListener('click',kV,!1)};return b}(kU);function lk(){var a=this.bindings.filter(function(a){return a.node.checked});if(a.length>0){return a[0].element.getAttribute('value')}}var ll=function(a){function b(b){a.call(this,b,'name');this.group=kX('radioname',this.model,lk);this.group.add(this);b.checked&&(this.group.value=this.getValue())}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){var b=this;this.group.bound||this.group.bind();this.nameAttributeBinding={handleChange:function(){return b.node.name="{{"+b.model.getKeypath()+"}}"}};this.model.getKeypathModel().register(this.nameAttributeBinding)};b.prototype.getInitialValue=function a(){if(this.element.getAttribute('checked')){return this.element.getAttribute('value')}};b.prototype.getValue=function a(){return this.element.getAttribute('value')};b.prototype.handleChange=function b(){this.node.checked&&(this.group.value=this.getValue(),a.prototype.handleChange.call(this))};b.prototype.render=function b(){a.prototype.render.call(this);var c=this.node;c.name="{{"+this.model.getKeypath()+"}}";c.checked=this.model.get()==this.element.getAttribute('value');c.addEventListener('change',kV,!1);c.attachEvent&&c.addEventListener('click',kV,!1)};b.prototype.setFromNode=function b(a){a.checked&&this.group.model.set(this.element.getAttribute('value'))};b.prototype.unbind=function a(){this.group.remove(this);this.model.getKeypathModel().unregister(this.nameAttributeBinding)};b.prototype.unrender=function a(){var b=this.node;b.removeEventListener('change',kV,!1);b.removeEventListener('click',kV,!1)};return b}(kU),lm=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.forceUpdate=function a(){var b=this,c=this.getValue();c!==undefined&&(this.attribute.locked=!0,bi.scheduleTask(function(){return b.attribute.locked=!1}),this.model.set(c))};b.prototype.getInitialValue=function a(){if(this.element.getAttribute('value')!==undefined){return}var b=this.element.options,c=b.length;if(!c)return;var d,e,f=c;while(f--){var g=b[f];if(g.getAttribute('selected')){g.getAttribute('disabled')||(d=g.getAttribute('value'));e=!0;break}}if(!e){while(++f<c){if(!b[f].getAttribute('disabled')){d=b[f].getAttribute('value');break}}}d!==undefined&&(this.element.attributeByName.value.value=d);return d};b.prototype.getValue=function a(){var b=this.node.options,c=b.length,d;for(d=0;d<c;d+=1){var e=b[d];if(b[d].selected&&!b[d].disabled){return e._ractive?e._ractive.value:e.value}}};b.prototype.render=function b(){a.prototype.render.call(this);this.node.addEventListener('change',kV,!1)};b.prototype.setFromNode=function b(a){var c=le(a)[0];this.model.set(c._ractive?c._ractive.value:c.value)};b.prototype.setValue=function b(a){this.model.set(a)};b.prototype.unrender=function a(){this.node.removeEventListener('change',kV,!1)};return b}(kU);function ln(a){return a&&a.template.length===1&&a.template[0].t===dU&&!a.template[0].s}function lo(a){var b=a.attributeByName;if(a.getAttribute('contenteditable')||ln(b.contenteditable)){return ln(b.value)?la:null}if(a.name==='input'){var c=a.getAttribute('type');if(c==='radio'||c==='checkbox'){var d=ln(b.name),e=ln(b.checked);if(d&&e){if(c==='radio')aq('A radio input can have two-way binding on its name attribute, or its checked attribute - not both',{ractive:a.root});else{return kW}}if(d){return c==='radio'?ll:k$}if(e){return c==='radio'?lj:kW}}if(c==='file'&&ln(b.value)){return kU}if(ln(b.value)){returnc==='number'||c==='range'?lg:ld}return null}if(a.name==='select'&&ln(b.value)){return a.getAttribute('multiple')?lf:lm}if(a.name==='textarea'&&ln(b.value)){return ld}}function lp(a){a.makeDirty()}var lq=function(a){function b(b){var c=this;a.call(this,b);this.liveQueries=[];this.name=b.template.e.toLowerCase();this.isVoid=ge.test(this.name);var d=this.parentFragment;while(d){if(d.owner.type===dZ){c.parent=d.owner;break}d=d.parent}if(this.parent&&this.parent.name==='option'){throw new Error( ("An <option> element cannot contain other elements (encountered <"+this.name+">)") )}this.attributeByName={};this.attributes=[];this.template.a&&(Object.keys(this.template.a).forEach(function(a){if(a==='twoway'||a==='lazy')return;var b=new kc({name:a,element:c,parentFragment:c.parentFragment,template:c.template.a[a]});c.attributeByName[a]=b;a!=='value'&&a!=='type'&&c.attributes.push(b)}),this.attributeByName.type&&this.attributes.unshift(this.attributeByName.type),this.attributeByName.value&&this.attributes.push(this.attributeByName.value));this.conditionalAttributes=(this.template.m||[]).map(function(a){return new ke({owner:c,parentFragment:c.parentFragment,template:a})});this.template.o&&(this.decorator=new ki( this, this.template.o ));this.eventHandlers=[];this.template.v&&Object.keys(this.template.v).forEach(function(a){var b=a.split('-'),d=c.template.v[a];b.forEach(function(a){var b=av('events',c.ractive,a),e=b?new kk( b, c ):new kj( a, c );c.eventHandlers.push(new jt( c, e, d ))})});b.template.f&&!b.noContent&&(this.fragment=new mh({template:b.template.f,owner:this,cssIds:null}));this.binding=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){this.attributes.forEach(bU);this.conditionalAttributes.forEach(bU);this.eventHandlers.forEach(bU);this.decorator&&this.decorator.bind();this.fragment&&this.fragment.bind();(this.binding=this.createTwowayBinding())&&this.binding.bind()};b.prototype.createTwowayBinding=function a(){var b=this.template.a;if(!b)return null;var c='twoway' in b?b.twoway===0||b.twoway==='true':this.ractive.twoway;if(!c)return null;var d=lo(this);if(!d)return null;var e=new d( this );return e&&e.model?e:null};b.prototype.detach=function a(){this.decorator&&this.decorator.unrender();return T(this.node)};b.prototype.find=function b(a){if(J(this.node,a))return this.node;if(this.fragment){return this.fragment.find(a)}};b.prototype.findAll=function c(a,b){var d=b.test(this.node);d&&(b.add(this.node),b.live&&this.liveQueries.push(b));this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function b(a){if(this.fragment){return this.fragment.findComponent(a)}};b.prototype.findAllComponents=function c(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.findNextNode=function a(){return null};b.prototype.firstNode=function a(){return this.node};b.prototype.getAttribute=function b(a){var c=this.attributeByName[a];return c?c.getValue():undefined};b.prototype.rebind=function a(){this.attributes.forEach(bZ);this.conditionalAttributes.forEach(bZ);this.eventHandlers.forEach(bZ);this.decorator&&this.decorator.rebind();this.fragment&&this.fragment.rebind();this.binding&&this.binding.rebind();this.liveQueries.forEach(lp)};b.prototype.render=function c(a,b){var d=this;this.namespace=lx(this);var e,f=!1;if(b){var g;while(g=b.shift()){if(g.nodeName===d.template.e.toUpperCase()&&g.namespaceURI===d.namespace){d.node=e=g;f=!0;break}else T(g)}}e||(e=I(this.template.e,this.namespace,this.getAttribute('is')),this.node=e);W(e,'_ractive',{value:{proxy:this,fragment:this.parentFragment}});this.parentFragment.cssIds&&e.setAttribute('data-ractive-css',this.parentFragment.cssIds.map(function(a){return "{"+a+"}"}).join(' '));f&&this.foundNode&&this.foundNode(e);if(this.fragment){var h=f?aT(e.childNodes):undefined;this.fragment.render(e,h);h&&h.forEach(T)}if(f){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(e);var i=e.attributes.length;while(i--){var j=e.attributes[i].name;(!d.template.a||!(j in d.template.a))&&e.removeAttribute(j)}}this.attributes.forEach(bY);this.conditionalAttributes.forEach(bY);this.decorator&&bi.scheduleTask(function(){return d.decorator.render()},!0);this.binding&&this.binding.render();this.eventHandlers.forEach(bY);kR(this);this._introTransition=lr(this,this.template.t0||this.template.t1,'intro');f||a.appendChild(e);this.rendered=!0};b.prototype.toString=function a(){var b=this.template.e,c=this.attributes.map(lv).join('')+this.conditionalAttributes.map(lv).join('');this.name==='option'&&this.isSelected()&&(c+=' selected');this.name==='input'&&lu(this)&&(c+=' checked');var d="<"+b+""+c+">";if(this.isVoid)return d;this.name==='textarea'&&this.getAttribute('value')!==undefined?(d+=gp(this.getAttribute('value'))):this.getAttribute('contenteditable')!==undefined&&(d+=this.getAttribute('value')||'');this.fragment&&(d+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e)));d+="</"+b+">";return d};b.prototype.unbind=function a(){this.attributes.forEach(b$);this.conditionalAttributes.forEach(b$);this.decorator&&this.decorator.unbind();this.fragment&&this.fragment.unbind()};b.prototype.unrender=function b(a){if(!this.rendered)return;this.rendered=!1;var c=this._introTransition;c&&c.complete();this.name==='option'?this.detach():a&&bi.detachWhenReady(this);this.fragment&&this.fragment.unrender();this.eventHandlers.forEach(ca);this.binding&&this.binding.unrender();!a&&this.decorator&&this.decorator.unrender();lr(this,this.template.t0||this.template.t2,'outro');var d=this.attributeByName.id;d&&delete this.ractive.nodes[d.getValue()];lw(this)};b.prototype.update=function a(){this.dirty&&(this.dirty=!1,this.attributes.forEach(cc),this.conditionalAttributes.forEach(cc),this.eventHandlers.forEach(cc),this.decorator&&this.decorator.update(),this.fragment&&this.fragment.update())};return b}(ix);function lr(a,b,c){if(!b||!a.ractive.transitionsEnabled)return;var d=ls(a,b);if(!d)return;var e=lt(a,b),f=new kQ( a.ractive, a.node, d, e, c );bi.registerTransition(f);return f}function ls(a,b){var c=b.n||b;if(typeof c==='string')return c;var d=new mh({owner:a,template:c}).bind();c=d.toString();d.unbind();return c}function lt(a,b){if(b.a)return b.a;if(!b.d)return;var c=new mh({owner:a,template:b.d}).bind(),d=c.getArgsList();c.unbind();return d}function lu(a){var b=a.attributeByName,c=b.type,d=b.value,e=b.name;if(!c||c.value!=='radio'||!d||!e.interpolator){return}if(d.getValue()===e.interpolator.model.get()){return !0}}function lv(a){var b=a.toString();return b?' '+b:''}function lw(a){var b=a.liveQueries.length;while(b--){var c=a.liveQueries[b];c.remove(a.node)}}function lx(a){var b=a.getAttribute('xmlns');if(b)return b;if(a.name==='svg')return D;var c=a.parent;if(c){if(c.name==='foreignobject')return B;return c.node.namespaceURI}return a.ractive.el.namespaceURI}var ly=function(a){function b(b){a.call(this,b);this.formBindings=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function d(b,c){a.prototype.render.call(this,b,c);this.node.addEventListener('reset',lz,!1)};b.prototype.unrender=function c(b){this.node.removeEventListener('reset',lz,!1);a.prototype.unrender.call(this,b)};return b}(lq);function lz(){var a=this._ractive.proxy;bi.start();a.formBindings.forEach(lA);bi.end()}function lA(a){a.model.set(a.resetValue)}var lB=function(a){function b(b){a.call(this,b);this.parentFragment=b.parentFragment;this.template=b.template;this.index=b.index;this.isStatic=!!b.template.s;this.model=null;this.dirty=!1}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){var b=this,c=iD(this.parentFragment,this.template),d=c?c.get():undefined;if(this.isStatic){this.model={get:function(){return d}};return}c?(c.register(this),this.model=c):(this.resolver=this.parentFragment.resolve(this.template.r,function(a){b.model=a;a.register(b);b.handleChange();b.resolver=null}))};b.prototype.handleChange=function a(){this.bubble()};b.prototype.rebind=function a(){if(this.isStatic||!this.model)return;var b=iD(this.parentFragment,this.template);if(b===this.model)return;this.model.unregister(this);this.model=b;b&&(b.register(this),this.handleChange())};b.prototype.unbind=function a(){this.isStatic||(this.model&&this.model.unregister(this),this.model=undefined,this.resolver&&this.resolver.unbind())};return b}(ix),lC=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.detach=function a(){return T(this.node)};b.prototype.firstNode=function a(){return this.node};b.prototype.getString=function a(){return this.model?U(this.model.get()):''};b.prototype.render=function c(a,b){var d=this.getString();this.rendered=!0;if(b){var e=b[0];e&&e.nodeType===3?(b.shift(),e.nodeValue!==d&&(e.nodeValue=d)):(e=this.node=l.createTextNode(d),b[0]?a.insertBefore(e,b[0]):a.appendChild(e));this.node=e}else this.node=l.createTextNode(d),a.appendChild(this.node)};b.prototype.toString=function b(a){var c=this.getString();return a?gp(c):c};b.prototype.unrender=function b(a){a&&this.detach();this.rendered=!1};b.prototype.update=function a(){this.dirty&&(this.dirty=!1,this.rendered&&(this.node.data=this.getString()))};b.prototype.valueOf=function a(){return this.model?this.model.get():undefined};return b}(lB),lD=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function d(b,c){a.prototype.render.call(this,b,c);this.node.defaultValue=this.node.value};return b}(lq);function lE(a){while(a){if(a.name==='select')return a;a=a.parent}}var lF=function(a){function b(b){var c=b.template;c.a||(c.a={});c.a.value===undefined&&!('disabled' in c.a)&&(c.a.value=c.f||'');a.call(this,b);this.select=lE(this.parent)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function b(){if(!this.select){a.prototype.bind.call(this);return}var c=this.attributeByName.selected;if(c&&this.select.getAttribute('value')!==undefined){var d=this.attributes.indexOf(c);this.attributes.splice(d,1);delete this.attributeByName.selected}a.prototype.bind.call(this);this.select.options.push(this)};b.prototype.isSelected=function a(){var b=this.getAttribute('value');if(b===undefined||!this.select){return !1}var c=this.select.getAttribute('value');if(c==b){return !0}if(this.select.getAttribute('multiple')&&aa(c)){var d=c.length;while(d--){if(c[d]==b){return !0}}}};b.prototype.unbind=function b(){a.prototype.unbind.call(this);this.select&&aS(this.select.options,this)};return b}(lq);function lG(a,b,c){var d=lH(a,b,c||{});if(d)return d;d=hO.fromId(b,{noThrow:!0});if(d){var e=hO.parseFor(d,a);e.p&&Z(a.partials,e.p);return a.partials[b]=e.t}}function lH(a,b,c){var d=lK(b,c.owner);if(d)return d;var e=aw('partials',a,b);if(!e){return}d=e.partials[b];var f;typeof d==='function'&&(f=d.bind(e),f.isOwner=e.partials.hasOwnProperty(b),d=f.call(a,hO));if(!d&&d!==''){aq(at,b,'partial','partial',{ractive:a});return}if(!hO.isParsed(d)){var g=hO.parseFor(d,e);g.p&&aq('Partials ({{>%s}}) cannot contain nested inline partials',b,{ractive:a});var h=f?e:lI(e,b);h.partials[b]=d=g.t}f&&(d._fn=f);return d.v?d.t:d}function lI(a,b){return a.partials.hasOwnProperty(b)?a:lJ(a.constructor,b)}function lJ(a,b){if(!a){return}return a.partials.hasOwnProperty(b)?a:lJ(a._Parent,b)}function lK(a,b){if(b){if(b.template&&b.template.p&&b.template.p[a]){return b.template.p[a]}else if(b.parentFragment&&b.parentFragment.owner){return lK(a,b.parentFragment.owner)}}}var lL=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function b(){this.refName=this.template.r;var c=this.refName?lG(this.ractive,this.refName,this.parentFragment)||null:null,d;c&&(this.named=!0,this.setTemplate(this.template.r,c));c||(a.prototype.bind.call(this),this.model&&(d=this.model.get())&&typeof d==='object'&&(typeof d.template==='string'||aa(d.t))?(d.template&&(d=lM(this.template.r,d.template,this.ractive)),this.setTemplate(this.template.r,d.t)):(!this.model||typeof this.model.get()!=='string')&&this.refName?this.setTemplate(this.refName,c):this.setTemplate(this.model.get()));this.fragment=new mh({owner:this,template:this.partialTemplate}).bind()};b.prototype.detach=function a(){return this.fragment.detach()};b.prototype.find=function b(a){return this.fragment.find(a)};b.prototype.findAll=function c(a,b){this.fragment.findAll(a,b)};b.prototype.findComponent=function b(a){return this.fragment.findComponent(a)};b.prototype.findAllComponents=function c(a,b){this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function b(a){return this.fragment.firstNode(a)};b.prototype.forceResetTemplate=function a(){this.partialTemplate=undefined;this.refName&&(this.partialTemplate=lG(this.ractive,this.refName,this.parentFragment));this.partialTemplate||(this.partialTemplate=lG(this.ractive,this.name,this.parentFragment));this.partialTemplate||(ar(("Could not find template for partial '"+this.name+"'")),this.partialTemplate=[]);this.fragment.resetTemplate(this.partialTemplate);this.bubble()};b.prototype.rebind=function b(){a.prototype.unbind.call(this);a.prototype.bind.call(this);this.fragment.rebind()};b.prototype.render=function c(a,b){this.fragment.render(a,b)};b.prototype.setTemplate=function c(a,b){this.name=a;!b&&b!==null&&(b=lG(this.ractive,a,this.parentFragment));b||ar(("Could not find template for partial '"+a+"'"));this.partialTemplate=b||[]};b.prototype.toString=function b(a){return this.fragment.toString(a)};b.prototype.unbind=function b(){a.prototype.unbind.call(this);this.fragment.unbind()};b.prototype.unrender=function b(a){this.fragment.unrender(a)};b.prototype.update=function a(){var b;this.dirty&&(this.dirty=!1,this.named||(this.model&&(b=this.model.get()),b&&typeof b==='string'&&b!==this.name?(this.setTemplate(b),this.fragment.resetTemplate(this.partialTemplate)):b&&typeof b==='object'&&(typeof b.template==='string'||aa(b.t))&&(b.template&&(b=lM(this.name,b.template,this.ractive)),this.setTemplate(this.name,b.t),this.fragment.resetTemplate(this.partialTemplate))),this.fragment.update())};return b}(lB);function lM(a,b,c){var d;try{d=hO.parse(b,hO.getParseOptions(c))}catch(b){aq(("Could not parse partial from expression '"+a+"'\n"+b.message))};return d||{t:[]}}var lN=function b(a){this.parent=a.owner.parentFragment;this.parentFragment=this;this.owner=a.owner;this.ractive=this.parent.ractive;this.cssIds='cssIds' in a?a.cssIds:(this.parent?this.parent.cssIds:null);this.context=null;this.rendered=!1;this.iterations=[];this.template=a.template;this.indexRef=a.indexRef;this.keyRef=a.keyRef;this.pendingNewIndices=null;this.previousIterations=null;this.isArray=!1};lN.prototype.bind=function b(a){var c=this;this.context=a;var d=a.get();if(this.isArray=aa(d)){this.iterations=[];for(var e=0;e<d.length;e+=1)c.iterations[e]=c.createIteration(e,e)}else if(ad(d)){this.isArray=!1;if(this.indexRef){var f=this.indexRef.split(',');this.keyRef=f[0];this.indexRef=f[1]}this.iterations=Object.keys(d).map(function(a,b){return c.createIteration(a,b)})}return this};lN.prototype.bubble=function a(){this.owner.bubble()};lN.prototype.createIteration=function c(a,b){var d=new mh({owner:this,template:this.template});d.key=a;d.index=b;d.isIteration=!0;var e=this.context.joinKey(a);this.owner.template.z&&(d.aliases={},d.aliases[this.owner.template.z[0].n]=e);return d.bind(e)};lN.prototype.detach=function a(){var b=R();this.iterations.forEach(function(a){return b.appendChild(a.detach())});return b};lN.prototype.find=function b(a){var c=this,d=this.iterations.length,e;for(e=0;e<d;e+=1){var f=c.iterations[e].find(a);if(f)return f}};lN.prototype.findAll=function c(a,b){var d=this,e=this.iterations.length,f;for(f=0;f<e;f+=1)d.iterations[f].findAll(a,b)};lN.prototype.findComponent=function b(a){var c=this,d=this.iterations.length,e;for(e=0;e<d;e+=1){var f=c.iterations[e].findComponent(a);if(f)return f}};lN.prototype.findAllComponents=function c(a,b){var d=this,e=this.iterations.length,f;for(f=0;f<e;f+=1)d.iterations[f].findAllComponents(a,b)};lN.prototype.findNextNode=function b(a){var c=this;if(a.index<this.iterations.length-1){for(var d=a.index+1;d<c.iterations.length;d++){var e=c.iterations[d].firstNode(!0);if(e)return e}}return this.owner.findNextNode()};lN.prototype.firstNode=function b(a){return this.iterations[0]?this.iterations[0].firstNode(a):null};lN.prototype.rebind=function b(a){var c=this;this.context=a;this.iterations.forEach(function(b){var d=a.joinKey(b.key||b.index);c.owner.template.z&&(b.aliases={},b.aliases[c.owner.template.z[0].n]=d);b.rebind(d)})};lN.prototype.render=function c(a,b){this.iterations&&this.iterations.forEach(function(c){return c.render(a,b)});this.rendered=!0};lN.prototype.shuffle=function b(a){var c=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice());this.pendingNewIndices||(this.pendingNewIndices=[]);this.pendingNewIndices.push(a);var d=[];a.forEach(function(a,b){if(a===-1)return;var e=c.iterations[b];d[a]=e;a!==b&&e&&(e.dirty=!0)});this.iterations=d;this.bubble()};lN.prototype.toString=function b(a){return this.iterations?this.iterations.map(a?ce:cd).join(''):''};lN.prototype.unbind=function a(){this.iterations.forEach(b$);return this};lN.prototype.unrender=function b(a){this.iterations.forEach(a?cb:ca);this.pendingNewIndices&&this.previousIterations&&this.previousIterations.forEach(function(b){b.rendered&&(a?cb(b):ca(b))});this.rendered=!1};lN.prototype.update=function a(){var b=this;if(this.pendingNewIndices){this.updatePostShuffle();return}if(this.updating)return;this.updating=!0;var c=this.context.get(),d=this.isArray,e,f,g=!0,h;if(this.isArray=aa(c))d&&(g=!1,this.iterations.length>c.length&&(e=this.iterations.splice(c.length)));else if(ad(c)&&!d){g=!1;e=[];f={};h=this.iterations.length;while(h--){var i=b.iterations[h];i.key in c?(f[i.key]=!0):(b.iterations.splice(h,1),e.push(i))}}g&&(e=this.iterations,this.iterations=[]);e&&e.forEach(function(a){a.unbind();a.unrender(!0)});this.iterations.forEach(cc);var j=aa(c)?c.length:ad(c)?Object.keys(c).length:0,k,l;if(j>this.iterations.length){k=this.rendered?R():null;h=this.iterations.length;if(aa(c)){while(h<c.length){l=b.createIteration(h,h),b.iterations.push(l),b.rendered&&l.render(k),h+=1}}else if(ad(c)){if(this.indexRef&&!this.keyRef){var m=this.indexRef.split(',');this.keyRef=m[0];this.indexRef=m[1]}Object.keys(c).forEach(function(a){(!f||!(a in f))&&(l=b.createIteration(a,h),b.iterations.push(l),b.rendered&&l.render(k),h+=1)})}if(this.rendered){var n=this.parent.findParentNode(),o=this.parent.findNextNode(this.owner);n.insertBefore(k,o)}}this.updating=!1};lN.prototype.updatePostShuffle=function a(){var b=this,c=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(function(a){c.forEach(function(b,d){c[d]=a[b]})});var d=this.context.get().length,e,f=0,g=!1;c.forEach(function(a,c){var d=b.previousIterations[c];!g&&a!==-1&&(a<f&&(g=!0),a>f&&(f=a));if(a===-1)d.unbind().unrender(!0);else{d.index=a;var e=b.context.joinKey(a);b.owner.template.z&&(d.aliases={},d.aliases[b.owner.template.z[0].n]=e);d.rebind(e)}});var h=this.rendered?R():null,i=this.rendered?this.parent.findParentNode():null;if(g){for(e=0;e<d;e+=1){var j=b.iterations[e];b.rendered&&(j?h.appendChild(j.detach()):(b.iterations[e]=b.createIteration(e,e),b.iterations[e].render(h)));b.rendered||(j||(b.iterations[e]=b.createIteration(e,e)))}}else{for(e=0;e<d;e++){var k=b.iterations[e];b.rendered?(k&&h.childNodes.length&&i.insertBefore(h,k.firstNode()),k||(k=b.iterations[e]=b.createIteration(e,e),k.render(h))):k||(b.iterations[e]=b.createIteration(e,e))}}this.rendered&&h.childNodes.length&&i.insertBefore(h,this.owner.findNextNode());this.iterations.forEach(cc);this.pendingNewIndices=null};function lO(a){return!a||aa(a)&&a.length===0||ad(a)&&Object.keys(a).length===0}function lP(a,b){if(b||aa(a))return ez;if(ad(a)||typeof a==='function')return eB;if(a===undefined)return null;return ex}var lQ=function(a){function b(b){a.call(this,b);this.sectionType=b.template.n||null;this.templateSectionType=this.sectionType;this.fragment=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function b(){a.prototype.bind.call(this);this.model?(this.dirty=!0,this.update()):this.sectionType&&this.sectionType===ey&&(this.fragment=new mh({owner:this,template:this.template.f}).bind())};b.prototype.detach=function a(){return this.fragment?this.fragment.detach():R()};b.prototype.find=function b(a){if(this.fragment){return this.fragment.find(a)}};b.prototype.findAll=function c(a,b){this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function b(a){if(this.fragment){return this.fragment.findComponent(a)}};b.prototype.findAllComponents=function c(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function b(a){return this.fragment&&this.fragment.firstNode(a)};b.prototype.rebind=function b(){a.prototype.rebind.call(this);this.fragment&&this.fragment.rebind(this.sectionType===ex||this.sectionType===ey?null:this.model)};b.prototype.render=function c(a,b){this.rendered=!0;this.fragment&&this.fragment.render(a,b)};b.prototype.shuffle=function b(a){this.fragment&&this.sectionType===ez&&this.fragment.shuffle(a)};b.prototype.toString=function b(a){return this.fragment?this.fragment.toString(a):''};b.prototype.unbind=function b(){a.prototype.unbind.call(this);this.fragment&&this.fragment.unbind()};b.prototype.unrender=function b(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};b.prototype.update=function a(){if(!this.dirty)return;if(!this.model&&this.sectionType!==ey)return;this.dirty=!1;var b=!this.model?undefined:this.model.isRoot?this.model.value:this.model.get(),c=this.sectionType;(this.sectionType===null||this.templateSectionType===null)&&(this.sectionType=lP(b,this.template.i));c&&c!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null);var d;if(this.sectionType===ez)this.fragment?this.fragment.update():(d=new lN({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model));else if(this.sectionType===eA)this.fragment?this.fragment.update():(d=new mh({owner:this,template:this.template.f}).bind(this.model));else if(this.sectionType===eB)this.fragment?(lO(b)?(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.fragment.update()):lO(b)||(d=new mh({owner:this,template:this.template.f}).bind(this.model));else{var e=this.sectionType===ey?lO(b):!!b&&!lO(b);this.fragment?(e?this.fragment.update():(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null)):e&&(d=new mh({owner:this,template:this.template.f}).bind(null))}if(d){if(this.rendered){var f=this.parentFragment.findParentNode(),g=this.parentFragment.findNextNode(this);if(g){var h=R();d.render(h);g.parentNode.insertBefore(h,g)}else d.render(f)}this.fragment=d}};return b}(lB);function lR(a,b){var c=a.length;while(c--){if(a[c]==b)return !0}}var lS=function(a){function b(b){a.call(this,b);this.options=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.foundNode=function b(a){if(this.binding){var c=le(a);c.length>0&&(this.selectedOptions=c)}};b.prototype.render=function d(b,c){a.prototype.render.call(this,b,c);this.sync();var e=this.node,f=e.options.length;while(f--)e.options[f].defaultSelected=e.options[f].selected;this.rendered=!0};b.prototype.sync=function a(){var b=this,c=this.node;if(!c)return;var d=aT(c.options);if(this.selectedOptions){d.forEach(function(a){b.selectedOptions.indexOf(a)>=0?(a.selected=!0):a.selected=!1});this.binding.setFromNode(c);delete this.selectedOptions;return}var e=this.getAttribute('value'),f=this.getAttribute('multiple');if(e!==undefined){var g;d.forEach(function(a){var b=a._ractive?a._ractive.value:a.value,c=f?lR(e,b):e==b;c&&(g=!0);a.selected=c});!g&&!f&&(this.binding&&this.binding.forceUpdate())}else this.binding&&this.binding.forceUpdate()};b.prototype.update=function b(){a.prototype.update.call(this);this.sync()};return b}(lq),lT=function(a){function b(b){var c=b.template;c.a&&c.a.value&&ln({template:c.a.value})?(b.noContent=!0):c.f&&(!c.a||!c.a.value)&&ln({template:c.f})&&(c.a||(c.a={}),c.a.value=c.f,b.noContent=!0);a.call(this,b)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function a(){var b=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&bi.scheduleTask(function(){b.dirty=!1;b.node.value=b.fragment.toString()}),this.parentFragment.bubble())};return b}(lD),lU=function(a){function b(b){a.call(this,b);this.type=dT}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){};b.prototype.detach=function a(){return T(this.node)};b.prototype.firstNode=function a(){return this.node};b.prototype.rebind=function a(){};b.prototype.render=function c(a,b){this.rendered=!0;if(b){var d=b[0];d&&d.nodeType===3?(b.shift(),d.nodeValue!==this.template&&(d.nodeValue=this.template)):(d=this.node=l.createTextNode(this.template),b[0]?a.insertBefore(d,b[0]):a.appendChild(d));this.node=d}else this.node=l.createTextNode(this.template),a.appendChild(this.node)};b.prototype.toString=function b(a){return a?gp(this.template):this.template};b.prototype.unbind=function a(){};b.prototype.unrender=function b(a){this.rendered&&a&&this.detach();this.rendered=!1};b.prototype.update=function a(){};b.prototype.valueOf=function a(){return this.template};return b}(ix),lV={},lW,lX;try{I('table').innerHTML='foo'}catch(a){lW=!0,lX={TABLE:['<table class="x">','</table>'],THEAD:['<table><thead class="x">','</thead></table>'],TBODY:['<table><tbody class="x">','</tbody></table>'],TR:['<table><tr class="x">','</tr></table>'],SELECT:['<select class="x">','</select>']}};function lY(a,b,c){var d=[];if(a==null||a==='')return d;var e,f,g;lW&&(f=lX[b.tagName])?(e=lZ('DIV'),e.innerHTML=f[0]+a+f[1],e=e.querySelector('.x'),e.tagName==='SELECT'&&(g=e.options[e.selectedIndex])):b.namespaceURI===D?(e=lZ('DIV'),e.innerHTML='<svg class="x">'+a+'</svg>',e=e.querySelector('.x')):b.tagName==='TEXTAREA'?(e=I('div'),typeof e.textContent!=='undefined'?(e.textContent=a):(e.innerHTML=a)):(e=lZ(b.tagName),e.innerHTML=a,e.tagName==='SELECT'&&(g=e.options[e.selectedIndex]));var h;while(h=e.firstChild){d.push(h),c.appendChild(h)}var i;if(b.tagName==='SELECT'){i=d.length;while(i--){d[i]!==g&&(d[i].selected=!1)}}return d}function lZ(a){return lV[a]||(lV[a]=I(a))}var l_=function(a){function b(b){a.call(this,b)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.detach=function a(){var b=R();this.nodes.forEach(function(a){return b.appendChild(a)});return b};b.prototype.find=function b(a){var c=this,d=this.nodes.length,e;for(e=0;e<d;e+=1){var f=c.nodes[e];if(f.nodeType!==1)continue;if(J(f,a))return f;var g=f.querySelector(a);if(g)return g}return null};b.prototype.findAll=function c(a,b){var d=this,e=this.nodes.length,f;for(f=0;f<e;f+=1){var g=d.nodes[f];if(g.nodeType!==1)continue;b.test(g)&&b.add(g);var h=g.querySelectorAll(a);if(h){var i=h.length,j;for(j=0;j<i;j+=1)b.add(h[j])}}};b.prototype.findComponent=function a(){return null};b.prototype.firstNode=function a(){return this.nodes[0]};b.prototype.render=function b(a){var c=this.model?this.model.get():'';this.nodes=lY(c,this.parentFragment.findParentNode(),a);this.rendered=!0};b.prototype.toString=function a(){return this.model&&this.model.get()!=null?gk(''+this.model.get()):''};b.prototype.unrender=function a(){this.nodes&&this.nodes.forEach(function(a){return T(a)});this.rendered=!1};b.prototype.update=function a(){if(this.rendered&&this.dirty){this.dirty=!1;this.unrender();var b=R();this.render(b);var c=this.parentFragment.findParentNode(),d=this.parentFragment.findNextNode(this);c.insertBefore(b,d)}};return b}(lB),l$=function(a){function b(b){a.call(this,b);this.container=b.parentFragment.ractive;this.component=this.container.component;this.containerFragment=b.parentFragment;this.parentFragment=this.component.parentFragment;this.name=b.template.n||''}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function a(){var b=this.name;(this.component.yielders[b]||(this.component.yielders[b]=[])).push(this);var c=this.container._inlinePartials[b||'content'];typeof c==='string'&&(c=hF(c).t);c||(aq(("Could not find template for partial \""+b+"\""),{ractive:this.ractive}),c=[]);this.fragment=new mh({owner:this,ractive:this.container.parent,template:c}).bind()};b.prototype.bubble=function a(){this.dirty||(this.containerFragment.bubble(),this.dirty=!0)};b.prototype.detach=function a(){return this.fragment.detach()};b.prototype.find=function b(a){return this.fragment.find(a)};b.prototype.findAll=function c(a,b){this.fragment.find(a,b)};b.prototype.findComponent=function b(a){return this.fragment.findComponent(a)};b.prototype.findAllComponents=function c(a,b){this.fragment.findAllComponents(a,b)};b.prototype.findNextNode=function a(){return this.containerFragment.findNextNode(this)};b.prototype.firstNode=function b(a){return this.fragment.firstNode(a)};b.prototype.rebind=function a(){this.fragment.rebind()};b.prototype.render=function c(a,b){return this.fragment.render(a,b)};b.prototype.setTemplate=function b(a){var c=this.parentFragment.ractive.partials[a];typeof c==='string'&&(c=hF(c).t);this.partialTemplate=c||[]};b.prototype.toString=function b(a){return this.fragment.toString(a)};b.prototype.unbind=function a(){this.fragment.unbind();aS(this.component.yielders[this.name],this)};b.prototype.unrender=function b(a){this.fragment.unrender(a)};b.prototype.update=function a(){this.dirty=!1;this.fragment.update()};return b}(ix);function ma(a,b){var c=aw('components',a,b),d;if(c){d=c.components[b];if(!d._Parent){var e=d.bind(c);e.isOwner=c.components.hasOwnProperty(b);d=e();if(!d){aq(at,b,'component','component',{ractive:a});return}typeof d==='string'&&(d=ma(a,d));d._fn=e;c.components[b]=d}}return d}var mb={};mb[eg]=iF;mb[ef]=jA;mb[dU]=lC;mb[d_]=lL;mb[dW]=lQ;mb[dV]=l_;mb[ed]=l$;var mc={doctype:jA,form:ly,input:lD,option:lF,select:lS,textarea:lT};function md(a){if(typeof a.template==='string'){return new lU( a )}if(a.template.t===dZ){var b=ma(a.parentFragment.ractive,a.template.e);if(b){return new jz( a, b )}var c=a.template.e.toLowerCase(),d=mc[c]||lq;return new d( a )}var e=mb[a.template.t];if(!e)throw new Error( ("Unrecognised item type "+a.template.t) );return new e( a )}var me=function d(a,b,c){var e=this;this.fragment=a;this.reference=aF(b);this.callback=c;this.keys=aG(b);this.resolved=!1;while(a){a.context&&a.context.addUnresolved(e.keys[0],e),a=a.componentParent||a.parent}};me.prototype.attemptResolution=function a(){if(this.resolved)return;var b=bO(this.fragment,this.reference);b&&(this.resolved=!0,this.callback(b))};me.prototype.forceResolution=function a(){if(this.resolved)return;var b=this.fragment.findContext().joinAll(this.keys);this.callback(b);this.resolved=!0};me.prototype.unbind=function a(){var b=this;aS(this.fragment.unresolved,this);if(this.resolved)return;var c=this.fragment;while(c){c.context&&c.context.removeUnresolved(b.keys[0],b),c=c.componentParent||c.parent}};function mf(a,b,c,d){d===void 0&&(d=0);return a.map(function(a){if(a.type===dT){return a.template}if(a.fragment){if(a.fragment.iterations){return a.fragment.iterations.map(function(a){return mf(a.items,b,c,d)}).join('')}else{return mf(a.fragment.items,b,c,d)}}var e=""+c+"-"+d++;b[e]=a.model?a.model.wrapper?a.model.wrapper.value:a.model.get():undefined;return'${'+e+'}'}).join('')}function mg(a){a.unrender(!0)}var mh=function b(a){this.owner=a.owner;this.isRoot=!a.owner.parentFragment;this.parent=this.isRoot?null:this.owner.parentFragment;this.ractive=a.ractive||(this.isRoot?a.owner:this.parent.ractive);this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null;this.context=null;this.rendered=!1;this.cssIds='cssIds' in a?a.cssIds:(this.parent?this.parent.cssIds:null);this.resolvers=[];this.dirty=!1;this.dirtyArgs=this.dirtyValue=!0;this.template=a.template||[];this.createItems()};mh.prototype.bind=function b(a){this.context=a;this.items.forEach(bU);this.bound=!0;this.dirty&&this.update();return this};mh.prototype.bubble=function a(){this.dirtyArgs=this.dirtyValue=!0;this.dirty||(this.dirty=!0,this.isRoot?(this.ractive.component?this.ractive.component.bubble():this.bound&&bi.addFragment(this)):this.owner.bubble())};mh.prototype.createItems=function a(){var b=this;this.items=this.template.map(function(a,c){return md({parentFragment:b,template:a,index:c})})};mh.prototype.detach=function a(){var b=R();this.items.forEach(function(a){return b.appendChild(a.detach())});return b};mh.prototype.find=function b(a){var c=this,d=this.items.length,e;for(e=0;e<d;e+=1){var f=c.items[e].find(a);if(f)return f}};mh.prototype.findAll=function c(a,b){var d=this;if(this.items){var e=this.items.length,f;for(f=0;f<e;f+=1){var g=d.items[f];g.findAll&&g.findAll(a,b)}}return b};mh.prototype.findComponent=function b(a){var c=this,d=this.items.length,e;for(e=0;e<d;e+=1){var f=c.items[e].findComponent(a);if(f)return f}};mh.prototype.findAllComponents=function c(a,b){var d=this;if(this.items){var e=this.items.length,f;for(f=0;f<e;f+=1){var g=d.items[f];g.findAllComponents&&g.findAllComponents(a,b)}}return b};mh.prototype.findContext=function a(){var b=this;while(!b.context)b=b.parent;return b.context};mh.prototype.findNextNode=function b(a){var c=this;for(var d=a.index+1;d<c.items.length;d++){if(!c.items[d])continue;var e=c.items[d].firstNode(!0);if(e)return e}if(this.isRoot){if(this.ractive.component){return this.ractive.component.parentFragment.findNextNode(this.ractive.component)}return null}return this.owner.findNextNode(this)};mh.prototype.findParentNode=function a(){var b=this;do {if(b.owner.type===dZ){return b.owner.node}if(b.isRoot&&!b.ractive.component){return b.ractive.el}b.owner.type===ed?(b=b.owner.containerFragment):(b=b.componentParent||b.parent)}while(b);throw new Error( 'Could not find parent node' )};mh.prototype.findRepeatingFragment=function a(){var b=this;while(b.parent&&!b.isIteration)b=b.parent||b.componentParent;return b};mh.prototype.firstNode=function b(a){var c=this,d;for(var e=0;e<c.items.length;e++){d=c.items[e].firstNode(!0);if(d){return d}}if(a)return null;return this.parent.findNextNode(this.owner)};mh.prototype.getArgsList=function a(){if(this.dirtyArgs){var b={},c=mf(this.items,b,this.ractive._guid),d=g$('['+c+']',b);this.argsList=d?d.value:[this.toString()];this.dirtyArgs=!1}return this.argsList};mh.prototype.rebind=function b(a){this.context=a;this.items.forEach(bZ)};mh.prototype.render=function c(a,b){if(this.rendered)throw new Error( 'Fragment is already rendered!' );this.rendered=!0;this.items.forEach(function(c){return c.render(a,b)})};mh.prototype.resetTemplate=function b(a){var c=this.bound,d=this.rendered;c&&(d&&this.unrender(!0),this.unbind());this.template=a;this.createItems();if(c){this.bind(this.context);if(d){var e=this.findParentNode(),f=this.parent?this.parent.findNextNode(this.owner):null;if(f){var g=R();this.render(g);e.insertBefore(g,f)}else this.render(e)}}};mh.prototype.resolve=function c(a,b){if(!this.context){return this.parent.resolve(a,b)}var d=new me( this, a, b );this.resolvers.push(d);return d};mh.prototype.toHtml=function a(){return this.toString()};mh.prototype.toString=function b(a){return this.items.map(a?ce:cd).join('')};mh.prototype.unbind=function a(){this.items.forEach(b$);this.bound=!1;return this};mh.prototype.unrender=function b(a){this.items.forEach(a?mg:ca);this.rendered=!1};mh.prototype.update=function a(){this.dirty&&!this.updating&&(this.dirty=!1,this.updating=!0,this.items.forEach(cc),this.updating=!1)};mh.prototype.valueOf=function a(){if(this.items.length===1){return this.items[0].valueOf()}if(this.dirtyValue){var b={},c=mf(this.items,b,this.ractive._guid),d=g$(c,b);this.value=d?d.value:this.toString();this.dirtyValue=!1}return this.value};function mi(a){hP.init(null,this,{template:a});var b=this.transitionsEnabled;this.transitionsEnabled=!1;var c=this.component;c&&(c.shouldDestroy=!0);this.unrender();c&&(c.shouldDestroy=!1);this.fragment.unbind().unrender(!0);this.fragment=new mh({template:this.template,root:this,owner:this});var d=R();this.fragment.bind(this.viewmodel).render(d);this.el.insertBefore(d,this.anchor);this.transitionsEnabled=b}var mj=c_('reverse');function mk(a,b){var c=bi.start(this,!0);if(ad(a)){var d=a;for(var e in d){d.hasOwnProperty(e)&&ml(this,e,d[e])}}else ml(this,a,b);bi.end();return c}function ml(a,b,c){typeof c==='function'&&(c=dC(c,a));if(/\*/.test(b))a.viewmodel.findMatches(aG(b)).forEach(function(a){a.set(c)});else{var d=a.viewmodel.joinAll(aG(b));d.set(c)}}var mm=c_('shift'),mn=c_('sort'),mo=c_('splice');function mp(a,b){return aJ(this,a,(b===undefined?-1:-b))}var mq=new aM( 'teardown' );function mr(){var a=this;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(bV);this.fragment.rendered&&this.el.__ractive_instances__&&aS(this.el.__ractive_instances__,this);this.shouldDestroy=!0;var b=this.fragment.rendered?this.unrender():aY.resolve();Object.keys(this._links).forEach(function(b){return a._links[b].unlink()});mq.fire(this);return b}function ms(a){if(typeof a!=='string'){throw new TypeError( as )}var b;if(/\*/.test(a)){b={};this.viewmodel.findMatches(aG(a)).forEach(function(a){b[a.getKeypath()]=!a.get()});return this.set(b)}return this.set(a,!this.get(a))}function mt(){var a=[this.cssId].concat(this.findAllComponents().map(function(a){return a.cssId})),b=Object.keys(a.reduce(function(a,b){return (a[b]=!0, a)},{}));return di(b)}function mu(){return this.fragment.toString(!0)}function mv(a,b,c){b instanceof HTMLElement||ad(b)&&(c=b);b=b||this.event.node;b||am(("No node was supplied for transition "+a));var d=new kQ( this, b, a, c ),e=bi.start(this,!0);bi.registerTransition(d);bi.end();return e}function mw(a){var b=this._links[a];if(b){b.unlink();delete this._links[a];return this.set(a,b.intialValue)}else{return aY.resolve(!0)}}var mx=new aM( 'unrender' );function my(){if(!this.fragment.rendered){aq('ractive.unrender() was called on a Ractive instance that was not rendered');return aY.resolve()}var a=bi.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this.fragment.unrender(b);aS(this.el.__ractive_instances__,this);mx.fire(this);bi.end();return a}var mz=c_('unshift'),mA=new aM( 'update' );function mB(a){a&&(a=aG(a));var b=a?this.viewmodel.joinAll(a):this.viewmodel;if(b.parent&&b.parent.wrapper)return this.update(b.parent.getKeypath(this));var c=bi.start(this,!0);b.mark();b.registerChange(b.getKeypath(),b.get());if(a){var d=b.parent;while(a.length&&d){d.clearUnresolveds&&d.clearUnresolveds(a.pop()),d=d.parent}}b.notifyUpstream();bi.end();mA.fire(this,b);return c}function mC(a,b){var c=bi.start(this,!0);a?this.viewmodel.joinAll(aG(a)).updateFromBindings(b!==!1):this.viewmodel.updateFromBindings(!0);bi.end();return c}var mD={add:aK,animate:bo,detach:bq,find:br,findAll:bx,findAllComponents:by,findComponent:bz,findContainer:bA,findParent:bB,fire:bM,get:cz,insert:cB,link:cD,merge:cI,observe:cJ,observeList:cN,observeOnce:cR,off:cU,on:cV,once:cW,pop:c$,push:da,render:dm,reset:it,resetPartial:iw,resetTemplate:mi,reverse:mj,set:mk,shift:mm,sort:mn,splice:mo,subtract:mp,teardown:mr,toggle:ms,toCSS:mt,toCss:mt,toHTML:mu,toHtml:mu,transition:mv,unlink:mw,unrender:my,unshift:mz,update:mB,updateModel:mC};function mE(a,b,c){if(c||mF(a,b)){return function(){var c='_super' in this,d=this._super,e;this._super=b;e=a.apply(this,arguments);c&&(this._super=d);return e}}else{return a}}function mF(a,b){return typeof b==='function'&&/_super/.test(a)}function mG(a){var b={};while(a){mH(a,b),mJ(a,b),a._Parent!==mQ?(a=a._Parent):(a=!1)}return b}function mH(a,b){hY.forEach(function(c){mI(c.useDefaults?a.prototype:a,b,c.name)})}function mI(a,b,c){var d,e=Object.keys(a[c]);if(!e.length){return}(d=b[c])||(d=b[c]={});e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]})}function mJ(a,b){Object.keys(a.prototype).forEach(function(c){if(c==='computed'){return}var d=a.prototype[c];if(!(c in b))b[c]=d._method?d._method:d;else if(typeof b[c]==='function'&&typeof d==='function'&&b[c]._method){var e,f=d._method;f&&(d=d._method);e=mE(b[c]._method,d);f&&(e._method=e);b[c]=e}})}function mK(){var a=[],b=arguments.length;while(b--)a[b]=arguments[b];if(!a.length){return mL(this)}else{return a.reduce(mL,this)}}function mL(a,b){b===void 0&&(b={});var c,d;b.prototype instanceof mQ&&(b=mG(b));c=function(a){if(!(this instanceof c))return new c( a );je(this,a||{});jo(this,a||{},{})};d=V(a.prototype);d.constructor=c;X(c,{defaults:{value:d},extend:{value:mK,writable:!0,configurable:!0},_Parent:{value:a}});ij.extend(a,d,b);dE.extend(a,d,b);b.computed&&(d.computed=Y(V(a.prototype.computed),b.computed));c.prototype=d;return c}function mM(a){if(!a||!a._ractive)return{};var b=a._ractive,c=b.fragment.ractive,d=jp(b.fragment),e=d.key,f=d.index,g=b.fragment.findContext();return{ractive:c,keypath:g.getKeypath(c),rootpath:g.getKeypath(),index:f,key:e}}function mN(){var a=[],b=arguments.length;while(b--)a[b]=arguments[b];return a.map(aE).join('.')}function mO(a){return aG(a).map(aH)}var mP='function';if(typeof Date.now!==mP||typeof String.prototype.trim!==mP||typeof Object.keys!==mP||typeof Array.prototype.indexOf!==mP||typeof Array.prototype.forEach!==mP||typeof Array.prototype.map!==mP||typeof Array.prototype.filter!==mP||j&&typeof j.addEventListener!==mP){throw new Error( 'It looks like you\'re attempting to use Ractive.js in an older browser. You\'ll need to use one of the \'legacy builds\' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.' )}function mQ(a){if(!(this instanceof mQ))return new mQ( a );je(this,a||{});jo(this,a||{},{})}Y(mQ.prototype,mD,g);mQ.prototype.constructor=mQ;mQ.defaults=mQ.prototype;X(mQ,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:mK},escapeKey:{value:aE},getNodeInfo:{value:mM},joinKeys:{value:mN},parse:{value:hF},splitKeypath:{value:mO},unescapeKey:{value:aH},getCSS:{value:di},Promise:{value:aY},enhance:{writable:!0,value:!1},svg:{value:z},magic:{value:w},VERSION:{value:'0.8.0-edge'},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:h},events:{writable:!0,value:{}},interpolators:{writable:!0,value:az},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}});return mQ})