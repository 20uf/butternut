var Ractive=function(){var c={el:void 0,append:!1,template:null,delimiters:['{{','}}'],tripleDelimiters:['{{{','}}}'],staticDelimiters:['[[',']]'],staticTripleDelimiters:['[[[',']]]'],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},f={linear ( a){return a},easeIn ( a){return Math.pow(a,3)},easeOut ( a){return Math.pow((a-1),3)+1},easeInOut ( a){if((a/=0.5)<1){return 0.5*Math.pow(a,3)}return 0.5*(Math.pow((a-2),3)+2)}};let g=typeof window!=='undefined'?window:null,h=g?document:null,i=!!h,k=typeof console!=='undefined'&&typeof console.warn==='function'&&typeof console.warn.apply==='function',l;try{Object.defineProperty({},'test',{value:0}),l=!0}catch(a){l=!1};let m=h?h.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure','1.1'):!1,n=['o','ms','moz','webkit'];function o(){}var p;g?(p={},Date.now||(Date.now=function(){return+new Date()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,'').replace(/\s+$/,'')}),Object.create||(Object.create=(function(){var a=function(){};return function(b,c){if(typeof b!=='object'){throw new TypeError( 'Prototype must be an object' )}a.prototype=b;var d=new a();R(d,c);a.prototype=null;return d}})()),Object.defineProperty||(Object.defineProperty=Q),Object.freeze||(Object.freeze=function(){'LOL'}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!({toString:null}).propertyIsEnumerable('toString'),c=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],d=c.length;return function(e){if(typeof e!=='object'&&typeof e!=='function'||e===null){throw new TypeError( 'Object.keys called on non-object' )}var f=[];for(var g in e){a.call(e,g)&&f.push(g)}if(b){for(var h=0;h<d;h++){a.call(e,c[h])&&f.push(c[h])}}return f}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;b===undefined&&(b=0);b<0&&(b+=this.length);b<0&&(b=0);for(c=this.length;b<c;b++){if(this.hasOwnProperty(b)&&this[b]===a){return b}}return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;for(c=0, d=this.length;c<d;c+=1){this.hasOwnProperty(c)&&a.call(b,this[c],c,this)}}),Array.prototype.map||(Array.prototype.map=function(a,b){var c=this,d,e,f=[],g;c instanceof String&&(c=c.toString(),g=!0);for(d=0, e=c.length;d<e;d+=1){(c.hasOwnProperty(d)||g)&&(f[d]=a.call(b,c[d],d,c))}return f}),typeof Array.prototype.reduce!=='function'&&(Array.prototype.reduce=function(a,b){var c,d,e,f;if('function'!==typeof a){throw new TypeError(a+' is not a function')}e=this.length;f=!1;arguments.length>1&&(d=b,f=!0);for(c=0;c<e;c+=1){this.hasOwnProperty(c)?(f&&(d=a(d,this[c],c,this))):(d=this[c],f=!0)}if(!f){throw new TypeError( 'Reduce of empty array with no initial value' )}return d}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c,d,e=[];for(c=0, d=this.length;c<d;c+=1){this.hasOwnProperty(c)&&a.call(b,this[c],c,this)&&(e[e.length]=this[c])}return e}),Array.prototype.every||(Array.prototype.every=function(a,b){var c,d,e;if(this==null){throw new TypeError()}c=Object(this);d=c.length>>>0;if(typeof a!=='function'){throw new TypeError()}for(e=0;e<d;e+=1){if(e in c&&!a.call(b,c[e],e,c)){return !1}}return !0}),typeof Function.prototype.bind!=='function'&&(Function.prototype.bind=function(a){var b,c,d,e,f=[].slice;if(typeof this!=='function'){throw new TypeError( 'Function.prototype.bind called on non-function' )}b=f.call(arguments,1);c=this;d=function(){};e=function(){var e=this instanceof d&&a?this:a;return c.apply(e,b.concat(f.call(arguments)))};d.prototype=this.prototype;e.prototype=new d();return e}),g.addEventListener||((function(a,b){var c,d,f,g,h,i;a.appearsToBeIELessEqual8=!0;c=function(a,b){var c,d=this;for(c in a)d[c]=a[c];d.currentTarget=b;d.target=a.srcElement||b;d.timeStamp=+new Date();d.preventDefault=function(){a.returnValue=!1};d.stopPropagation=function(){a.cancelBubble=!0}};d=function(a,b){var d=this,f,g;f=d.listeners||(d.listeners=[]);g=f.length;f[g]=[b,function(a){b.call(d,new c( a, d ))}];d.attachEvent('on'+a,f[g][1])};f=function(a,b){var c=this,d,e;if(!c.listeners){return}d=c.listeners;e=d.length;while(e--){d[e][0]===b&&c.detachEvent('on'+a,d[e][1])}};a.addEventListener=b.addEventListener=d;a.removeEventListener=b.removeEventListener=f;'Element' in a?(a.Element.prototype.addEventListener=d,a.Element.prototype.removeEventListener=f):(i=b.createElement,b.createElement=function(a){var b=i(a);b.addEventListener=d;b.removeEventListener=f;return b},g=b.getElementsByTagName('head')[0],h=b.createElement('style'),g.insertBefore(h,g.firstChild))})(g,h)),g.getComputedStyle||(p.getComputedStyle=function(){var a={};function b(a,d,e,f){let g=d[e],h=parseFloat(g),i=g.split(/\d/)[0];isNaN(h)&&(/^thin|medium|thick$/.test(g)&&(h=c(g),i=''));f=f!=null?f:/%|em/.test(i)&&a.parentElement?b(a.parentElement,a.parentElement.currentStyle,'fontSize',null):16;let j=e=='fontSize'?f:/width/i.test(e)?a.clientWidth:a.clientHeight;returni=='em'?h*f:i=='in'?h*96:i=='pt'?h*96/72:i=='%'?h/100*j:h}function c(b){var c,d;a[b]||(c=h.createElement('div'),c.style.display='block',c.style.position='fixed',c.style.width=c.style.height='0',c.style.borderRight=b+' solid black',h.getElementsByTagName('body')[0].appendChild(c),d=c.getBoundingClientRect(),a[b]=d.right-d.left);return a[b]}function d(a,b){let c=b=='border'?'Width':'',d=`${b}Top${c}`,e=`${b}Right${c}`,f=`${b}Bottom${c}`,g=`${b}Left${c}`;a[b]=(a[d]==a[e]==a[f]==a[g]?[a[d]]:a[d]==a[f]&&a[g]==a[e]?[a[d],a[e]]:a[g]==a[e]?[a[d],a[e],a[f]]:[a[d],a[e],a[f],a[g]]).join(' ')}var e={fontWeight:400,lineHeight:1.2,letterSpacing:0};function f(a){var c,f,g,h;c=a.currentStyle;f=this;g=b(a,c,'fontSize',null);for(h in c){c[h]==='normal'&&e.hasOwnProperty(h)?(f[h]=e[h]):/width|height|margin.|padding.|border.+W/.test(h)?(c[h]==='auto'?(/^width|height/.test(h)?(f[h]=(h==='width'?a.clientWidth:a.clientHeight)+'px'):/(?:padding)?Top|Bottom$/.test(h)&&(f[h]='0px')):(f[h]=b(a,c,h,g)+'px')):h==='styleFloat'?(f.float=c[h]):(f[h]=c[h])}d(f,'margin');d(f,'padding');d(f,'border');f.fontSize=g+'px';return f}f.prototype={constructor:f,getPropertyPriority:o,getPropertyValue:function(a){return this[a]||''},item:o,removeProperty:o,setProperty:o,getPropertyCSSValue:o};function g(a){return new f(a)}return g}())):(p=null);var q=p;let s='http://www.w3.org/1999/xhtml',u='http://www.w3.org/1998/Math/MathML',v='http://www.w3.org/2000/svg',w='http://www.w3.org/1999/xlink',z='http://www.w3.org/XML/1998/namespace',A='http://www.w3.org/2000/xmlns';var B={s,u,svg:v,w,z,A},C,D,E,F,G,H,I,J,K;m?(C=(a,b,c)=>{if(!b||b===s){return c?h.createElement(a,c):h.createElement(a)}return c?h.createElementNS(b,a,c):h.createElementNS(b,a)}):(C=(a,b,c)=>{if(b&&b!==s){throw 'This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you\'re trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information'}return c?h.createElement(a,c):h.createElement(a)});function L(){return h.createDocumentFragment()}function M(a){var b;if(!a||typeof a==='boolean'){return}if(!g||!h||!a){return null}if(a.nodeType){return a}if(typeof a==='string'){b=h.getElementById(a);!b&&h.querySelector&&(b=h.querySelector(a));if(b&&b.nodeType){return b}}if(a[0]&&a[0].nodeType){return a[0]}return null}if(!i)D=null;else{E=C('div');F=['matches','matchesSelector'];K=function(a){return function(b,c){return b[a](c)}};I=F.length;while(I--&&!D){G=F[I];if(E[G])D=K(G);else{J=n.length;while(J--){H=n[I]+G.substr(0,1).toUpperCase()+G.substring(1);if(E[H]){D=K(H);break}}}}D||(D=function(a,b){var c,d,e;d=a.parentNode;d||(E.innerHTML='',d=E,a=a.cloneNode(),E.appendChild(a));c=d.querySelectorAll(b);e=c.length;while(e--){if(c[e]===a){return !0}}return !1})}function N(a){a&&typeof a.parentNode!=='unknown'&&a.parentNode&&a.parentNode.removeChild(a);return a}function O(a){returna==null||!a.toString?'':''+a}var P,Q,R;try{Object.defineProperty({},'test',{get() {},set() {}}),h&&Object.defineProperty(C('div'),'test',{value:0}),Q=Object.defineProperty}catch(a){Q=function(a,b,c){a[b]=c.value}};try{try{Object.defineProperties({},{test:{value:0}})}catch(a){throw a};h&&Object.defineProperties(C('div'),{test:{value:0}});R=Object.defineProperties}catch(a){R=function(a,b){var c;for(c in b){b.hasOwnProperty(c)&&Q(a,c,b[c])}}};try{Object.create(null),P=Object.create}catch(a){P=function(){var a=function(){};return function(b,c){var d;if(b===null){return{}}a.prototype=b;d=new a();c&&Object.defineProperties(d,c);return d}}()};function S(a,...b){var c;b.forEach(b=>{for(c in b){U.call(b,c)&&(a[c]=b[c])}});return a}function T(a,...b){b.forEach(b=>{for(let c in b){U.call(b,c)&&!(c in a)&&(a[c]=b[c])}});return a}var U=Object.prototype.hasOwnProperty,V=Object.prototype.toString;function W(a){return V.call(a)==='[object Array]'}function X(a,b){if(a===null&&b===null){return !0}if(typeof a==='object'||typeof b==='object'){return !1}return a===b}function Y(a){return!isNaN(parseFloat(a))&&isFinite(a)}function Z(a){return a&&V.call(a)==='[object Object]'}var _={},$,aa,ab;if(k){let a=["%cRactive.js %c<@version@> %cin debug mode, %cmore...",'color: rgb(114, 157, 52); font-weight: normal;','color: rgb(85, 85, 85); font-weight: normal;','color: rgb(85, 85, 85); font-weight: normal;','color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;'],b="You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";ab=()=>{let c=!!console.groupCollapsed;console[c?'groupCollapsed':'log'].apply(console,a);console.log(b);c&&console.groupEnd(a);ab=o};aa=(a,b)=>{ab();if(typeof b[b.length-1]==='object'){let c=b.pop(),d=c?c.ractive:null;if(d){let e;d.component&&(e=d.component.name)&&(a=`<${e}> ${a}`);let f;(f=c.node||d.fragment&&d.fragment.rendered&&d.find('*'))&&b.push(f)}}console.warn.apply(console,['%cRactive.js: %c'+a,'color: rgb(114, 157, 52);','color: rgb(85, 85, 85);'].concat(b))};$=function(){console.log.apply(console,arguments)}}else aa=$=ab=o;function ac(a,b){return a.replace(/%s/g,()=>b.shift())}function ad(a,...b){a=ac(a,b);throw new Error( a )}function ae(){ms.DEBUG&&$.apply(null,arguments)}function af(a,...b){a=ac(a,b);aa(a,b)}function ag(a,...b){a=ac(a,b);if(_[a]){return}_[a]=!0;aa(a,b)}function ah(){ms.DEBUG&&af.apply(null,arguments)}function ai(){ms.DEBUG&&ag.apply(null,arguments)}var aj='Bad arguments',ak='A function was specified for "%s" %s, but no %s was returned',al=(a,b)=>`Missing "${a}" ${b} plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#${b}s`;function am(a,b,c){var d=an(a,b,c);return d?d[a][c]:null}function an(a,b,c){while(b){if(c in b[a]){return b}if(b.isolated){return null}b=b.parent}}function ao(a,b,c,d){if(a===b)return null;if(d){let e=am('interpolators',c,d);if(e)return e(a,b)||null;ad(al(d,'interpolator'))}return aq.number(a,b)||aq.array(a,b)||aq.object(a,b)||null}function ap(a){return()=>a}var aq={number:function(a,b){var c;if(!Y(a)||!Y(b)){return null}a=+a;b=+b;c=b-a;if(!c){return function(){return a}}return function(b){return a+b*c}},array:function(a,b){var c,d,e,f;if(!W(a)||!W(b)){return null}c=[];d=[];f=e=Math.min(a.length,b.length);while(f--)d[f]=ao(a[f],b[f]);for(f=e;f<a.length;f+=1)c[f]=a[f];for(f=e;f<b.length;f+=1)c[f]=b[f];return function(a){var b=e;while(b--)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!Z(a)||!Z(b)){return null}c=[];f={};e={};for(g in a){U.call(a,g)&&(U.call(b,g)?(c.push(g),e[g]=ao(a[g],b[g])||ap(b[g])):(f[g]=a[g]))}for(g in b){U.call(b,g)&&!U.call(a,g)&&(f[g]=b[g])}d=c.length;return function(a){var b=d,g;while(b--){g=c[b],f[g]=e[g](a)}return f}}};let ar=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,as=/([^\\](?:\\\\)*)\./,at=/\\|\./g,au=/((?:\\)+)\1|\\(\.)/g;function av(a){if(typeof a==='string'){return a.replace(at,'\\$&')}return a}function aw(a){return a?a.replace(ar,'.$1'):''}function ax(a){let b=[],c;a=aw(a);while(c=as.exec(a)){let d=c.index+c[1].length;b.push(a.substr(0,d));a=a.substr(d+1)}b.push(a);return b}function ay(a){if(typeof a==='string'){return a.replace(au,'$1$2')}return a}let az='Cannot add to a non-numeric value';function aA(a,b,c){if(typeof b!=='string'||!Y(c)){throw new Error( 'Bad arguments' )}let d;if(/\*/.test(b)){d={};a.viewmodel.findMatches(ax(b)).forEach(a=>{let b=a.get();if(!Y(b))throw new Error( az );d[a.getKeypath()]=b+c});return a.set(d)}let e=a.get(b);if(!Y(e)){throw new Error( az )}return a.set(b,+e+c)}function aB(a,b){return aA(this,a,(b===undefined?1:+b))}let aC={construct:{deprecated:'beforeInit',replacement:'onconstruct'},render:{deprecated:'init',message:"The \"init\" method has been deprecated and will likely be removed in a future release. You can either use the \"oninit\" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use \"onrender\" instead. See http://docs.ractivejs.org/latest/migrating for more information."},complete:{deprecated:'complete',replacement:'oncomplete'}};class aD{constructor(a){this.event=a;this.method='on'+a;this.deprecate=aC[a]}call(a,b,c){if(b[a]){c?b[a](c):b[a]();return !0}}fire(a,b){this.call(this.method,a,b);!a[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,a,b)&&(this.deprecate.message?ah(this.deprecate.message):ah('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));b?a.fire(this.event,b):a.fire(this.event)}}function aE(a,b){var c=a.indexOf(b);c===-1&&a.push(b)}function aF(a,b){for(let c=0,d=a.length;c<d;c++){if(a[c]==b){return !0}}return !1}function aG(a,b){var c;if(!W(a)||!W(b)){return !1}if(a.length!==b.length){return !1}c=a.length;while(c--){if(a[c]!==b[c]){return !1}}return !0}function aH(a){if(typeof a==='string'){return[a]}if(a===undefined){return[]}return a}function aI(a){return a[a.length-1]}function aJ(a,b){if(!a){return}let c=a.indexOf(b);c!==-1&&a.splice(c,1)}function aK(a){var b=[],c=a.length;while(c--)b[c]=a[c];return b}var aL,aM={},aN={},aO={};typeof Promise==='function'?(aL=Promise):(aL=function(a){var b=[],c=[],d=aM,e,f,g,h,i,j;g=function(a){return function(g){if(d!==aM){return}e=g;d=a;f=aR((d===aN?b:c),e);aQ(f)}};h=g(aN);i=g(aO);try{a(h,i)}catch(a){i(a)};j={then:function(a,e){var g=new aL( function(h,i){var j=function(a,b,c){typeof a==='function'?b.push(function(b){var c;try{c=a(b),aS(g,c,h,i)}catch(a){i(a)}}):b.push(c)};j(a,b,h);j(e,c,i);d!==aM&&aQ(f)});return g}};j['catch']=function(a){return this.then(null,a)};return j},aL.all=function(a){return new aL( function(b,c){var d=[],e,f,g;if(!a.length){b(d);return}g=(a,f)=>{a&&typeof a.then==='function'?a.then(a=>{d[f]=a;--e||b(d)},c):(d[f]=a,--e||b(d))};e=f=a.length;while(f--)g(a[f],f)})},aL.resolve=function(a){return new aL( function(b){b(a)})},aL.reject=function(a){return new aL( function(b,c){c(a)})});var aP=aL;function aQ(a){setTimeout(a,0)}function aR(a,b){return function(){var c;while(c=a.shift())c(b)}}function aS(a,b,c,d){var f;if(b===a){throw new TypeError( 'A promise\'s fulfillment handler cannot return the same promise' )}if(b instanceof aL)b.then(c,d);else if(b&&(typeof b==='object'||typeof b==='function')){try{f=b.then}catch(a){d(a);return};if(typeof f==='function'){var g,h,i;h=function(b){if(g){return}g=!0;aS(a,b,c,d)};i=function(a){if(g){return}g=!0;d(a)};try{f.call(b,h,i)}catch(a){if(!g){d(a);g=!0;return}}}else c(b)}else c(b)}class aT{constructor(a,b){this.callback=a;this.parent=b;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.outrosComplete=!1;b&&b.addChild(this)}add(a){var b=a.isIntro?this.intros:this.outros;b.push(a)}addChild(a){this.children.push(a);this.totalChildren+=1;this.outroChildren+=1}decrementOutros(){this.outroChildren-=1;aW(this)}decrementTotal(){this.totalChildren-=1;aW(this)}detachNodes(){this.detachQueue.forEach(aU);this.children.forEach(aV)}remove(a){var b=a.isIntro?this.intros:this.outros;aJ(b,a);aW(this)}start(){aX(this);this.intros.concat(this.outros).forEach(a=>a.start());this.ready=!0;aW(this)}}function aU(a){a.detach()}function aV(a){a.detachNodes()}function aW(a){if(!a.ready||a.outros.length||a.outroChildren)return;a.outrosComplete||(a.parent&&!a.parent.outrosComplete?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0);!a.intros.length&&!a.totalChildren&&(typeof a.callback==='function'&&a.callback(),a.parent&&a.parent.decrementTotal())}function aX(a){let b=a.detachQueue,c=aY(a),d=b.length,e=0,f,g;start: while(d--){f=b[d].node;e=c.length;while(e--){g=c[e].node;if(g===f||g.contains(f)||f.contains(g))continue start}b[d].detach();b.splice(d,1)}}function aY(a,b){if(!b){b=[];let c=a;while(c.parent)c=c.parent;return aY(c,b)}else{let c=a.children.length;while(c--)b=aY(a.children[c],b);b=b.concat(a.outros);return b}}let aZ=new aD( 'change' ),a_,a$={start ( a,b){var c,d;b&&(c=new aP( a=>d=a ));a_={previousBatch:a_,transitionManager:new aT( d, a_&&a_.transitionManager ),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],ractives:[],instance:a};return c},end () {bb();a_=a_.previousBatch},addFragment ( a){aE(a_.fragments,a)},addInstance ( a){a_&&aE(a_.ractives,a)},addObserver ( a,b){aE(b?a_.deferredObservers:a_.immediateObservers,a)},registerTransition ( a){a._manager=a_.transitionManager;a_.transitionManager.add(a)},detachWhenReady ( a){a_.transitionManager.detachQueue.push(a)},scheduleTask ( a,b){var c;if(!a_)a();else{c=a_;while(b&&c.previousBatch)c=c.previousBatch;c.tasks.push(a)}}};function ba(a){a.dispatch()}function bb(){let a=a_.immediateObservers;a_.immediateObservers=[];a.forEach(ba);let b=a_.fragments.length,c;a=a_.fragments;a_.fragments=[];let d=a_.ractives;a_.ractives=[];while(b--){c=a[b];let e=c.ractive;aZ.fire(e,e.viewmodel.changes);e.viewmodel.changes={};aJ(d,e);c.update()}b=d.length;while(b--){let a=d[b];aZ.fire(a,a.viewmodel.changes);a.viewmodel.changes={}}a_.transitionManager.start();a=a_.deferredObservers;a_.deferredObservers=[];a.forEach(ba);let e=a_.tasks;a_.tasks=[];for(b=0;b<e.length;b+=1)e[b]();if(a_.fragments.length||a_.immediateObservers.length||a_.deferredObservers.length||a_.ractives.length)return bb()}let bc=aP.resolve();Q(bc,'stop',{value:o});let bd=f.linear;function be(a,b){a=a||{};let c;a.easing&&(c=typeof a.easing==='function'?a.easing:b.easing[a.easing]);return{easing:c||bd,duration:'duration' in a?a.duration:400,complete:a.complete||o,step:a.step||o}}function bf(a,b,c){if(typeof a==='object'){let b=Object.keys(a);throw new Error( `ractive.animate(...) no longer supports objects. Instead of ractive.animate({
  ${b.map( key => `'${key}': ${a[ key ]}` ).join( '\n  ' )}
}, {...}), do

${b.map( key => `ractive.animate('${key}', ${a[ key ]}, {...});` ).join( '\n' )}
` )}c=be(c,this);let d=this.viewmodel.joinAll(ax(a)),e=d.get();if(X(e,b)){c.complete(c.to);return bc}let f=ao(e,b,this,c.interpolator);if(!f){a$.start();d.set(b);a$.end();return bc}return d.animate(e,b,c,f)}let bg=new aD( 'detach' );function bh(){if(this.isDetached){return this.el}this.el&&aJ(this.el.__ractive_instances__,this);this.el=this.fragment.detach();this.isDetached=!0;bg.fire(this);return this.el}function bi(a){if(!this.el)throw new Error( `Cannot call ractive.find('${a}') unless instance is rendered to the DOM` );return this.fragment.find(a)}function bj(a,b){if(a.compareDocumentPosition){let c=a.compareDocumentPosition(b);returnc&2?1:-1}return bk(a,b)}function bk(a,b){let c=bm(a.component||a._ractive.proxy),d=bm(b.component||b._ractive.proxy),e=aI(c),f=aI(d),g;while(e&&e===f){c.pop(),d.pop(),g=e,e=aI(c),f=aI(d)}e=e.component||e;f=f.component||f;let h=e.parentFragment,i=f.parentFragment;if(h===i){let a=h.items.indexOf(e),b=i.items.indexOf(f);returna-b||c.length-d.length}let j=g.iterations;if(j){let a=j.indexOf(h),b=j.indexOf(i);returna-b||c.length-d.length}throw new Error( 'An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!' )}function bl(a){let b=a.parentFragment;if(b)return b.owner;if(a.component&&(b=a.component.parentFragment)){return b.owner}}function bm(a){let b=[a],c=bl(a);while(c){b.push(c),c=bl(c)}return b}class bn{constructor(a,b,c,d){this.ractive=a;this.selector=b;this.live=c;this.isComponentQuery=d;this.result=[];this.dirty=!0}add(a){this.result.push(a);this.makeDirty()}cancel(){let a=this._root[this.isComponentQuery?'liveComponentQueries':'liveQueries'],b=this.selector,c=a.indexOf(b);c!==-1&&(a.splice(c,1),a[b]=null)}init(){this.dirty=!1}makeDirty(){this.dirty||(this.dirty=!0,a$.scheduleTask(()=>this.update()))}remove(a){let b=this.result.indexOf(this.isComponentQuery?a.instance:a);b!==-1&&this.result.splice(b,1)}update(){this.result.sort(this.isComponentQuery?bk:bj);this.dirty=!1}test(a){return this.isComponentQuery?!this.selector||a.name===this.selector:(a?D(a,this.selector):null)}}function bo(a,b){if(!this.el)throw new Error( `Cannot call ractive.findAll('${a}', ...) unless instance is rendered to the DOM` );b=b||{};let c=this._liveQueries,d=c[a];if(d){returnb&&b.live?d:d.slice()}d=new bn( this, a, !!b.live, !1 );d.live&&(c.push(a),c['_'+a]=d);this.fragment.findAll(a,d);d.init();return d.result}function bp(a,b){b=b||{};let c=this._liveComponentQueries,d=c[a];if(d){returnb&&b.live?d:d.slice()}d=new bn( this, a, !!b.live, !0 );d.live&&(c.push(a),c['_'+a]=d);this.fragment.findAllComponents(a,d);d.init();return d.result}function bq(a){return this.fragment.findComponent(a)}function br(a){if(this.container){if(this.container.component&&this.container.component.name===a){return this.container}else{return this.container.findContainer(a)}}return null}function bs(a){if(this.parent){if(this.parent.component&&this.parent.component.name===a){return this.parent}else{return this.parent.findParent(a)}}return null}function bt(a,b){a.event&&a._eventQueue.push(a.event);a.event=b}function bu(a){a._eventQueue.length?(a.event=a._eventQueue.pop()):(a.event=null)}var bv={};function bw(a){var b,c,d,e,f,g;b=ax(a);(c=bv[b.length])||(c=bx(b.length));f=[];d=function(a,c){return a?'*':b[c]};e=c.length;while(e--){g=c[e].map(d).join('.'),f.hasOwnProperty(g)||(f.push(g),f[g]=!0)}return f}function bx(a){var b='',c,d,e,f,g,h,i,j;if(!bv[a]){e=[];while(b.length<a)b+=1;c=parseInt(b,2);f=function(a){return a==='1'};for(g=0;g<=c;g+=1){d=g.toString(2);while(d.length<a)d='0'+d;j=[];i=d.length;for(h=0;h<i;h++)j.push(f(d[h]));e[g]=j}bv[a]=e}return bv[a]}var by={};function bz(a,b,c = {}){if(!b){return}c.event?(c.event.name=b):(c.event={name:b,_noArg:!0});var d=bA(b);bB(a,d,c.event,c.args,!0)}function bA(a){if(by.hasOwnProperty(a)){return by[a]}else{return by[a]=bw(a)}}function bB(a,b,c,d,e = !1){var f,g,h=!0;bt(a,c);for(g=b.length;g>=0;g--){f=a._subs[b[g]],f&&(h=bC(a,f,c,d)&&h)}bu(a);if(a.parent&&h){if(e&&a.component){let d=a.component.name+'.'+b[b.length-1];b=bA(d);c&&!c.component&&(c.component=a)}bB(a.parent,b,c,d)}}function bC(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d));b=b.slice();for(let g=0,h=b.length;g<h;g+=1){b[g].apply(a,d)===!1&&(f=!0)}c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation());return!f}function bD(a,...b){bz(this,a,{b})}function bE(a){throw new Error( `An index or key reference (${a}) cannot have child properties` )}function bF(a,b){let c=a.findContext().root,d=ax(b),e=d[0],f,g,h;while(a){if(a.isIteration){if(e===a.parent.keyRef){d.length>1&&bE(e);return a.context.getKeyModel()}if(e===a.parent.indexRef){d.length>1&&bE(e);return a.context.getIndexModel(a.index)}}if(((h=a.owner.aliases)||(h=a.aliases))&&h.hasOwnProperty(e)){let a=h[e];if(d.length===1)return a;else if(typeof a.joinAll==='function'){return a.joinAll(d.slice(1))}}if(a.context){(!a.isRoot||a.ractive.component)&&(f=!0);if(a.context.has(e)){g&&c.map(e,a.context.joinKey(e));return a.context.joinAll(d)}}a.componentParent&&!a.ractive.isolated?(a=a.componentParent,g=!0):(a=a.parent)}if(!f){return c.joinAll(d)}}let bG=[],bH;function bI(){bG.push(bH=[])}function bJ(){let a=bG.pop();bH=bG[bG.length-1];return a}function bK(a){bH&&bH.push(a)}function bL(a){a.bind()}function bM(a){a.cancel()}function bN(a){a.handleChange()}function bO(a){a.mark()}function bP(a){a.render()}function bQ(a){a.rebind()}function bR(a){a.teardown()}function bS(a){a.unbind()}function bT(a){a.unrender()}function bU(a){a.unrender(!0)}function bV(a){a.update()}function bW(a){return a.toString()}function bX(a){return a.toString(!0)}var bY;g?(!function(a,b,c){var d,e;if(c.requestAnimationFrame){return}for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+'RequestAnimationFrame'];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;c=Date.now();d=Math.max(0,16-(c-b));f=e(function(){a(c+d)},d);b=c+d;return f})}(n,0,g),bY=g.requestAnimationFrame):(bY=null);var bZ=bY;let b_=g&&g.performance&&typeof g.performance.now==='function'?()=>g.performance.now():()=>Date.now(),b$=[],ca=!1;function cb(){a$.start();let a=b_(),b,c;for(b=0;b<b$.length;b+=1){c=b$[b],c.tick(a)||b$.splice(b--,1)}a$.end();b$.length?bZ(cb):(ca=!1)}class cc{constructor(a){this.duration=a.duration;this.step=a.step;this.complete=a.complete;this.easing=a.easing;this.start=b_();this.end=this.start+this.duration;this.running=!0;b$.push(this);ca||bZ(cb)}tick(a){if(!this.running)return !1;if(a>this.end){this.step&&this.step(1);this.complete&&this.complete(1);return !1}let b=a-this.start,c=this.easing(b/this.duration);this.step&&this.step(c);return !0}stop(){this.abort&&this.abort();this.running=!1}}let cd={};function ce(a,b){var c={},d;if(!b){return a}b+='.';for(d in a){a.hasOwnProperty(d)&&(c[b+d]=a[d])}return c}function cf(a){var b;cd[a]||(b=a?a+'.':'',cd[a]=function(c,d){var e;if(typeof c==='string'){e={};e[b+c]=d;return e}if(typeof c==='object'){return b?ce(c,a):c}});return cd[a]}class cg{constructor(a){this.value=a;this.isReadonly=!0;this.dependants=[]}get(){return ay(this.value)}getKeypath(){return ay(this.value)}rebind(a){this.value=a;this.dependants.forEach(bN)}register(a){this.dependants.push(a)}unregister(a){aJ(this.dependants,a)}}class ch{constructor(a,b){this.parent=a;this.ractive=b;this.value=b?a.getKeypath(b):a.getKeypath();this.dependants=[];this.children=[]}addChild(a){this.children.push(a);a.owner=this}get(){return this.value}getKeypath(){return this.value}handleChange(){this.value=this.ractive?this.parent.getKeypath(this.ractive):this.parent.getKeypath();this.ractive&&this.owner&&(this.ractive.viewmodel.keypathModels[this.owner.value]=this);this.children.forEach(bN);this.dependants.forEach(bN)}register(a){this.dependants.push(a)}removeChild(a){aJ(this.children,a)}teardown(){this.owner&&this.owner.removeChild(this);this.children.forEach(bR)}unregister(a){aJ(this.dependants,a)}}let ci=Object.prototype.hasOwnProperty;function cj(a){a.updateFromBindings(!0)}function ck(a){a.updateKeypathDependants()}let cl=null;class cm{constructor(a,b){this.deps=[];this.children=[];this.childByKey={};this.indexModels=[];this.unresolved=[];this.unresolvedByKey={};this.bindings=[];this.patternObservers=[];this.value=undefined;this.ticker=null;a&&(this.parent=a,this.root=a.root,this.key=ay(b),this.isReadonly=a.isReadonly,a.value&&(this.value=a.value[this.key],this.adapt()))}adapt(){let a=this.root.adaptors,b=a.length;this.rewrap=!1;if(b===0)return;let c=this.value,d=this.root.ractive,e=this.getKeypath();if(this.wrapper){let a=!this.wrapper.reset||this.wrapper.reset(c)===!1;if(a){this.wrapper.teardown();this.wrapper=null;if(this.value!==undefined){let a=this.parent.value||this.parent.createBranch(this.key);a[this.key]!==this.value&&(a[this.key]=c)}}else{this.value=this.wrapper.get();return}}let f;for(f=0;f<b;f+=1){let b=a[f];if(b.filter(c,e,d)){this.wrapper=b.wrap(d,c,e,cf(e));this.wrapper.value=this.value;this.wrapper.__model=this;this.value=this.wrapper.get();break}}}addUnresolved(a,b){this.unresolvedByKey[a]||(this.unresolved.push(a),this.unresolvedByKey[a]=[]);this.unresolvedByKey[a].push(b)}animate(a,b,c,d){this.ticker&&this.ticker.stop();let e,f=new aP( a=>e=a );this.ticker=new cc({duration:c.duration,easing:c.easing,step:a=>{let b=d(a);this.applyValue(b);c.step&&c.step(a,b)},complete:()=>{this.applyValue(b);c.complete&&c.complete(b);this.ticker=null;e()}});f.stop=this.ticker.stop;return f}applyValue(a){if(X(a,this.value))return;this.registerChange(this.getKeypath(),a);if(this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,a),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.adapt();else if(this.wrapper)this.value=a,this.adapt();else{let b=this.parent.value||this.parent.createBranch(this.key);b[this.key]=a;this.value=a;this.adapt()}this.parent.clearUnresolveds();this.clearUnresolveds();let b=cl;cl=this;this.children.forEach(bO);this.deps.forEach(bN);this.notifyUpstream();cl=b}clearUnresolveds(a){let b=this.unresolved.length;while(b--){let c=this.unresolved[b];if(a&&c!==a)continue;let d=this.unresolvedByKey[c],e=this.has(c),f=d.length;while(f--){e&&d[f].attemptResolution(),d[f].resolved&&d.splice(f,1)}d.length||(this.unresolved.splice(b,1),this.unresolvedByKey[c]=null)}}createBranch(a){let b=Y(a)?[]:{};this.set(b);return b}findMatches(a){let b=a.length,c=[this],d,e;for(e=0;e<b;e+=1){let b=a[e];b==='*'?(d=[],c.forEach(a=>{d.push.apply(d,a.getValueChildren(a.get()))})):(d=c.map(a=>a.joinKey(b)));c=d}return d}get(a){a&&bK(this);return this.value}getIndexModel(a){let b=this.parent.indexModels;if(typeof this.key==='string'&&a!==undefined){return new cg( a )}else b[this.key]||(b[this.key]=new cg( this.key ));return b[this.key]}getKeyModel(){return new cg( av(this.key) )}getKeypathModel(a){let b=this.getKeypath(),c=this.keypathModel||(this.keypathModel=new ch( this ));if(a&&a.component){let d=this.getKeypath(a);if(d!==b){let d=a.viewmodel.keypathModels||(a.viewmodel.keypathModels={}),e=d[b]||(d[b]=new ch( this, a ));c.addChild(e);return e}}return c}getKeypath(a){let b=this.parent.isRoot?av(this.key):this.parent.getKeypath()+'.'+av(this.key);if(a&&a.component){let c=a.viewmodel.mappings;for(let d in c){if(b.indexOf(c[d].getKeypath())>=0){b=b.replace(c[d].getKeypath(),d);break}}}return b}getValueChildren(a){let b;if(W(a))b=[],cl&&cl.parent===this&&cl.key==='length'&&b.push(cl),a.forEach((a,c)=>{b.push(this.joinKey(c))});else if(Z(a)||typeof a==='function')b=Object.keys(a).map(a=>this.joinKey(a));else if(a!=null){return[]}return b}has(a){let b=this.get();if(!b)return !1;a=ay(a);if(ci.call(b,a))return !0;let c=b.constructor;while(c!==Function&&c!==Array&&c!==Object){if(ci.call(c.prototype,a))return !0;c=c.constructor}return !1}joinKey(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){let b=new cm( this, a );this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]}joinAll(a){let b=this;for(let c=0;c<a.length;c+=1)b=b.joinKey(a[c]);return b}mark(){let a=this.retrieve();if(!X(a,this.value)){let b=this.value;this.value=a;(b!==a||this.rewrap)&&this.adapt();this.children.forEach(bO);this.deps.forEach(bN);this.clearUnresolveds()}}merge(a,b){let c=b?this.value.map(b):this.value,d=b?a.map(b):a,e=c.length,f={},g=0,h=c.map(a=>{let b,c=g;do {b=d.indexOf(a,c);if(b===-1){return-1}c=b+1}while(f[b]===!0&&c<e);b===g&&(g+=1);f[b]=!0;return b});this.parent.value[this.key]=a;this._merged=!0;this.shuffle(h)}notifyUpstream(){let a=this.parent,b=this;while(a){a.patternObservers.length&&a.patternObservers.forEach(a=>a.notify(b.key)),a.deps.forEach(bN),b=a,a=a.parent}}register(a){this.deps.push(a)}registerChange(a,b){this.isRoot?(this.changes[a]=b,a$.addInstance(this.root.ractive)):this.root.registerChange(a,b)}registerPatternObserver(a){this.patternObservers.push(a);this.register(a)}registerTwowayBinding(a){this.bindings.push(a)}removeUnresolved(a,b){let c=this.unresolvedByKey[a];c&&aJ(c,b)}retrieve(){return this.parent.value?this.parent.value[this.key]:undefined}set(a){this.ticker&&this.ticker.stop();this.applyValue(a)}shuffle(a){let b=[];a.forEach((a,c)=>{a!==c&&this.childByKey[c]&&this.childByKey[c].shuffled();if(!~a)return;let d=this.indexModels[c];if(!d)return;b[a]=d;a!==c&&d.rebind(a)});this.indexModels=b;this.deps.forEach(b=>{b.shuffle&&b.shuffle(a)});this.updateKeypathDependants();this.mark();this.deps.forEach(a=>{a.shuffle||a.handleChange()})}shuffled(){let a=this.children.length;while(a--)this.children[a].shuffled();this.wrapper&&(this.wrapper.teardown(),this.wrapper=null,this.rewrap=!0)}teardown(){this.children.forEach(bR);this.wrapper&&this.wrapper.teardown();if(this.keypathModels){for(let a in this.keypathModels)this.keypathModels[a].teardown()}}unregister(a){aJ(this.deps,a)}unregisterPatternObserver(a){aJ(this.patternObservers,a);this.unregister(a)}unregisterTwowayBinding(a){aJ(this.bindings,a)}updateFromBindings(a){let b=this.bindings.length;while(b--){let a=this.bindings[b].getValue();a!==this.value&&this.set(a)}a&&this.children.forEach(cj)}updateKeypathDependants(){this.children.forEach(ck);this.keypathModel&&this.keypathModel.handleChange()}}class cn extends cm{constructor(){super(null,'@global');this.value=typeof global!=='undefined'?global:window;this.isRoot=!0;this.root=this;this.adaptors=[]}getKeypath(){return'@global'}registerChange(){}}var co=new cn();function cp(a,b){let c=a.findContext();if(b==='.'||b==='this')return c;if(b==='@keypath')return c.getKeypathModel(a.ractive);if(b==='@rootpath')return c.getKeypathModel();if(b==='@index'){let b=a.findRepeatingFragment();if(!b.isIteration)return;return b.context.getIndexModel(b.index)}if(b==='@key')return a.findRepeatingFragment().context.getKeyModel();if(b==='@ractive'){return a.ractive.viewmodel.getRactiveModel()}if(b==='@global'){return co}if(b[0]==='~')return a.ractive.viewmodel.joinAll(ax(b.slice(2)));if(b[0]==='.'){let a=b.split('/');while(a[0]==='.'||a[0]==='..'){let b=a.shift();b==='..'&&(c=c.parent)}b=a.join('/');b[0]==='.'&&(b=b.slice(1));return c.joinAll(ax(b))}return bF(a,b)}function cq(a){if(!a)return this.viewmodel.get(!0);let b=ax(a),c=b[0],d;this.viewmodel.has(c)||(this.component&&!this.isolated&&(d=cp(this.component.parentFragment,c),d&&this.viewmodel.map(c,d)));d=this.viewmodel.joinAll(b);return d.get(!0)}let cr=new aD( 'insert' );function cs(a,b){if(!this.fragment.rendered){throw new Error( 'The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.' )}a=M(a);b=M(b)||null;if(!a){throw new Error( 'You must specify a valid target to insert into' )}a.insertBefore(this.detach(),b);this.el=a;(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this);this.isDetached=!1;ct(this)}function ct(a){cr.fire(a);a.findAllComponents('*').forEach(a=>{ct(a.instance)})}function cu(a,b){if(b===a||(a+'.').indexOf(b+'.')===0||(b+'.').indexOf(a+'.')===0){throw new Error( 'A keypath cannot be linked to itself.' )}let c=a$.start(),d,e=this._links[b];if(e){if(e.source.model.str!==a||e.dest.model.str!==b)e.unlink(),delete this._links[b],this.viewmodel.joinAll(ax(b)).set(e.initialValue);else{a$.end();return c}}let f=ax(a);!this.viewmodel.has(f[0])&&this.component&&(d=cp(this.component.parentFragment,f[0]),d&&this.viewmodel.map(f[0],d));e=new cv( this.viewmodel.joinAll(f), this.viewmodel.joinAll(ax(b)), this );this._links[b]=e;e.source.handleChange();a$.end();return c}class cv{constructor(a,b,c){this.source=new cw( a, this );this.dest=new cw( b, this );this.ractive=c;this.locked=!1;this.initialValue=b.get()}sync(a){this.locked||(this.locked=!0,a===this.dest?this.source.model.set(this.dest.model.get()):this.dest.model.set(this.source.model.get()),this.locked=!1)}unlink(){this.source.model.unregister(this.source);this.dest.model.unregister(this.dest)}}class cw{constructor(a,b){this.model=a;this.owner=b;a.register(this)}handleChange(){this.owner.sync(this)}}let cx={};function cy(a){if(!a)return null;if(a===!0)return JSON.stringify;if(typeof a==='function')return a;if(typeof a==='string'){return cx[a]||(cx[a]=b=>b[a])}throw new Error( 'If supplied, options.compare must be a string, function, or `true`' )}function cz(a,b,c){let d=this.viewmodel.joinAll(ax(a)),e=a$.start(this,!0),f=d.get();if(b===f){throw new Error( 'You cannot merge an array with itself' )}else if(!W(f)||!W(b)){throw new Error( 'You cannot merge an array with a non-array' )}let g=cy(c&&c.compare);d.merge(b,g);a$.end();return e}function cA(a,b,c){let d=[],e;if(Z(a))e=a,c=b||{},Object.keys(e).forEach(a=>{let b=e[a];a.split(' ').forEach(a=>{d.push(cB(this,a,b,c))})});else{let e;typeof a==='function'?(c=b,b=a,e=['']):(e=a.split(' '));e.forEach(a=>{d.push(cB(this,a,b,c||{}))})}this._observers.push.apply(this._observers,d);return{cancel:()=>{d.forEach(a=>{aJ(this._observers,a);a.cancel()})}}}function cB(a,b,c,d){let e=a.viewmodel,f=ax(b),g=f.indexOf('*');if(!~g){let b=f[0];if(b!==''&&!e.has(b)){if(a.component){let c=cp(a.component.parentFragment,b);c&&e.map(b,c)}}let g=e.joinAll(f);return new cC( a, g, c, d )}let h=g===0?e:e.joinAll(f.slice(0,g));return new cD( a, h, f.splice(g), c, d )}class cC{constructor(a,b,c,d){this.context=d.context||a;this.model=b;this.keypath=b.getKeypath(a);this.callback=c;this.oldValue=undefined;this.newValue=b.get();this.defer=d.defer;this.once=d.once;this.strict=d.strict;this.dirty=!1;d.init!==!1?this.dispatch():(this.oldValue=this.newValue);b.register(this)}cancel(){this.model.unregister(this)}dispatch(){this.callback.call(this.context,this.newValue,this.oldValue,this.keypath);this.oldValue=this.newValue;this.dirty=!1}handleChange(){if(!this.dirty){this.newValue=this.model.get();if(this.strict&&this.newValue===this.oldValue)return;a$.addObserver(this,this.defer);this.dirty=!0;this.once&&this.cancel()}}}class cD{constructor(a,b,c,d,e){this.context=e.context||a;this.ractive=a;this.baseModel=b;this.keys=c;this.callback=d;let f=c.join('\\.').replace(/\*/g,'(.+)'),g=b.getKeypath(a);this.pattern=new RegExp( `^${g ? g + '\\.' : ''}${f}$` );this.oldValues={};this.newValues={};this.defer=e.defer;this.once=e.once;this.strict=e.strict;this.dirty=!1;this.changed=[];this.partial=!1;let h=b.findMatches(this.keys);h.forEach(a=>{this.newValues[a.getKeypath(this.ractive)]=a.get()});e.init!==!1?this.dispatch():(this.oldValues=this.newValues);b.registerPatternObserver(this)}cancel(){this.baseModel.unregisterPatternObserver(this)}dispatch(){Object.keys(this.newValues).forEach(a=>{if(this.newKeys&&!this.newKeys[a])return;let b=this.newValues[a],c=this.oldValues[a];if(this.strict&&b===c)return;if(X(b,c))return;let d=[b,c,a];if(a){let b=this.pattern.exec(a).slice(1);d=d.concat(b)}this.callback.apply(this.context,d)});if(this.partial){for(const a in this.newValues)this.oldValues[a]=this.newValues[a]}else this.oldValues=this.newValues;this.newKeys=null;this.dirty=!1}notify(a){this.changed.push(a)}shuffle(a){if(!W(this.baseModel.value))return;let b=this.baseModel.getKeypath(this.ractive),c=this.baseModel.value.length,d=this.keys.length>1?'.'+this.keys.slice(1).join('.'):'';this.newKeys={};for(let0;e<a.length;e++){if(a[e]===-1||a[e]===e)continue;this.newKeys[`${b}.${e}${d}`]=!0}for(let e=a.touchedFrom;e<c;e++)this.newKeys[`${b}.${e}${d}`]=!0}handleChange(){if(!this.dirty){this.newValues={};if(!this.changed.length)this.baseModel.findMatches(this.keys).forEach(a=>{let b=a.getKeypath(this.ractive);this.newValues[b]=a.get()}),this.partial=!1;else{let a=this.baseModel.isRoot?this.changed:this.changed.map(a=>this.baseModel.getKeypath(this.ractive)+'.'+av(a));this.baseModel.findMatches(this.keys).forEach(b=>{let c=b.getKeypath(this.ractive);a.filter(a=>c.indexOf(a)===0&&(c.length===a.length||c[a.length]==='.')).length&&(this.newValues[c]=b.get())});this.partial=!0}a$.addObserver(this,this.defer);this.dirty=!0;this.changed.length=0;this.once&&this.cancel()}}}function cE(a,b,c){if(typeof a!=='string'){throw new Error( 'ractive.observeList() must be passed a string as its first argument' )}let d=this.viewmodel.joinAll(ax(a)),e=new cG( this, d, b, c||{} );this._observers.push(e);return{cancel () {e.cancel()}}}function cF(){return-1}class cG{constructor(a,b,c,d){this.context=a;this.model=b;this.keypath=b.getKeypath();this.callback=c;this.pending=null;b.register(this);d.init!==!1?(this.sliced=[],this.shuffle([]),this.handleChange()):(this.sliced=this.slice())}handleChange(){this.pending?(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(cF)),this.handleChange())}shuffle(a){let b=this.slice(),c=[],d=[],e,f={};a.forEach((a,b)=>{f[a]=!0;a!==b&&e===undefined&&(e=b);a===-1&&d.push(this.sliced[b])});e===undefined&&(e=a.length);let g=b.length;for(let h=0;h<g;h+=1){f[h]||c.push(b[h])}this.pending={c,d,e};this.sliced=b}slice(){let a=this.model.get();return W(a)?a.slice():[]}}let cH={init:!1,once:!0};function cI(a,b,c){if(Z(a)||typeof a==='function'){c=S(b||{},cH);return this.observe(a,c)}c=S(c||{},cH);return this.observe(a,b,c)}var cJ=a=>a.trim(),cK=a=>a!=='';function cL(a,b){if(!a){for(a in this._subs)delete this._subs[a]}else{let c=a.split(' ').map(cJ).filter(cK);c.forEach(a=>{let c=this._subs[a];if(c){if(b){let a=c.indexOf(b);a!==-1&&c.splice(a,1)}else this._subs[a]=[]}})}return this}function cM(a,b){if(typeof a==='object'){let b=[],c;for(c in a){a.hasOwnProperty(c)&&b.push(this.on(c,a[c]))}return{cancel () {let a;while(a=b.pop())a.cancel()}}}let c=a.split(' ').map(cJ).filter(cK);c.forEach(a=>{(this._subs[a]||(this._subs[a]=[])).push(b)});return{cancel:()=>this.off(a,b)}}function cN(a,b){let c=this.on(a,function(){b.apply(this,arguments);c.cancel()});return c}function cO(a,b,c){var d,e=[],f,g,h,i;d=cP(a,b,c);if(!d){return null}h=d.length-2-d[1];f=Math.min(a,d[0]);g=f+d[1];for(i=0;i<f;i+=1)e.push(i);for(;i<g;i+=1)e.push(-1);for(;i<a;i+=1)e.push(i+h);h!==0?(e.touchedFrom=d[0]):(e.touchedFrom=a);return e}function cP(a,b,c){switch(b){case 'splice':c[0]!==undefined&&c[0]<0&&(c[0]=a+Math.max(c[0],-a));while(c.length<2)c.push(a-c[0]);c[1]=Math.min(c[1],a-c[0]);return c;case 'sort':;case 'reverse':return null;case 'pop':if(a){return[a-1,1]};return[0,0];case 'push':return[a,0].concat(c);case 'shift':return[0,a?1:0];case 'unshift':return[0,0].concat(c)}}let cQ=Array.prototype;function cR(a){return function(b,...c){let d=this.viewmodel.joinAll(ax(b)),e=d.get();if(!W(e)){if(e===undefined){e=[];let d=cQ[a].apply(e,c);return this.set(b,e).then(()=>d)}else{throw new Error( `shuffle array method ${a} called on non-array at ${d.getKeypath()}` )}}let f=cO(e.length,a,c),g=cQ[a].apply(e,c),h=a$.start(this,!0).then(()=>g);h.result=g;f?d.shuffle(f):d.set(g);a$.end();return h}}var cS=cR('pop'),cT=cR('push');let cU='/* Ractive.js component styles */',cV=[],cW=!1,cX=null,cY=null;function cZ(a){cV.push(a);cW=!0}function c_(){if(!h||!cW)return;cY?(cX.styleSheet.cssText=c$(null)):(cX.innerHTML=c$(null));cW=!1}function c$(a){let b=a?cV.filter(b=>~a.indexOf(b.id)):cV;return b.reduce((a,b)=>`${a}\n\n/* {${b.id}} */\n${b.styles}`,cU)}h&&(!cX||!cX.parentNode)&&(cX=h.createElement('style'),cX.type='text/css',h.getElementsByTagName('head')[0].appendChild(cX),cY=!!cX.styleSheet);let da=new aD( 'render' ),db=new aD( 'complete' );function dc(a,b,c,d){let e=a.transitionsEnabled;a.noIntro&&(a.transitionsEnabled=!1);let f=a$.start(a,!0);a$.scheduleTask(()=>da.fire(a),!0);if(a.fragment.rendered){throw new Error( 'You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first' )}c=M(c)||a.anchor;a.el=b;a.anchor=c;a.cssId&&c_();if(b){(b.__ractive_instances__||(b.__ractive_instances__=[])).push(a);if(c){let d=h.createDocumentFragment();a.fragment.render(d);b.insertBefore(d,c)}else a.fragment.render(b,d)}a$.end();a.transitionsEnabled=e;return f.then(()=>db.fire(a))}function dd(a,b){a=M(a)||this.el;if(!this.append&&a){let b=a.__ractive_instances__;b&&b.forEach(bR);this.enhance||(a.innerHTML='')}let c=this.enhance?aK(a.childNodes):null,d=dc(this,a,b,c);if(c){while(c.length)a.removeChild(c.pop())}return d}var de={extend:(a,b,c)=>{b.adapt=df(b.adapt,aH(c.adapt))},init () {}};function df(a,b){let c=a.slice(),d=b.length;while(d--){~c.indexOf(b[d])||c.push(b[d])}return c}let dg=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,dh=/\/\*.*?\*\//g,di=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,dj=/^(?:@|\d+%)/,dk=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;function dl(a){return a.trim()}function dm(a){return a.str}function dn(a,b){let c=[],d;while(d=di.exec(a))c.push({str:d[0],base:d[1],modifiers:d[2]});let e=c.map(dm),f=[],g=c.length;while(g--){let a=e.slice(),d=c[g];a[g]=d.base+b+d.modifiers||'';let h=e.slice();h[g]=b+' '+h[g];f.push(a.join(' '),h.join(' '))}return f.join(', ')}function dp(a,b){let c=`[data-ractive-css~="{${b}}"]`,d;dk.test(a)?(d=a.replace(dk,c)):(d=a.replace(dh,'').replace(dg,(a,b)=>{if(dj.test(b))return a;let d=b.split(',').map(dl),e=d.map(a=>dn(a,c)).join(', ')+' ';return a.replace(b,e)}));return d}function dq(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1)}function dr(){return dq()+dq()+'-'+dq()+'-'+dq()+'-'+dq()+'-'+dq()+dq()+dq()}var ds={name:'css',extend:(a,b,c)=>{if(!c.css)return;let d=dr(),e=c.noCssTransform?c.css:dp(c.css,d);b.cssId=d;cZ({d,e})},init:(a,b,c)=>{if(!c.css)return;ah("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}};function dt(a,b){if(!/this/.test(a.toString()))return a;let c=a.bind(b);for(let d in a)c[d]=a[d];return c}function du(a){a&&a.constructor!==Object&&(typeof a==='function'||(typeof a!=='object'?ad(`data option must be an object or a function, \`${a}\` is not valid`):ah('If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged')))}var dv={name:'data',extend:(a,b,c)=>{let d,e;if(c.data&&Z(c.data)){for(d in c.data){e=c.data[d],e&&typeof e==='object'&&((Z(e)||W(e))&&ah("Passing a \\`data\\` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }"))}}b.data=dw(b.data,c.data)},init:(a,b,c)=>{let d=dw(a.prototype.data,c.data);typeof d==='function'&&(d=d.call(b));if(d&&d.constructor===Object){for(let a in d){typeof d[a]==='function'&&(d[a]=dt(d[a],b))}}return d||{}},reset ( a){let b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.root.set(b);return !0}};function dw(a,b){du(b);let c=typeof a==='function',d=typeof b==='function';!b&&!c&&(b={});if(!c&&!d){return dy(b,a)}return function(){let e=d?dx(b,this):b,f=c?dx(a,this):a;return dy(e,f)}}function dx(a,b){let c=a.call(b);if(!c)return;typeof c!=='object'&&ad('Data function must return an object');c.constructor!==Object&&ai('Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged');return c}function dy(a,b){if(a&&b){for(let c in b){(c in a)||(a[c]=b[c])}return a}return a||b}var dz=3;let dA=/\$\{([^\}]+)\}/g;function dB(a,b = 0){let c=new Array( b );while(b--)c[b]=`_${b}`;return new Function( [], `return function (${c.join(',')}){return(${a});};` )()}function dC(a,b){let c,d='return ('+a.replace(dA,(a,b)=>{c=!0;return`__ractive.get("${b}")`})+');';c&&(d=`var __ractive = this; ${d}`);let e=new Function( d );return c?e.bind(b):e}let dD=P(null);function dE(a,b){if(dD[a])return dD[a];return dD[a]=hD(a,b)}function dF(a){if(!a)return;let b=a.e;if(!b)return;Object.keys(b).forEach(a=>{if(dD[a])return;dD[a]=b[a]})}var dG,dH,dI=/^\s+/;dH=function(a){this.name='ParseError';this.message=a;try{throw new Error(a)}catch(a){this.stack=a.stack}};dH.prototype=Error.prototype;dG=function(a,b){var c,d,e=0;this.str=a;this.options=b||{};this.pos=0;this.lines=this.str.split('\n');this.lineEnds=this.lines.map(a=>{var b=e+a.length+1;e=b;return b},0);this.init&&this.init(a,b);c=[];while(this.pos<this.str.length&&(d=this.read()))c.push(d);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(c,b):c};dG.prototype={read:function(a){var b,c,d,e;a||(a=this.converters);b=this.pos;d=a.length;for(c=0;c<d;c+=1){this.pos=b;if(e=a[c](this)){return e}}return null},getLinePos:function(a){var b=0,c=0,d;while(a>=this.lineEnds[b]){c=this.lineEnds[b],b+=1}d=a-c;return[b+1,d+1,a]},error:function(a){let b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=0,g=e.replace(/\t/g,(a,c)=>{c<b[1]&&(f+=1);return'  '})+'\n'+new Array( b[1]+f ).join(' ')+'^----',h=new dH( `${a} at line ${c} character ${d}:\n${g}` );h.line=b[0];h.character=b[1];h.shortMessage=a;throw h},matchString:function(a){if(this.str.substr(this.pos,a.length)===a){this.pos+=a.length;return a}},matchPattern:function(a){var b;if(b=a.exec(this.remaining())){this.pos+=b[0].length;return b[1]||b[0]}},allowWhitespace:function(){this.matchPattern(dI)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};dG.extend=function(a){var b=this,c,d;c=function(a,b){dG.call(this,a,b)};c.prototype=P(b.prototype);for(d in a){U.call(a,d)&&(c.prototype[d]=a[d])}c.extend=dG.extend;return c};var dJ=dG;let dK=1,dL=2,dM=3,dN=4,dO=5,dP=6,dQ=7,dR=8,dS=9,dT=10,dU=14,dV=15,dW=16,dX=17,dY=18,dZ=19,d_=20,d$=21,ea=22,eb=23,ec=24,ed=25,ee=26,ef=27,eg=30,eh=31,ei=32,ej=33,ek=34,el=35,em=36,en=40,eo=50,ep=51,eq=52,er=53,es=54,et=60,eu=61;var ev=/^[^\s=]+/,ew=/^\s+/;function ex(a){var b,c,d;if(!a.matchString('=')){return null}b=a.pos;a.allowWhitespace();c=a.matchPattern(ev);if(!c){a.pos=b;return null}if(!a.matchPattern(ew)){return null}d=a.matchPattern(ev);if(!d){a.pos=b;return null}a.allowWhitespace();if(!a.matchString('=')){a.pos=b;return null}return[c,d]}var ey=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;function ez(a){var b;if(b=a.matchPattern(ey)){return{t:ed,v:b}}return null}var eA={t:dT,exclude:!0};function eB(a){var b,c;if(a.interpolate[a.inside]===!1){return null}for(c=0;c<a.tags.length;c+=1){if(b=eC(a,a.tags[c])){return b}}}function eC(a,b){var c,d,e,f;c=a.pos;if(a.matchString('\\'+b.open)){if(c===0||a.str[c-1]!=='\\'){return b.open}}else if(!a.matchString(b.open)){return null}if(d=ex(a)){if(!a.matchString(b.close)){return null}b.open=d[0];b.close=d[1];a.sortMustacheTags();return eA}a.allowWhitespace();if(a.matchString('/')){a.pos-=1;let c=a.pos;ez(a)?(a.pos=c):(a.pos=c-b.close.length,a.error('Attempted to close a section that wasn\'t open'))}for(f=0;f<b.readers.length;f+=1){e=b.readers[f];if(d=e(a,b)){b.isStatic&&(d.s=!0);a.includeLinePositions&&(d.p=a.getLinePos(c));return d}}a.pos=c;return null}var eD='Expected a JavaScript expression',eE='Expected closing paren',eF=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;function eG(a){var b;if(b=a.matchPattern(eF)){return{t:d_,v:b}}return null}function eH(a){var b=a.remaining();if(b.substr(0,4)==='true'){a.pos+=4;return{t:ec,v:'true'}}if(b.substr(0,5)==='false'){a.pos+=5;return{t:ec,v:'false'}}return null}var eI,eJ,eK;eI=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;eJ=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;eK=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;function eL(a){return function(b){let c='"',d=!1,e;while(!d){e=b.matchPattern(eI)||b.matchPattern(eJ)||b.matchString(a),e?(e==="\""?(c+="\\\\\""):e==="\\\\'"?(c+="'"):(c+=e)):(e=b.matchPattern(eK),e?(c+='\\u'+('000'+e.charCodeAt(1).toString(16)).slice(-4)):(d=!0))}c+='"';return JSON.parse(c)}}var eM=eL("\""),eN=eL("'");function eO(a){var b,c;b=a.pos;if(a.matchString('"')){c=eN(a);if(!a.matchString('"')){a.pos=b;return null}return{t:d$,v:c}}if(a.matchString("'")){c=eM(a);if(!a.matchString("'")){a.pos=b;return null}return{t:d$,v:c}}return null}var eP=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,eQ=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function eR(a){var b;if(b=eO(a)){return eQ.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"'}if(b=eG(a)){return b.v}if(b=a.matchPattern(eP)){return b}return null}function eS(a){var b,c,d;b=a.pos;a.allowWhitespace();let e=a.nextChar()!=='\''&&a.nextChar()!=='"';c=eR(a);if(c===null){a.pos=b;return null}a.allowWhitespace();if(e&&(a.nextChar()===','||a.nextChar()==='}')){eP.test(c)||a.error(`Expected a valid reference, but found '${c}' instead.`);return{t:ef,k:c,v:{t:eg,n:c}}}if(!a.matchString(':')){a.pos=b;return null}a.allowWhitespace();d=fo(a);if(d===null){a.pos=b;return null}return{t:ef,k:c,v:d}}function eT(a){var b,c,d,e;b=a.pos;d=eS(a);if(d===null){return null}c=[d];if(a.matchString(',')){e=eT(a);if(!e){a.pos=b;return null}return c.concat(e)}return c}function eU(a){var b,c;b=a.pos;a.allowWhitespace();if(!a.matchString('{')){a.pos=b;return null}c=eT(a);a.allowWhitespace();if(!a.matchString('}')){a.pos=b;return null}return{t:eb,m:c}}function eV(a){a.allowWhitespace();let b=fo(a);if(b===null)return null;let c=[b];a.allowWhitespace();if(a.matchString(',')){let b=eV(a);b===null&&a.error(eD);c.push.apply(c,b)}return c}function eW(a){var b,c;b=a.pos;a.allowWhitespace();if(!a.matchString('[')){a.pos=b;return null}c=eV(a);if(!a.matchString(']')){a.pos=b;return null}return{t:ea,m:c}}function eX(a){return eG(a)||eH(a)||eO(a)||eU(a)||eW(a)||ez(a)}var eY=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,eZ,e_;eZ=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/;e_=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var e$=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,fa=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/;function fb(a){var b,c,d,e,f,g,h;b=a.pos;d=a.matchPattern(/^@(?:keypath|rootpath|index|key|ractive|global)/);d||(c=a.matchPattern(eY)||'',d=!c&&a.relaxedNames&&a.matchPattern(fa)||a.matchPattern(e$),!d&&c==='.'&&(c='',d='.'));if(!d){return null}if(!c&&!a.relaxedNames&&e_.test(d)){a.pos=b;return null}if(!c&&eZ.test(d)){e=eZ.exec(d)[0];a.pos=b+e.length;return{t:ee,v:e}}g=(c||'').length+d.length;f=(c||'')+aw(d);if(a.matchString('(')){h=f.lastIndexOf('.');if(h!==-1&&d[d.length-1]!==']'){let c=f.length;f=f.substr(0,h);a.pos=b+(g-(c-h))}else a.pos-=1}return{t:eg,n:f.replace(/^this\./,'./').replace(/^this$/,'.')}}function fc(a){if(!a.matchString('('))return null;a.allowWhitespace();let b=fo(a);b||a.error(eD);a.allowWhitespace();a.matchString(')')||a.error(eE);return{t:ek,x:b}}function fd(a){return eX(a)||fb(a)||fc(a)}function fe(a){a.strictRefinement||a.allowWhitespace();if(a.matchString('.')){a.allowWhitespace();let b=a.matchPattern(eP);if(b){return{t:eh,n:b}}a.error('Expected a property name')}if(a.matchString('[')){a.allowWhitespace();let b=fo(a);b||a.error(eD);a.allowWhitespace();a.matchString(']')||a.error("Expected ']'");return{t:eh,x:b}}return null}function ff(a){let b=fd(a);if(!b)return null;while(b){let c=fe(a);if(c)b={t:ei,x:b,r:c};else if(a.matchString('(')){a.allowWhitespace();let c=eV(a);a.allowWhitespace();a.matchString(')')||a.error(eE);b={t:en,x:b};c&&(b.o=c)}else{break}}return b}var fg,fh;fh=function(a,b){return function(c){var d;if(d=b(c)){return d}if(!c.matchString(a)){return null}c.allowWhitespace();d=fo(c);d||c.error(eD);return{s:a,o:d,t:ej}}};!function(){var a,b,c,d,e;d='! ~ + - typeof'.split(' ');e=ff;for(a=0, b=d.length;a<b;a+=1){c=fh(d[a],e),e=c}fg=e}();var fi=fg,fj,fk;fk=function(a,b){return function(c){var d,e,f;e=b(c);if(!e){return null}while(!0){d=c.pos;c.allowWhitespace();if(!c.matchString(a)){c.pos=d;return e}if(a==='in'&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0))){c.pos=d;return e}c.allowWhitespace();f=b(c);if(!f){c.pos=d;return e}e={t:em,s:a,o:[e,f]}}}};!function(){var a,b,c,d,e;d='* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||'.split(' ');e=fi;for(a=0, b=d.length;a<b;a+=1){c=fk(d[a],e),e=c}fj=e}();var fl=fj;function fm(a){var b,c,d,e;c=fl(a);if(!c){return null}b=a.pos;a.allowWhitespace();if(!a.matchString('?')){a.pos=b;return c}a.allowWhitespace();d=fo(a);d||a.error(eD);a.allowWhitespace();a.matchString(':')||a.error('Expected ":"');a.allowWhitespace();e=fo(a);e||a.error(eD);return{t:el,o:[c,d,e]}}function fo(a){return fm(a)}function fp(a){var b;fq(a,b=[]);return{r:b,s:c(a)};function c(a){switch(a.t){case ec:;case ee:;case d_:;case ed:return a.v;case d$:return JSON.stringify(String(a.v));case ea:return'['+(a.m?a.m.map(c).join(','):'')+']';case eb:return'{'+(a.m?a.m.map(c).join(','):'')+'}';case ef:return a.k+':'+c(a.v);case ej:return(a.s==='typeof'?'typeof ':a.s)+c(a.o);case em:return c(a.o[0])+(a.s.substr(0,2)==='in'?' '+a.s+' ':a.s)+c(a.o[1]);case en:return c(a.x)+'('+(a.o?a.o.map(c).join(','):'')+')';case ek:return'('+c(a.x)+')';case ei:return c(a.x)+c(a.r);case eh:return a.n?'.'+a.n:'['+c(a.x)+']';case el:return c(a.o[0])+'?'+c(a.o[1])+':'+c(a.o[2]);case eg:return'_'+b.indexOf(a.n);default:throw new Error( 'Expected legal JavaScript' )}}}function fq(a,b){var c,d;a.t===eg&&(b.indexOf(a.n)===-1&&b.unshift(a.n));d=a.o||a.m;if(d){if(Z(d))fq(d,b);else{c=d.length;while(c--)fq(d[c],b)}}a.x&&fq(a.x,b);a.r&&fq(a.r,b);a.v&&fq(a.v,b)}function fr(a,b){var c;if(a){while(a.t===ek&&a.x)a=a.x;a.t===eg?(b.r=a.n):(c=fs(a))?(b.rx=c):(b.x=fp(a));return b}}function fs(a){var b=[],c;while(a.t===ei&&a.r.t===eh){c=a.r,c.x?(c.x.t===eg?b.unshift(c.x):b.unshift(fp(c.x))):b.unshift(c.n),a=a.x}if(a.t!==eg){return null}return{r:a.n,m:b}}function ft(a,b){var c=fo(a),d;if(!c){return null}a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);d={t:dM};fr(c,d);return d}function fu(a,b){var c,d;if(!a.matchString('&')){return null}a.allowWhitespace();c=fo(a);if(!c){return null}a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);d={t:dM};fr(c,d);return d}let fv=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,fw=/^as/i;function fx(a){let b=[],c,d=a.pos;a.allowWhitespace();c=fy(a);if(c){c.x=fr(c.x,{});b.push(c);a.allowWhitespace();while(a.matchString(',')){c=fy(a),c||a.error('Expected another alias.'),c.x=fr(c.x,{}),b.push(c),a.allowWhitespace()}return b}a.pos=d;return null}function fy(a){let b,c,d=a.pos;a.allowWhitespace();b=fo(a,[]);if(!b){a.pos=d;return null}a.allowWhitespace();if(!a.matchPattern(fw)){a.pos=d;return null}a.allowWhitespace();c=a.matchPattern(fv);c||a.error('Expected a legal alias name.');return{n:c,x:b}}function fz(a,b){if(!a.matchString('>'))return null;a.allowWhitespace();a.relaxedNames=a.strictRefinement=!0;let c=fo(a);a.relaxedNames=a.strictRefinement=!1;if(!c)return null;let d={t:dR};fr(c,d);a.allowWhitespace();let e=fx(a);if(e)d={t:dZ,z:e,f:[d]};else{let b=fo(a);b&&(d={t:dN,n:er,f:[d]},fr(b,d))}a.allowWhitespace();a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);return d}function fA(a,b){var c;if(!a.matchString('!')){return null}c=a.remaining().indexOf(b.close);if(c!==-1){a.pos+=c+b.close.length;return{t:dS}}}function fB(a,b){var c,d,e;c=a.pos;d=fo(a);if(!d){let b=a.matchPattern(/^(\w+)/);if(b){return{t:eg,n:b}}return null}for(e=0;e<b.length;e+=1){if(a.remaining().substr(0,b[e].length)===b[e]){return d}}a.pos=c;return fb(a)}function fC(a,b){var c,d,f,g;c=a.pos;try{d=fB(a,[b.close])}catch(a){g=a};if(!d){if(a.str.charAt(c)==='!'){a.pos=c;return null}if(g){throw g}}if(!a.matchString(b.close)){a.error(`Expected closing delimiter '${b.close}' after reference`);if(!d){if(a.nextChar()==='!'){return null}a.error("Expected expression or legal reference")}}f={t:dL};fr(d,f);return f}var fD=/^yield\s*/;function fE(a,b){if(!a.matchPattern(fD))return null;let c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(b.close)||a.error("expected legal partial name");let d={t:dW};c&&(d.n=c);return d}function fF(a,b){var c,d,e,f;c=a.pos;if(!a.matchString(b.open)){return null}a.allowWhitespace();if(!a.matchString('/')){a.pos=c;return null}a.allowWhitespace();d=a.remaining();e=d.indexOf(b.close);if(e!==-1){f={t:dP,r:d.substr(0,e).split(' ')[0]};a.pos+=e;a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);return f}a.pos=c;return null}var fG=/^\s*else\s*/;function fH(a,b){var c=a.pos;if(!a.matchString(b.open)){return null}if(!a.matchPattern(fG)){a.pos=c;return null}a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);return{t:et}}var fI=/^\s*elseif\s+/;function fJ(a,b){let c=a.pos;if(!a.matchString(b.open)){return null}if(!a.matchPattern(fI)){a.pos=c;return null}let d=fo(a);a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);return{t:eu,x:d}}var fK={'each':eq,'if':eo,'with':es,'unless':ep},fL=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,fM=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,fN=new RegExp( '^('+Object.keys(fK).join('|')+')\\b' );function fO(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=!1;c=a.pos;if(a.matchString('^'))e={t:dN,f:[],n:ep};else if(a.matchString('#'))e={t:dN,f:[]},a.matchString('partial')&&(a.pos=c-a.standardDelimiters[0].length,a.error('Partial definitions can only be at the top level of the template, or immediately inside components')),(i=a.matchPattern(fN))&&(n=i,e.n=fK[i]);else{return null}a.allowWhitespace();if(i==='with'){let b=fx(a);b&&(o=!0,e.z=b,e.t=dZ)}else if(i==='each'){let b=fy(a);b&&(e.z=[{n:b.n,x:{r:'.'}}],d=b.x)}if(!o){d||(d=fo(a));d||a.error('Expected expression');if(m=a.matchPattern(fL)){let b;(b=a.matchPattern(fM))?(e.i=m+','+b):(e.i=m)}}a.allowWhitespace();a.matchString(b.close)||a.error(`Expected closing delimiter '${b.close}'`);a.sectionDepth+=1;g=e.f;k=[];do {if(f=fF(a,b))n&&f.r!==n&&a.error(`Expected ${b.open}/${n}${b.close}`),a.sectionDepth-=1,l=!0;else if(!o&&(f=fJ(a,b)))e.n===ep&&a.error('{{else}} not allowed in {{#unless}}'),h&&a.error('illegal {{elseif...}} after {{else}}'),j||(j=fP(d)),j.f.push({t:dN,n:eo,x:fp(fR(k.concat(f.x))),f:g=[]}),k.push(fQ(f.x));else if(!o&&(f=fH(a,b)))e.n===ep&&a.error('{{else}} not allowed in {{#unless}}'),h&&a.error('there can only be one {{else}} block, at the end of a section'),h=!0,j?j.f.push({t:dN,n:eo,x:fp(fR(k)),f:g=[]}):(j=fP(d),g=j.f);else{f=a.read(hx);if(!f){break}g.push(f)}}while(!l);j&&(e.l=j);o||fr(d,e);e.f.length||delete e.f;return e}function fP(a){let b={t:dN,n:ep,f:[]};fr(a,b);return b}function fQ(a){if(a.t===ej&&a.s==='!'){return a.o}return{t:ej,s:'!',o:fS(a)}}function fR(a){if(a.length===1){return a[0]}return{t:em,s:'&&',o:[fS(a[0]),fS(fR(a.slice(1)))]}}function fS(a){return{t:ek,x:a}}var fT='<!--',fU='-->';function fV(a){var b,c,d,e,f;b=a.pos;if(!a.matchString(fT)){return null}d=a.remaining();e=d.indexOf(fU);e===-1&&a.error('Illegal HTML - expected closing comment sequence (\'-->\')');c=d.substr(0,e);a.pos+=e+3;f={t:dS,c:c};a.includeLinePositions&&(f.p=a.getLinePos(b));return f}let fW=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,fX=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,fY={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,'int':8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},fZ=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],f_=new RegExp( '&(#?(?:x[\\w\\d]+|\\d+|'+Object.keys(fY).join('|')+'));?', 'g' ),f$=typeof String.fromCodePoint==='function',ga=f$?String.fromCodePoint:String.fromCharCode;function gb(a){return a.replace(f_,function(a,b){var c;b[0]!=='#'?(c=fY[b]):b[1]==='x'?(c=parseInt(b.substring(2),16)):(c=parseInt(b.substring(1),10));if(!c){return a}return ga(gh(c))})}let gc=/</g,gd=/>/g,ge=/&/g,gf=65533;function gg(a){return a.replace(ge,'&amp;').replace(gc,'&lt;').replace(gd,'&gt;')}function gh(a){if(!a){return gf}if(a===10){return 32}if(a<128){return a}if(a<=159){return fZ[a-128]}if(a<55296){return a}if(a<=57343){return gf}if(a<=65535){return a}else if(!f$){return gf}if(a>=65536&&a<=131071){return a}if(a>=131072&&a<=196607){return a}return gf}var gi=/^[ \t\f\r\n]*\r?\n/,gj=/\r?\n[ \t\f\r\n]*$/;function gk(a){var b,c,d,e,f;for(b=1;b<a.length;b+=1){c=a[b],d=a[b-1],e=a[b-2],gl(c)&&gm(d)&&gl(e)&&(gj.test(e)&&gi.test(c)&&(a[b-2]=e.replace(gj,'\n'),a[b]=c.replace(gi,''))),gn(c)&&gl(d)&&(gj.test(d)&&gl(c.f[0])&&gi.test(c.f[0])&&(a[b-1]=d.replace(gj,'\n'),c.f[0]=c.f[0].replace(gi,''))),gl(c)&&gn(d)&&(f=aI(d.f),gl(f)&&gj.test(f)&&gi.test(c)&&(d.f[d.f.length-1]=f.replace(gj,'\n'),a[b]=c.replace(gi,'')))}return a}function gl(a){return typeof a==='string'}function gm(a){return a.t===dS||a.t===dT}function gn(a){return(a.t===dN||a.t===dO)&&a.f}function go(a,b,c){var d;b&&(d=a[0],typeof d==='string'&&(d=d.replace(b,''),d?(a[0]=d):a.shift()));c&&(d=aI(a),typeof d==='string'&&(d=d.replace(c,''),d?(a[a.length-1]=d):a.pop()))}let gp=/[ \t\f\r\n]+/g,gq=/^(?:pre|script|style|textarea)$/i,gr=/^[ \t\f\r\n]+/,gs=/[ \t\f\r\n]+$/,gt=/^(?:\r\n|\r|\n)/,gu=/(?:\r\n|\r|\n)$/;function gv(a,b,c,d,e){var f,g,h,i,j,k,l,m;gk(a);f=a.length;while(f--){g=a[f],g.exclude?a.splice(f,1):b&&g.t===dS&&a.splice(f,1)}go(a,d?gr:null,e?gs:null);f=a.length;while(f--){g=a[f];if(g.f){let d=g.t===dQ&&gq.test(g.e);j=c||d;!c&&d&&go(g.f,gt,gu);j||(h=a[f-1],i=a[f+1],(!h||typeof h==='string'&&gs.test(h))&&(k=!0),(!i||typeof i==='string'&&gr.test(i))&&(l=!0));gv(g.f,b,j,k,l)}g.l&&(gv(g.l.f,b,c,k,l),a.splice(f+1,0,g.l),delete g.l);if(g.a){for(m in g.a){g.a.hasOwnProperty(m)&&typeof g.a[m]!=='string'&&gv(g.a[m],b,c,k,l)}}g.m&&gv(g.m,b,c,k,l);if(g.v){for(m in g.v){g.v.hasOwnProperty(m)&&(W(g.v[m].n)&&gv(g.v[m].n,b,c,k,l),W(g.v[m].d)&&gv(g.v[m].d,b,c,k,l))}}}f=a.length;while(f--){typeof a[f]==='string'&&(typeof a[f+1]==='string'&&(a[f]=a[f]+a[f+1],a.splice(f+1,1)),c||(a[f]=a[f].replace(gp,' ')),a[f]===''&&a.splice(f,1))}}var gw=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;function gx(a){var b,c;b=a.pos;if(!a.matchString('</')){return null}if(c=a.matchPattern(gw)){if(a.inside&&c!==a.inside){a.pos=b;return null}return{t:dU,e:c}}a.pos-=2;a.error('Illegal closing tag')}var gy=/[-/\\^$*+?.()|[\]{}]/g;function gz(a){return a.replace(gy,'\\$&')}let gA={};function gB(a,b){return a.search(gA[b.join()]||(gA[b.join()]=new RegExp( b.map(gz).join('|') )))}var gC=/^[^\s"'>\/=]+/,gD=/^[^\s"'=<>`]+/;function gE(a){var b,c,d;a.allowWhitespace();c=a.matchPattern(gC);if(!c){return null}b={c};d=gF(a);d!=null&&(b.value=d);return b}function gF(a){var b,c,d,e;b=a.pos;/[=\/>\s]/.test(a.nextChar())||a.error('Expected `=`, `/`, `>` or whitespace');a.allowWhitespace();if(!a.matchString('=')){a.pos=b;return null}a.allowWhitespace();c=a.pos;d=a.sectionDepth;e=gI(a,"'")||gI(a,"\"")||gH(a);e===null&&a.error('Expected valid attribute value');a.sectionDepth!==d&&(a.pos=c,a.error('An attribute value must contain as many opening section tags as closing section tags'));if(!e.length){return''}if(e.length===1&&typeof e[0]==='string'){return gb(e[0])}return e}function gG(a){var b,c,d,e,f;b=a.pos;c=a.matchPattern(gD);if(!c){return null}d=c;e=a.tags.map(a=>a.open);(f=gB(d,e))!==-1&&(c=c.substr(0,f),a.pos=b+c.length);return c}function gH(a){var b,c;a.inAttribute=!0;b=[];c=eB(a)||gG(a);while(c!==null){b.push(c),c=eB(a)||gG(a)}if(!b.length){return null}a.inAttribute=!1;return b}function gI(a,b){var c,d,e;c=a.pos;if(!a.matchString(b)){return null}a.inAttribute=b;d=[];e=eB(a)||gJ(a,b);while(e!==null){d.push(e),e=eB(a)||gJ(a,b)}if(!a.matchString(b)){a.pos=c;return null}a.inAttribute=!1;return d}function gJ(a,b){let c=a.remaining(),d=a.tags.map(a=>a.open);d.push(b);let e=gB(c,d);e===-1&&a.error('Quoted attribute value must have a closing quote');if(!e){return null}a.pos+=e;return c.substr(0,e)}let gK={true:!0,false:!1,null:null,undefined},gL=new RegExp( '^(?:'+Object.keys(gK).join('|')+')' ),gM=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,gN=/\$\{([^\}]+)\}/g,gO=/^\$\{([^\}]+)\}/,gP=/^\s*$/,gQ=dJ.extend({init ( a,b){this.values=b.values;this.allowWhitespace()},postProcess ( a){if(a.length!==1||!gP.test(this.leftover)){return null}return{value:a[0].v}},converters:[function b(a){if(!a.values)return null;let c=a.matchPattern(gO);if(c&&a.values.hasOwnProperty(c)){return{v:a.values[c]}}},function b(a){let c=a.matchPattern(gL);if(c)return{v:gK[c]}},function b(a){let c=a.matchPattern(gM);if(c)return{v:+c}},function b(a){let c=eO(a),d=a.values;if(c&&d){return{v:c.v.replace(gN,(a,b)=>b in d?d[b]:b)}}return c},function b(a){if(!a.matchString('{'))return null;let c={};a.allowWhitespace();if(a.matchString('}')){return{v:c}}let d;while(d=gR(a)){c[d.key]=d.value;a.allowWhitespace();if(a.matchString('}')){return{v:c}}if(!a.matchString(',')){return null}}return null},function b(a){if(!a.matchString('['))return null;let c=[];a.allowWhitespace();if(a.matchString(']')){return{v:c}}let d;while(d=a.read()){c.push(d.v);a.allowWhitespace();if(a.matchString(']')){return{v:c}}if(!a.matchString(',')){return null}a.allowWhitespace()}return null}]});function gR(a){a.allowWhitespace();let b=eR(a);if(!b)return null;let c={b};a.allowWhitespace();if(!a.matchString(':')){return null}a.allowWhitespace();let d=a.read();if(!d)return null;c.value=d.v;return c}function gS(a,b){let c=new gQ( a, {b});return c.result}var gT=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,gU=/\)\s*$/,gV=/(\s*,{0,1}\s*\.{3}arguments\s*)$/,gW;gW=dJ.extend({converters:[fo]});function gX(a,b){var c,d,e,f,g,h,i;if(typeof a==='string'){if(d=gT.exec(a)){let e=a.lastIndexOf(')');gU.test(a)||b.error(`Invalid input after method call expression '${a.slice(e + 1)}'`);c={m:d[1]};let f=a.slice(c.m.length+1,e),g=f.replace(gV,'');f!==g&&(c.g=!0);if(g){let a=new gW( '['+g+']' );c.a=fp(a.result[0])}return c}if(a.indexOf(':')===-1){return a.trim()}a=[a]}c={};g=[];h=[];if(a){while(a.length){e=a.shift();if(typeof e==='string'){f=e.indexOf(':');if(f===-1)g.push(e);else{f&&g.push(e.substr(0,f));e.length>f+1&&(h[0]=e.substring(f+1));break}}else g.push(e)}h=h.concat(a)}g.length?h.length||typeof g!=='string'?(c={n:g.length===1&&typeof g[0]==='string'?g[0]:g},h.length===1&&typeof h[0]==='string'?(i=gS('['+h[0]+']'),c.a=i?i.value:[h[0].trim()]):(c.d=h)):(c=g):(c='');return c}var gY=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,gZ=/^[\s\n\/>]/,g_=/^on/,g$=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,ha=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,hb={'intro-outro':'t0',intro:'t1',outro:'t2',decorator:'o'},hc={exclude:!0},hd;hd={li:['li'],dt:['dt','dd'],dd:['dt','dd'],p:'address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul'.split(' '),rt:['rt','rp'],rp:['rt','rp'],optgroup:['optgroup'],option:['option','optgroup'],thead:['tbody','tfoot'],tbody:['tbody','tfoot'],tfoot:['tbody'],tr:['tr','tbody'],td:['td','th','tr'],th:['td','th','tr']};function he(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;b=a.pos;if(a.inside||a.inAttribute){return null}if(!a.matchString('<')){return null}if(a.nextChar()==='/'){return null}c={};a.includeLinePositions&&(c.p=a.getLinePos(b));if(a.matchString('!')){c.t=dY;a.matchPattern(/^doctype/i)||a.error('Expected DOCTYPE declaration');c.a=a.matchPattern(/^(.+?)>/);return c}c.t=dQ;c.e=a.matchPattern(gY);if(!c.e){return null}gZ.test(a.nextChar())||a.error('Illegal tag name');f=function(b,d){var e=d.n||d;ha.test(e)&&(a.pos-=e.length,a.error('Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)'));c.v[b]=d};a.allowWhitespace();while(g=eB(a)||gE(a)){g.name?((d=hb[g.name])?(c[d]=gX(g.value,a)):(e=g$.exec(g.name))?(c.v||(c.v={}),h=gX(g.value,a),f(e[1],h)):(!a.sanitizeEventAttributes||!g_.test(g.name))&&(c.a||(c.a={}),c.a[g.name]=g.value||(g.value===''?'':0))):(c.m||(c.m=[]),c.m.push(g)),a.allowWhitespace()}a.allowWhitespace();a.matchString('/')&&(i=!0);if(!a.matchString('>')){return null}let r=c.e.toLowerCase(),s=a.preserveWhitespace;if(!i&&!fX.test(c.e)){a.elementStack.push(r);(r==='script'||r==='style'||r==='textarea')&&(a.inside=r);j=[];k=P(null);do {o=a.pos;p=a.remaining();p||a.error(`Missing end ${a.elementStack.length > 1 ? 'tags' : 'tag'} (${a.elementStack.reverse().map( x => `</${x}>` ).join( '' )})`);if(!hf(r,p))n=!0;else if(q=gx(a)){n=!0;let b=q.e.toLowerCase();if(b!==r){a.pos=o;if(!~a.elementStack.indexOf(b)){let c='Unexpected closing tag';fX.test(b)&&(c+=` (<${b}> is a void element - it cannot contain children)`);a.error(c)}}}else (m=fF(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(n=!0,a.pos=o):(m=a.read(hy))?(k[m.n]&&(a.pos=o,a.error('Duplicate partial definition')),gv(m.f,a.stripComments,s,!s,!s),k[m.n]=m.f,l=!0):(m=a.read(hx))?j.push(m):(n=!0)}while(!n);j.length&&(c.f=j);l&&(c.p=k);a.elementStack.pop()}a.inside=null;if(a.sanitizeElements&&a.sanitizeElements.indexOf(r)!==-1){return hc}return c}function hf(a,b){var c,d;c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b);d=hd[a];if(!c||!d){return !0}return!~d.indexOf(c[1].toLowerCase())}function hg(a){var b,c,d,e;c=a.remaining();a.textOnlyMode?(d=a.tags.map(a=>a.open),d=d.concat(a.tags.map(a=>'\\'+a.open)),b=gB(c,d)):(e=a.inside?'</'+a.inside:'<',a.inside&&!a.interpolate[a.inside]?(b=c.indexOf(e)):(d=a.tags.map(a=>a.open),d=d.concat(a.tags.map(a=>'\\'+a.open)),a.inAttribute===!0?d.push("\"","'","=","<",">",'`'):a.inAttribute?d.push(a.inAttribute):d.push(e),b=gB(c,d)));if(!b){return null}b===-1&&(b=c.length);a.pos+=b;if(a.inside&&a.inside!=='textarea'||a.textOnlyMode){return c.substr(0,b)}else{return gb(c.substr(0,b))}}let hh=/^<!--\s*/,hi=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,hj=/\s*-->/;function hk(a){let b=a.pos,c=a.standardDelimiters[0],d=a.standardDelimiters[1];if(!a.matchPattern(hh)||!a.matchString(c)){a.pos=b;return null}let e=a.matchPattern(hi);ai(`Inline partial comments are deprecated.
Use this...
  {{#partial ${e}}} ... {{/partial}}

...instead of this:
  <!-- {{>${e}}} --> ... <!-- {{/${e}}} -->'`);if(!a.matchString(d)||!a.matchPattern(hj)){a.pos=b;return null}let f=[],g,h=new RegExp('^<!--\\s*'+gz(c)+'\\s*\\/\\s*'+e+'\\s*'+gz(d)+'\\s*-->');do {if(a.matchPattern(h))g=!0;else{let b=a.read(hx);b||a.error(`expected closing comment ('<!-- ${c}/${e}${d} -->')`);f.push(b)}}while(!g);return{t:dX,f:f,n:e}}var hl=/^#\s*partial\s+/;function hm(a){var b,c,d,e,f;b=a.pos;let g=a.standardDelimiters;if(!a.matchString(g[0])){return null}if(!a.matchPattern(hl)){a.pos=b;return null}c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/);c||a.error('expected legal partial name');a.matchString(g[1])||a.error(`Expected closing delimiter '${g[1]}'`);d=[];do {(e=fF(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(!e.r==='partial'&&a.error(`Expected ${g[0]}/partial${g[1]}`),f=!0):(e=a.read(hx),e||a.error(`Expected ${g[0]}/partial${g[1]}`),d.push(e))}while(!f);return{t:dX,n:c,f:d}}function hn(a){let b=[],c=P(null),d=!1,e=a.preserveWhitespace;while(a.pos<a.str.length){let f=a.pos,g,h;(h=a.read(hy))?(c[h.n]&&(a.pos=f,a.error('Duplicated partial definition')),gv(h.f,a.stripComments,e,!e,!e),c[h.n]=h.f,d=!0):(g=a.read(hx))?b.push(g):a.error('Unexpected template content')}let f={v:dz,t:b};d&&(f.p=c);return f}function ho(a,b){Object.keys(a).forEach(c=>{if(hp(c,a))return hq(a,b);let d=a[c];hr(d)&&ho(d,b)})}function hp(a,b){return a==='s'&&W(b.r)}function hq(a,b){b[c]||(b[c]=dB(c,d.length))}function hr(a){return W(a)||Z(a)}let hs=[fz,fu,fO,fE,fC,fA],ht=[ft],hu=[fu,fO,fC],hv;function hw(a,b){return new hv( a, b||{} ).result}hw.computedStrings=function(a){if(!a)return[];Object.keys(a).forEach(b=>{let c=a[b];typeof c==='string'&&(a[b]=dC(c))})};let hx=[eB,fV,he,hg],hy=[hk,hm];hv=dJ.extend({init ( a,b){var c=b.tripleDelimiters||['{{{','}}}'],d=b.staticDelimiters||['[[',']]'],e=b.staticTripleDelimiters||['[[[',']]]'];this.standardDelimiters=b.delimiters||['{{','}}'];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:hs},{isStatic:!1,isTriple:!0,open:c[0],close:c[1],readers:ht},{isStatic:!0,isTriple:!1,open:d[0],close:d[1],readers:hu},{isStatic:!0,isTriple:!0,open:e[0],close:e[1],readers:ht}];this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!b.interpolate||b.interpolate.script!==!1,style:!b.interpolate||b.interpolate.style!==!1,textarea:!0};b.sanitize===!0&&(b.sanitize={elements:'applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title'.split(' '),eventAttributes:!0});this.stripComments=b.stripComments!==!1;this.preserveWhitespace=b.preserveWhitespace;this.sanitizeElements=b.sanitize&&b.sanitize.elements;this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes;this.includeLinePositions=b.includeLinePositions;this.textOnlyMode=b.textOnlyMode;this.csp=b.csp},postProcess ( a){if(!a.length){return{t:[],v:dz}}this.sectionDepth>0&&this.error('A section was left open');gv(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);if(this.csp!==!1){let b={};ho(a[0].t,b);Object.keys(b).length&&(a[0].e=b)}return a[0]},converters:[hn],sortMustacheTags () {this.tags.sort((a,b)=>{return b.open.length-a.open.length})}});let hz=['delimiters','tripleDelimiters','staticDelimiters','staticTripleDelimiters','csp','interpolate','preserveWhitespace','sanitize','stripComments'],hA="Either preparse or use a ractive runtime source that includes the parser. ",hB="Either use:\n\n\tRactive.parse.computedStrings( component.computed )\n\nat build time to pre-convert the strings to functions, or use functions instead of strings in computed properties.";function hC(a,b,c){a||ad(`Missing Ractive.parse - cannot parse ${b}. ${c}`)}function hD(a,b){hC(dB,'new expression function',hA);return dB(a,b)}function hE(a,b){hC(dC,'compution string "${str}"',hB);return dC(a,b)}let hF={fromId ( a,b){if(!h){if(b&&b.noThrow){return}throw new Error( `Cannot retrieve template #${a} as Ractive is not running in a browser.` )}a&&(a=a.replace(/^#/,''));let c;if(!(c=h.getElementById(a))){if(b&&b.noThrow){return}throw new Error( `Could not find template element with id #${a}` )}if(c.tagName.toUpperCase()!=='SCRIPT'){if(b&&b.noThrow){return}throw new Error( `Template element with id #${a}, must be a <script> element` )}return 'textContent' in c?c.textContent:c.innerHTML},isParsed ( a){return!(typeof a==='string')},getParseOptions ( a){a.defaults&&(a=a.defaults);return hz.reduce((b,c)=>{b[c]=a[c];return b},{})},parse ( a,b){hC(hw,'template',hA);let c=hw(a,b);dF(c);return c},parseFor( a,b){return this.parse(a,this.getParseOptions(b))}};var hG={name:'template',extend ( a,b,c){if('template' in c){let a=c.template;typeof a==='function'?(b.template=a):(b.template=hJ(a,b))}},init ( a,b,c){let d='template' in c?c.template:a.prototype.template;d=d||{v:dz,t:[]};if(typeof d==='function'){let a=d;d=hI(b,a);b._config.template={a,result:d}}d=hJ(d,b);b.template=d.t;d.p&&hM(b.partials,d.p)},reset ( a){let b=hH(a);if(b){let c=hJ(b,a);a.template=c.t;hM(a.partials,c.p,!0);return !0}}};function hH(a){let b=a._config.template;if(!b||!b.fn){return}let c=hI(a,b.fn);if(c!==b.result){b.result=c;return c}}function hI(a,b){return b.call(a,{fromId:hF.fromId,isParsed:hF.isParsed,parse ( a,b = hF.getParseOptions(a)){return hF.parse(a,b)}})}function hJ(a,b){typeof a==='string'?(a=hK(a,b)):(hL(a),dF(a));return a}function hK(a,b){a[0]==='#'&&(a=hF.fromId(a));return hF.parseFor(a,b)}function hL(a){if(a==undefined){throw new Error( `The template cannot be ${a}.` )}else if(typeof a.v!=='number'){throw new Error( 'The template parser was passed a non-string template, but the template doesn\'t have a version.  Make sure you\'re passing in the template you think you are.' )}else if(a.v!==dz){throw new Error( `Mismatched template version (expected ${dz}, got ${a.v}) Please ensure you are using the latest version of Ractive.js in your build process as well as in your app` )}}function hM(a,b,c){if(!b)return;for(let d in b){(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}}let hN=['adaptors','components','computed','decorators','easing','events','interpolators','partials','transitions'];class hO{constructor(a,b){this.name=a;this.useDefaults=b}extend(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)}init(){}configure(a,b,c){let d=this.name,e=c[d],f=P(a[d]);for(let g in e)f[g]=e[g];b[d]=f}reset(a){let b=a[this.name],c=!1;Object.keys(b).forEach(a=>{let d=b[a];d._fn&&(d._fn.isOwner?(b[a]=d._fn):delete b[a],c=!0)});return c}}let hP=hN.map(a=>new hO( a, a==='computed' ));function hQ(a,b,c){if(!/_super/.test(c))return c;function d(){let a=hR(d._parent,b),e='_super' in this,f=this._super;this._super=a;let g=c.apply(this,arguments);e?(this._super=f):delete this._super;return g}d._parent=a;d._method=c;return d}function hR(a,b){if(b in a){let c=a[b];return typeof c==='function'?c:()=>c}return o}function hS(a,b,c){return`options.${a} has been deprecated in favour of options.${b}.`+(c?` You cannot specify both options, please use options.${b}.`:'')}function hT(a,b,c){if(b in a){if(!(c in a))ah(hS(b,c)),a[c]=a[b];else{throw new Error( hS(b,c,!0) )}}}function hU(a){hT(a,'beforeInit','onconstruct');hT(a,'init','onrender');hT(a,'complete','oncomplete');hT(a,'eventDefinitions','events');W(a.adaptors)&&hT(a,'adaptors','adapt')}let hV={adapt:de,css:ds,data:dv,template:hG},hW=Object.keys(c),hX=ib(hW.filter(a=>!hV[a])),hY=ib(hW.concat(hP.map(a=>a.name))),hZ=[].concat(hW.filter(a=>!hP[a]&&!hV[a]),hP,hV.template,hV.css),h_={extend:(a,b,c)=>h$('extend',a,b,c),init:(a,b,c)=>h$('init',a,b,c),reset:a=>{return hZ.filter(b=>{return b.reset&&b.reset(a)}).map(a=>a.name)},hZ};function h$(a,b,c,d){hU(d);for(let e in d){if(hX.hasOwnProperty(e)){let b=d[e];e!=='el'&&typeof b==='function'?ah(`${e} is a Ractive option that does not expect a function and will be ignored`,a==='init'?c:null):(c[e]=b)}}if(d.append&&d.enhance){throw new Error( 'Cannot use append and enhance at the same time' )}hP.forEach(e=>{e[a](b,c,d)});de[a](b,c,d);hG[a](b,c,d);ds[a](b,c,d);ia(b.prototype,c,d)}function ia(a,b,c){for(let d in c){if(!hY[d]&&c.hasOwnProperty(d)){let e=c[d];typeof e==='function'&&(e=hQ(a,d,e));b[d]=e}}}function ib(a){let b={};a.forEach(a=>b[a]=!0);return b}let ic=['template','partials','components','decorators','events'],ie=new aD( 'complete' ),ig=new aD( 'reset' ),ih=new aD( 'render' ),ii=new aD( 'unrender' );function ij(a){a=a||{};if(typeof a!=='object'){throw new Error( 'The reset method takes either no arguments, or an object containing new data' )}a=dv.init(this.constructor,this,{a});let b=a$.start(this,!0),c=this.viewmodel.wrapper;c&&c.reset?(c.reset(a)===!1&&this.viewmodel.set(a)):this.viewmodel.set(a);let d=h_.reset(this),e,f=d.length;while(f--){if(ic.indexOf(d[f])>-1){e=!0;break}}e&&(ii.fire(this),this.fragment.resetTemplate(this.template),ih.fire(this),ie.fire(this));a$.end();ig.fire(this,a);return b}function ik(a,b,c){a.forEach(a=>{if(a.type===dR&&(a.refName===b||a.name===b)){c.push(a);return}if(a.fragment)ik(a.fragment.iterations||a.fragment.items,b,c);else if(W(a.items))ik(a.items,b,c);else if(a.type===dV&&a.instance){if(a.instance.partials[b])return;ik(a.instance.fragment.items,b,c)}a.type===dQ&&(W(a.attributes)&&ik(a.attributes,b,c),W(a.conditionalAttributes)&&ik(a.conditionalAttributes,b,c))})}function il(a){a.forceResetTemplate()}function im(a,b){let c=[];ik(this.fragment.items,a,c);let d=a$.start(this,!0);this.partials[a]=b;c.forEach(il);a$.end();return d}class io{constructor(a){this.parentFragment=a.parentFragment;this.ractive=a.parentFragment.ractive;this.template=a.template;this.index=a.index;this.type=a.template.t;this.dirty=!1}bubble(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())}find(){return null}findAll(){}findComponent(){return null}findAllComponents(){}findNextNode(){return this.parentFragment.findNextNode(this)}valueOf(){return this.toString()}}class ip extends cm{get(a){a&&bK(this);let b=this.parent.get();return b?b[this.key]:undefined}handleChange(){this.dirty=!0;this.deps.forEach(bN);this.children.forEach(bN);this.clearUnresolveds()}joinKey(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){let b=new ip( this, a );this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]}}function iq(a){return a?a.get(!0):undefined}class ir extends cm{constructor(a,b){super(a.ractive.viewmodel,null);this.fragment=a;this.template=b;this.isReadonly=!0;this.fn=dE(b.s,b.r.length);this.computation=null;this.resolvers=[];this.models=this.template.r.map((a,b)=>{let c=cp(this.fragment,a),d;c||(d=this.fragment.resolve(a,a=>{aJ(this.resolvers,d);this.models[b]=a;this.bubble()}),this.resolvers.push(d));return c});this.bubble()}bubble(){let a=this.fragment.ractive,b='@'+this.template.s.replace(/_(\d+)/g,(a,b)=>{if(b>=this.models.length)return a;let c=this.models[b];return c?c.getKeypath():'@undefined'}),c={getter:()=>{let b=this.models.map(iq);return this.fn.apply(a,b)},getterString:b},d=a.viewmodel.compute(b,c);this.value=d.get();this.computation&&this.computation.unregister(this);this.computation=d;d.register(this);this.handleChange()}get(a){return this.computation.get(a)}getKeypath(){return this.computation?this.computation.getKeypath():'@undefined'}handleChange(){this.deps.forEach(bN);this.children.forEach(bN);this.clearUnresolveds()}joinKey(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){let b=new ip( this, a );this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]}mark(){this.handleChange()}retrieve(){return this.get()}teardown(){this.unbind();this.fragment=undefined;this.computation&&this.computation.teardown();this.computation=undefined;super.teardown()}unregister(a){super.unregister(a);this.deps.length||this.teardown()}unbind(){this.resolvers.forEach(bS);let a=this.models.length;while(a--){this.models[a]&&this.models[a].unregister(this)}}}class is extends cm{constructor(a,b){super(a,b)}applyValue(a){if(X(a,this.value))return;let b=this.parent,c=[this.key];while(b){if(b.base){let d=b.model.joinAll(c);d.applyValue(a);break}c.unshift(b.key);b=b.parent}}joinKey(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){let b=new is( this, a );this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]}}class it extends cm{constructor(a,b){super(null,null);this.root=a.ractive.viewmodel;this.resolvers=[];this.base=iu(a,b);let c;this.base||(c=a.resolve(b.r,a=>{this.base=a;this.bubble();aJ(this.resolvers,c)}),this.resolvers.push(c));let d={handleChange:()=>this.bubble()};this.members=b.m.map((b,c)=>{if(typeof b==='string'){return{get:()=>b}}let e,f;if(b.t===eg){e=cp(a,b.n);e?e.register(d):(f=a.resolve(b.n,a=>{this.members[c]=a;a.register(d);this.bubble();aJ(this.resolvers,f)}),this.resolvers.push(f));return e}e=new ir( a, b );e.register(d);return e});this.isUnresolved=!0;this.bubble()}bubble(){if(!this.base)return;let a=this.members.length;while(a--){if(!this.members[a])return}this.isUnresolved=!1;let b=this.members.map(a=>av(String(a.get()))),c=this.base.joinAll(b);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this));this.model=c;this.parent=c.parent;c.register(this);c.registerTwowayBinding(this);this.keypathModel&&this.keypathModel.handleChange();this.mark()}forceResolution(){this.resolvers.forEach(a=>a.forceResolution());this.bubble()}get(){return this.model?this.model.get():undefined}getValue(){let a=this.bindings.length;while(a--){let b=this.bindings[a].getValue();if(b!==this.value)return b}return this.value}getKeypath(){return this.model?this.model.getKeypath():'@undefined'}handleChange(){this.mark()}joinKey(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){let b=new is( this, a );this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]}retrieve(){return this.get()}set(a){if(!this.model)throw new Error( 'Unresolved reference expression. This should not happen!' );this.model.set(a)}unbind(){this.resolvers.forEach(bS)}}function iu(a,b){if(b.r){return cp(a,b.r)}else if(b.x){return new ir( a, b.x )}else{return new it( a, b.rx )}}function iv(a){if(a.template.z){a.aliases={};let b=a.template.z;for(let c=0;c<b.length;c++)a.aliases[b[c].n]=iu(a.parentFragment,b[c].x)}}class iw extends io{constructor(a){super(a);this.fragment=null}bind(){iv(this);this.fragment=new lL({owner:this,template:this.template.f}).bind()}detach(){return this.fragment?this.fragment.detach():L()}find(a){if(this.fragment){return this.fragment.find(a)}}findAll(a,b){this.fragment&&this.fragment.findAll(a,b)}findComponent(a){if(this.fragment){return this.fragment.findComponent(a)}}findAllComponents(a,b){this.fragment&&this.fragment.findAllComponents(a,b)}firstNode(a){return this.fragment&&this.fragment.firstNode(a)}rebind(){iv(this);this.fragment&&this.fragment.rebind()}render(a){this.rendered=!0;this.fragment&&this.fragment.render(a)}toString(a){return this.fragment?this.fragment.toString(a):''}unbind(){this.aliases={};this.fragment&&this.fragment.unbind()}unrender(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1}update(){this.dirty&&(this.dirty=!1,this.fragment.update())}}function ix(a,b,c,d){d&&e.shuffle(d)}let iy=['pop','push','reverse','shift','sort','splice','unshift'],iz=[];iy.forEach(a=>{let b=function(...b){let c=cO(this.length,a,b),d=Array.prototype[a].apply(this,arguments);a$.start();this._ractive.setting=!0;let e=this._ractive.wrappers.length;while(e--)ix(this._ractive.wrappers[e],this,a,c);a$.end();this._ractive.setting=!1;return d};Q(iz,a,{value:b})});let iA,iB;({}).__proto__?(iA=a=>a.__proto__=iz,iB=a=>a.__proto__=Array.prototype):(iA=a=>{let b=iy.length;while(b--){let c=iy[b];Q(a,c,{value:iz[c],configurable:!0})}},iB=a=>{let b=iy.length;while(b--)delete a[iy[b]]});iA.unpatch=iB;var iC=iA;let iD='Something went wrong in a rather interesting way';var iE={filter ( a){return W(a)&&(!a._ractive||!a._ractive.setting)},wrap ( a,b,c){return new iF( a, b, c )}};class iF{constructor(a,b){this.root=a;this.value=b;this.__model=null;b._ractive||(Q(b,'_ractive',{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),iC(b));b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a));b._ractive.instances[a._guid]+=1;b._ractive.wrappers.push(this)}get(){return this.value}reset(a){return this.value===a}teardown(){var a,b,c,d,e;a=this.value;b=a._ractive;c=b.wrappers;d=b.instances;if(b.setting){return !1}e=c.indexOf(this);if(e===-1){throw new Error( iD )}c.splice(e,1);if(!c.length)delete a._ractive,iC.unpatch(this.value);else{d[this.root._guid]-=1;if(!d[this.root._guid]){e=d.indexOf(this.root);if(e===-1){throw new Error( iD )}d.splice(e,1)}}}}let iG;try{Object.defineProperty({},'test',{get() {},set() {}}),iG={filter ( a){return a&&typeof a==='object'},wrap ( a,b,c){return new iK( a, b, c )}}}catch(a){iG=!1};var iH=iG;function iI(a,b,c){if(a.set&&a.set.__magic){a.set.__magic.dependants.push({b,c});return a}let d,e=[{b,c}],f={get:()=>{return'value' in a?a.value:a.get()},set:b=>{if(d)return;'value' in a?(a.value=b):a.set(b);d=!0;e.forEach(({ a, c })=>{a.set(c,b)});d=!1},enumerable:!0};f.set.__magic={e,a};return f}function iJ(a,b,c){if(!a.set||!a.set.__magic)return !0;let d=a.set.__magic,e=d.length;while(e--){let a=d[e];if(a.ractive===b&&a.keypath===c){d.splice(e,1);return !1}}}class iK{constructor(a,b,c){this.ractive=a;this.value=b;this.keypath=c;this.originalDescriptors={};Object.keys(b).forEach(b=>{let d=Object.getOwnPropertyDescriptor(this.value,b);this.originalDescriptors[b]=d;let e=c?`${c}.${av( b )}`:av(b),f=iI(d,a,e);Object.defineProperty(this.value,b,f)})}get(){return this.value}reset(a){return this.value===a}set(a,b){this.value[a]=b}teardown(){Object.keys(this.value).forEach(a=>{let b=Object.getOwnPropertyDescriptor(this.value,a);if(!b.set||!b.set.__magic)return;iJ(b);b.set.__magic.dependants.length===1&&Object.defineProperty(this.value,a,b.set.__magic.originalDescriptor)})}}class iL{constructor(a,b,c){this.value=b;this.magic=!0;this.magicWrapper=iH.wrap(a,b,c);this.arrayWrapper=iE.wrap(a,b,c);Object.defineProperty(this,'__model',{get () {return this.arrayWrapper.__model},set ( a){this.arrayWrapper.__model=a}})}get(){return this.value}teardown(){this.arrayWrapper.teardown();this.magicWrapper.teardown()}reset(a){return this.arrayWrapper.reset(a)&&this.magicWrapper.reset(a)}}var iM={filter ( a,b,c){return iH.filter(a,b,c)&&iE.filter(a)},wrap ( a,b,c){return new iL( a, b, c )}};function iN(a){let b=a.replace(/^\t+/gm,a=>a.split('\t').join('  ')).split('\n'),c=b.length<2?0:b.slice(1).reduce((a,b)=>{return Math.min(a,/^\s*/.exec(b)[0].length)},Infinity);return b.map((a,b)=>{return'    '+(b?a.substring(c):a)}).join('\n')}function iO(a){if(!a)return'';let b=a.split('\n'),c=iP.name+'.getValue',d=[],e=b.length;for(let f=1;f<e;f+=1){let a=b[f];if(~a.indexOf(c)){return d.join('\n')}else d.push(a)}}class iP extends cm{constructor(a,b,c){super(null,null);this.root=this.parent=a;this.signature=b;this.key=c;this.isExpression=c&&c[0]==='@';this.isReadonly=!this.signature.setter;this.context=a.computationContext;this.dependencies=[];this.children=[];this.childByKey={};this.deps=[];this.boundsSensitive=!0;this.dirty=!0;this.shuffle=undefined}get(a){a&&bK(this);this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.adapt());return this.value}getValue(){bI();let a;try{a=this.signature.getter.call(this.context)}catch(a){ah(`Failed to compute ${this.getKeypath()}: ${a.message || a}`);if(k){console.groupCollapsed&&console.groupCollapsed('%cshow details','color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;');let b=iN(this.signature.getterString),c=this.signature.getterUseStack?'\n\n'+iO(a.stack):'';console.error(`${a.name}: ${a.message}\n\n${b}${c}`);console.groupCollapsed&&console.groupEnd()}};let b=bJ();this.setDependencies(b);return a}handleChange(){this.dirty=!0;this.deps.forEach(bN);this.children.forEach(bN);this.clearUnresolveds()}joinKey(a){if(a===undefined||a==='')return this;if(!this.childByKey.hasOwnProperty(a)){let b=new ip( this, a );this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]}mark(){this.handleChange()}set(a){if(!this.signature.setter){throw new Error( `Cannot set read-only computed value '${this.key}'` )}this.signature.setter(a)}setDependencies(a){let b=this.dependencies.length;while(b--){let c=this.dependencies[b];~a.indexOf(c)||c.unregister(this)}b=a.length;while(b--){let c=a[b];~this.dependencies.indexOf(c)||c.register(this)}this.dependencies=a}teardown(){let a=this.dependencies.length;while(a--){this.dependencies[a]&&this.dependencies[a].unregister(this)}this.root.computations[this.key]===this&&delete this.root.computations[this.key];super.teardown()}}class iQ extends cm{constructor(a){super(null,'');this.value=a;this.isRoot=!0;this.root=this;this.adaptors=[];this.ractive=a;this.changes={}}getKeypath(){return'@ractive'}}let iR=Object.prototype.hasOwnProperty;class iS extends cm{constructor(a){super(null,null);this.changes={};this.isRoot=!0;this.root=this;this.ractive=a.ractive;this.value=a.data;this.adaptors=a.adapt;this.adapt();this.mappings={};this.computationContext=a.ractive;this.computations={}}applyChanges(){this._changeHash={};this.flush();return this._changeHash}compute(a,b){let c=new iP( this, b, a );this.computations[a]=c;return c}extendChildren(a){let b=this.mappings;Object.keys(b).forEach(c=>{a(c,b[c])});let c=this.computations;Object.keys(c).forEach(b=>{let d=c[b];d.isExpression||a(b,d)})}get(a){a&&bK(this);let b=S({},this.value);this.extendChildren((a,c)=>{b[a]=c.value});return b}getKeypath(){return''}getRactiveModel(){return this.ractiveModel||(this.ractiveModel=new iQ( this.ractive ))}getValueChildren(){let a=super.getValueChildren(this.value);this.extendChildren((b,c)=>{a.push(c)});return a}handleChange(){this.deps.forEach(bN)}has(a){if(a in this.mappings||a in this.computations)return !0;let b=this.value;a=ay(a);if(iR.call(b,a))return !0;let c=b.constructor;while(c!==Function&&c!==Array&&c!==Object){if(iR.call(c.prototype,a))return !0;c=c.constructor}return !1}joinKey(a){if(a==='@global')return co;if(a==='@ractive')return this.getRactiveModel();return this.mappings.hasOwnProperty(a)?this.mappings[a]:this.computations.hasOwnProperty(a)?this.computations[a]:super.joinKey(a)}map(a,b){this.mappings[a]=b;b.register(this)}set(a){let b=this.wrapper;if(b){let c=!b.reset||b.reset(a)===!1;c&&(b.teardown(),this.wrapper=null,this.value=a,this.adapt())}else this.value=a,this.adapt();this.deps.forEach(bN);this.children.forEach(bO);this.clearUnresolveds()}retrieve(){return this.value}teardown(){let a=Object.keys(this.mappings),b=a.length;while(b--){this.mappings[a[b]]&&this.mappings[a[b]].unregister(this)}super.teardown()}update(){}updateFromBindings(a){super.updateFromBindings(a);a&&Object.keys(this.mappings).forEach(b=>{let c=this.mappings[b];c.updateFromBindings(a)})}}function iT(a,b,c){let d,e,f,g,h;typeof c==='function'&&(d=dt(c,a),f=c.toString(),g=!0);typeof c==='string'&&(d=hE(c,a),f=c);typeof c==='object'&&(typeof c.get==='string'?(d=hE(c.get,a),f=c.get):typeof c.get==='function'?(d=dt(c.get,a),f=c.get.toString(),g=!0):ad('`%s` computation must have a `get()` method',b),typeof c.set==='function'&&(e=dt(c.set,a),h=c.set.toString()));return{d,e,f,h,g}}let iU=new aD( 'construct' ),iV=['adaptors','components','decorators','easing','events','interpolators','partials','transitions'],iW=0;function iX(a,b){ms.DEBUG&&ab();i_(a);Q(a,'data',{get:i$});iU.fire(a,b);iV.forEach(c=>{a[c]=S(P(a.constructor[c]||null),b[c])});let c=new iS({adapt:iZ(a,a.adapt,b),data:dv.init(a.constructor,a,b),a});a.viewmodel=c;let d=S(P(a.constructor.prototype.computed),b.computed);for(let e in d){let b=iT(a,e,d[e]);c.compute(e,b)}}function iY(a,b){let c=a.slice(),d=b.length;while(d--){~c.indexOf(b[d])||c.push(b[d])}return c}function iZ(a,b,c){b=b.map(g);let d=aH(c.adapt).map(g);d=iY(b,d);let e='magic' in c?c.magic:a.magic,f='modifyArrays' in c?c.modifyArrays:a.modifyArrays;if(e){if(!l){throw new Error( 'Getters and setters (magic mode) are not supported in this browser' )}f&&d.push(iM);d.push(iH)}f&&d.push(iE);return d;function g(b){typeof b==='string'&&(b=am('adaptors',a,b),b||ad(al(b,'adaptor')));return b}}function i_(a){a._guid='r-'+iW++;a._subs=P(null);a._config={};a.nodes={};a.event=null;a._eventQueue=[];a._liveQueries=[];a._liveComponentQueries=[];a._observers=[];a._links={};a.component||(a.root=a,a.parent=a.container=null)}function i$(){throw new Error( 'Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead' )}function ja(a,b){return a[b._guid]||(a[b._guid]=[])}function jb(a,b){var c=ja(a.queue,b);a.hook.fire(b);while(c.length)jb(a,c.shift());delete a.queue[b._guid]}class jc{constructor(a){this.hook=new aD( a );this.inProcess={};this.queue={}}begin(a){this.inProcess[a._guid]=!0}end(a){let b=a.parent;!b||!this.inProcess[b._guid]?jb(this,a):ja(this.queue,b).push(a);delete this.inProcess[a._guid]}}let jd=new aD( 'config' ),je=new jc( 'init' );function jf(a,b,c){Object.keys(a.viewmodel.computations).forEach(b=>{let c=a.viewmodel.computations[b];a.viewmodel.value.hasOwnProperty(b)&&c.set(a.viewmodel.value[b])});h_.init(a.constructor,a,b);jd.fire(a);je.begin(a);let d;if(a.template){let b;(c.cssIds||a.cssId)&&(b=c.cssIds?c.cssIds.slice():[],a.cssId&&b.push(a.cssId));a.fragment=d=new lL({owner:a,template:a.template,b}).bind(a.viewmodel)}je.end(a);if(d){let b=M(a.el);if(b){let c=a.render(b,a.append);ms.DEBUG_PROMISES&&c.catch(b=>{ai('Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;');ah('An error happened during rendering',{a});ae(b);throw b})}}}function jg(a){let b={},c={};while(a){if(a.parent&&(a.parent.indexRef||a.parent.keyRef)){let d=a.parent.indexRef;d&&!(d in c)&&(c[d]=a.index);d=a.parent.keyRef;d&&!(d in b)&&(b[d]=a.key)}a.componentParent&&!a.ractive.isolated?(a=a.componentParent):(a=a.parent)}return{b,c}}let jh=/^event(?:\.(.+))?$/,ji=/^arguments\.(\d*)$/,jj=/^\$(\d*)$/;class jk{constructor(a,b,c){this.owner=a;this.event=b;this.template=c;this.ractive=a.parentFragment.ractive;this.parentFragment=a.parentFragment;this.context=null;this.passthru=!1;this.method=null;this.resolvers=null;this.models=null;this.argsFn=null;this.action=null;this.args=null}bind(){this.context=this.parentFragment.findContext();let a=this.template;a.m?(this.method=a.m,this.passthru=!!a.g,a.a&&(this.resolvers=[],this.models=a.a.r.map((a,b)=>{if(jh.test(a)){return{event:!0,keys:a.length>5?ax(a.slice(6)):[],unbind:o}}let c=ji.exec(a);if(c){return{argument:!0,index:c[1]}}let d=jj.exec(a);if(d){return{argument:!0,index:d[1]-1}}let e,f=cp(this.parentFragment,a);f||(e=this.parentFragment.resolve(a,a=>{this.models[b]=a;aJ(this.resolvers,e)}),this.resolvers.push(e));return f}),this.argsFn=dE(a.a.s,a.a.r.length))):(this.action=typeof a==='string'?a:typeof a.n==='string'?a.n:new lL({owner:this,template:a.n}),this.args=a.a?(typeof a.a==='string'?[a.a]:a.a):a.d?new lL({owner:this,template:a.d}):[]);this.template.n&&typeof this.template.n!=='string'&&this.action.bind();this.template.d&&this.args.bind()}bubble(){this.dirty||(this.dirty=!0,this.owner.bubble())}fire(a,b = []){if(a){let b=jg(this.parentFragment);a.keypath=this.context.getKeypath(this.ractive);a.rootpath=this.context.getKeypath();a.context=this.context.get();a.index=b.index;a.key=b.key}if(this.method){if(typeof this.ractive[this.method]!=='function'){throw new Error( `Attempted to call a non-existent method ("${this.method}")` )}let c;a&&b.unshift(a);if(this.models){let d=this.models.map(c=>{if(!c)return undefined;if(c.event){let b=a,d=c.keys.slice();while(d.length)b=b[d.shift()];return b}if(c.argument){return b?b[c.index]:void 0}if(c.wrapper){return c.wrapper.value}return c.get()});c=this.argsFn.apply(null,d)}this.passthru&&(c=c?c.concat(b):b);let d=this.ractive,e=d.event;d.event=a;let f=d[this.method].apply(d,c),g;f===!1&&(g=a.original)&&(g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation());d.event=e}else{let c=this.action.toString(),d=this.template.d?this.args.getArgsList():this.args;b.length&&(d=d.concat(b));a&&(a.name=c);bz(this.ractive,c,{a,d})}}rebind(){this.unbind();this.bind()}render(){this.event.listen(this)}unbind(){let a=this.template;a.m?(this.resolvers&&this.resolvers.forEach(bS),this.resolvers=[],this.models=null):(this.action.unbind&&this.action.unbind(),this.args.unbind&&this.args.unbind())}unrender(){this.event.unlisten()}update(){if(this.method||!this.dirty)return;this.dirty=!1;this.action.update&&this.action.update();this.template.d&&this.args.update()}}class jl{constructor(a,b){this.ractive=a;this.name=b;this.handler=null}listen(a){let b=this.ractive;this.handler=b.on(this.name,function(){let c;arguments.length&&arguments[0]&&arguments[0].node&&(c=Array.prototype.shift.call(arguments),c.component=b);let d=Array.prototype.slice.call(arguments);a.fire(c,d);return !1})}unlisten(){this.handler.cancel()}}function jm(a){let b=a.ractive;do {let c=b._liveComponentQueries,d=c.length;while(d--){let b=c[d],e=c[`_${b}`];e.test(a)&&(e.add(a.instance),a.liveQueries.push(e))}}while(b=b.parent)}function jn(a){let b=a.ractive;while(b){let c=b._liveComponentQueries[`_${a.name}`];c&&c.remove(a);b=b.parent}}function jo(a){a.makeDirty()}let jp=new aD( 'teardown' );class jq extends io{constructor(a,b){super(a);this.type=dV;let c=P(b.prototype);this.instance=c;this.name=a.template.e;this.parentFragment=a.parentFragment;this.complexMappings=[];this.liveQueries=[];c.el&&ah(`The <${this.name}> component has a default 'el' property; it has been disregarded`);let d=a.template.p||{};('content' in d)||(d.content=a.template.f||[]);this._partials=d;this.yielders={};let e=a.parentFragment,f;while(e){if(e.owner.type===dW){f=e.owner.container;break}e=e.parent}c.parent=this.parentFragment.ractive;c.container=f||null;c.root=c.parent.root;c.component=this;iX(this.instance,{d});c._inlinePartials=d;this.eventHandlers=[];this.template.v&&this.setupEvents()}bind(){let a=this.instance.viewmodel,b=a.value;this.template.a&&Object.keys(this.template.a).forEach(c=>{let d=this.template.a[c],e,f;if(d===0)a.joinKey(c).set(!0);else if(typeof d==='string'){let b=gS(d);a.joinKey(c).set(b?b.value:d)}else W(d)&&(d.length===1&&d[0].t===dL?(e=iu(this.parentFragment,d[0]),e||(ai(`The ${c}='{{${d[0].r}}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity`,{ractive:this.instance}),this.parentFragment.ractive.get(c),e=this.parentFragment.findContext().joinKey(c)),a.map(c,e),e.get()===undefined&&c in b&&e.set(b[c])):(f=new lL({owner:this,d}).bind(),e=a.joinKey(c),e.set(f.valueOf()),f.bubble=()=>{lL.prototype.bubble.call(f);f.update();e.set(f.valueOf())},this.complexMappings.push(f)))});jf(this.instance,{partials:this._partials},{cssIds:this.parentFragment.cssIds});this.eventHandlers.forEach(bL)}bubble(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())}checkYielders(){Object.keys(this.yielders).forEach(a=>{if(this.yielders[a].length>1){a$.end();throw new Error( `A component template can only have one {{yield${a ? ' ' + a : ''}}} declaration at a time` )}})}detach(){return this.instance.fragment.detach()}find(a){return this.instance.fragment.find(a)}findAll(a,b){this.instance.fragment.findAll(a,b)}findComponent(a){if(!a||this.name===a)return this.instance;if(this.instance.fragment){return this.instance.fragment.findComponent(a)}}findAllComponents(a,b){b.test(this)&&(b.add(this.instance),b.live&&this.liveQueries.push(b));this.instance.fragment.findAllComponents(a,b)}firstNode(a){return this.instance.fragment.firstNode(a)}rebind(){this.complexMappings.forEach(bQ);this.liveQueries.forEach(jo);let a=this.instance.viewmodel;a.mappings={};this.template.a&&Object.keys(this.template.a).forEach(b=>{let c=this.template.a[b],d;W(c)&&c.length===1&&c[0].t===dL&&(d=iu(this.parentFragment,c[0]),d||(ai(`The ${b}='{{${c[0].r}}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity`,{ractive:this.instance}),this.parentFragment.ractive.get(b),d=this.parentFragment.findContext().joinKey(b)),a.map(b,d))});this.instance.fragment.rebind(a)}render(a,b){dc(this.instance,a,null,b);this.checkYielders();this.eventHandlers.forEach(bP);jm(this);this.rendered=!0}setupEvents(){let a=this.eventHandlers;Object.keys(this.template.v).forEach(b=>{let c=b.split('-'),d=this.template.v[b];c.forEach(b=>{let c=new jl( this.instance, b );a.push(new jk( this, c, d ))})})}toString(){return this.instance.toHTML()}unbind(){this.complexMappings.forEach(bS);let a=this.instance;a.viewmodel.teardown();a.fragment.unbind();a._observers.forEach(bM);jn(this);a.fragment.rendered&&a.el.__ractive_instances__&&aJ(a.el.__ractive_instances__,a);Object.keys(a._links).forEach(b=>a._links[b].unlink());jp.fire(a)}unrender(a){this.shouldDestroy=a;this.instance.unrender();this.eventHandlers.forEach(bT);this.liveQueries.forEach(a=>a.remove(this.instance))}update(){this.dirty=!1;this.instance.fragment.update();this.checkYielders();this.eventHandlers.forEach(bV);this.complexMappings.forEach(bV)}}class jr extends io{bind(){}render(){}teardown(){}toString(){return'<!DOCTYPE'+this.template.a+'>'}unbind(){}unrender(){}}function js(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})}let jt=/\s+/,ju={'float':'cssFloat'},jv=/\/\*(?:[\s\S]*?)\*\//g,jw=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\1).)*\2/gi,jx=/\0(\d+)/g;function jy(a){let b=[];if(typeof a!=='string')return{};return a.replace(jw,a=>`\0${b.push( a ) - 1}`).replace(jv,'').split(';').filter(a=>!!a.trim()).map(a=>a.replace(jx,(a,c)=>b[c])).reduce((a,b)=>{let c=b.indexOf(':'),d=js(b.substr(0,c).trim());a[ju[d]||d]=b.substr(c+1).trim();return a},{})}function jz(a){let b=a.split(jt),c=b.length;while(c--){b[c]||b.splice(c,1)}return b}let jA=[undefined,'text','search','url','email','hidden','password','search','reset','submit'];function jB(a){if(c==='id')return jC;if(c==='value'){if(b.name==='select'&&c==='value'){return b.getAttribute('multiple')?jD:jE}if(b.name==='textarea')return jI;if(b.getAttribute('contenteditable')!=null)return jF;if(b.name==='input'){let a=b.getAttribute('type');if(a==='file')return o;if(a==='radio'&&b.binding&&b.binding.attribute.name==='name')return jG;if(~jA.indexOf(a))return jI}return jH}let d=b.node;if(a.isTwoway&&c==='name'){if(d.type==='radio')return jJ;if(d.type==='checkbox')return jK}if(c==='style')return jL;if(c.indexOf('style-')===0)return jN;if(c==='class'&&(!d.namespaceURI||d.namespaceURI===s))return jO;if(c.indexOf('class-')===0)return jP;if(a.isBoolean)return jQ;if(a.namespace&&a.namespace!==a.node.namespaceURI)return jS;return jR}function jC(){let b=this.getValue();delete this.ractive.nodes[a.id];this.ractive.nodes[b]=a;a.id=b}function jD(){let a=this.getValue();W(a)||(a=[a]);let b=this.node.options,c=b.length;while(c--){let d=b[c],e=d._ractive?d._ractive.value:d.value;d.selected=aF(a,e)}}function jE(){let a=this.getValue();if(!this.locked){this.node._ractive.value=a;let b=this.node.options,c=b.length;while(c--){let d=b[c],e=d._ractive?d._ractive.value:d.value;if(e==a){d.selected=!0;return}}this.node.selectedIndex=-1}}function jF(){let a=this.getValue();this.locked||(this.node.innerHTML=a===undefined?'':a)}function jG(){let a=this.node,b=a.checked,c=this.getValue();a.value=this.node._ractive.value=c;a.checked=c===this.element.getAttribute('name');b&&!a.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function jH(){if(!this.locked){let a=this.getValue();this.node.value=this.node._ractive.value=a;this.node.setAttribute('value',a)}}function jI(){if(!this.locked){let a=this.getValue();this.node._ractive.value=a;this.node.value=O(a);this.node.setAttribute('value',O(a))}}function jJ(){this.node.checked=this.getValue()==this.node._ractive.value}function jK(){let c=a.binding,d=this.getValue(),e=a.getAttribute('value');if(!W(d))c.isChecked=b.checked=d==e;else{let a=d.length;while(a--){if(e==d[a]){c.isChecked=b.checked=!0;return}}c.isChecked=b.checked=!1}}function jL(){let a=jy(this.getValue()||''),b=this.node.style,c=Object.keys(a),d=this.previous||[],e=0;while(e<c.length){c[e] in b&&(b[c[e]]=a[c[e]]),e++}e=d.length;while(e--){!~c.indexOf(d[e])&&d[e] in b&&(b[d[e]]='')}this.previous=c}let jM=/(-.)/g;function jN(){this.styleName||(this.styleName=this.name.substr(6).replace(jM,a=>a.charAt(1).toUpperCase()));this.node.style[this.styleName]=this.getValue()}function jO(){let a=jz(O(this.getValue())),b=jz(this.node.className),c=this.previous||[],d=0;while(d<a.length){~b.indexOf(a[d])||b.push(a[d]),d++}d=c.length;while(d--){if(!~a.indexOf(c[d])){let a=b.indexOf(c[d]);~a&&b.splice(a,1)}}this.node.className=b.join(' ');this.previous=a}function jP(){let a=this.name.substr(6),b=jz(this.node.className),c=this.getValue();c&&!~b.indexOf(a)?b.push(a):!c&&~b.indexOf(a)&&b.splice(b.indexOf(a),1);this.node.className=b.join(' ')}function jQ(){this.locked||(this.useProperty?(this.node[this.propertyName]=this.getValue()):this.getValue()?this.node.setAttribute(this.propertyName,''):this.node.removeAttribute(this.propertyName))}function jR(){this.node.setAttribute(this.name,O(this.getString()))}function jS(){this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(':')+1),O(this.getString()))}var jT={'accept-charset':'acceptCharset',accesskey:'accessKey',bgcolor:'bgColor',class:'className',codebase:'codeBase',colspan:'colSpan',contenteditable:'contentEditable',datetime:'dateTime',dirname:'dirName',for:'htmlFor','http-equiv':'httpEquiv',ismap:'isMap',maxlength:'maxLength',novalidate:'noValidate',pubdate:'pubDate',readonly:'readOnly',rowspan:'rowSpan',tabindex:'tabIndex',usemap:'useMap'};function jU(a,b){let c=`xmlns:${b}`;while(a){if(a.hasAttribute(c))return a.getAttribute(c);a=a.parentNode}return B[b]}class jV extends io{constructor(a){super(a);this.name=a.name;this.namespace=null;this.element=a.element;this.parentFragment=a.element.parentFragment;this.ractive=this.parentFragment.ractive;this.rendered=!1;this.updateDelegate=null;this.fragment=null;this.value=null;W(a.template)?(this.fragment=new lL({owner:this,template:a.template})):(this.value=a.template,this.value===0&&(this.value=''));this.interpolator=this.fragment&&this.fragment.items.length===1&&this.fragment.items[0].type===dL&&this.fragment.items[0]}bind(){this.fragment&&this.fragment.bind()}bubble(){this.dirty||(this.element.bubble(),this.dirty=!0)}getString(){return this.fragment?this.fragment.toString():this.value!=null?''+this.value:''}getValue(){return this.fragment?this.fragment.valueOf():fW.test(this.name)?!0:this.value}rebind(){this.fragment&&this.fragment.rebind()}render(){let a=this.element.node;this.node=a;(!a.namespaceURI||a.namespaceURI===B.html)&&(this.propertyName=jT[this.name]||this.name,a[this.propertyName]!==undefined&&(this.useProperty=!0),(fW.test(this.name)||this.isTwoway)&&(this.isBoolean=!0),this.propertyName==='value'&&(a._ractive.value=this.value));if(a.namespaceURI){let b=this.name.indexOf(':');b!==-1?(this.namespace=jU(a,this.name.slice(0,b))):(this.namespace=a.namespaceURI)}this.rendered=!0;this.updateDelegate=jB(this);this.updateDelegate()}toString(){let a=this.getValue();if(this.name==='value'&&(this.element.getAttribute('contenteditable')!==undefined||(this.element.name==='select'||this.element.name==='textarea'))){return}if(this.name==='name'&&this.element.name==='input'&&this.interpolator&&this.element.getAttribute('type')==='radio'){return`name="{{${this.interpolator.model.getKeypath()}}}"`}if(fW.test(this.name))return a?this.name:'';if(a==null)return'';let b=O(this.getString()).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');return b?`${this.name}="${b}"`:this.name}unbind(){this.fragment&&this.fragment.unbind()}update(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate())}}let jW=h?C('div'):null;class jX extends io{constructor(a){super(a);this.attributes=[];this.owner=a.owner;this.fragment=new lL({ractive:this.ractive,owner:this,template:[this.template]});this.dirty=!1}bind(){this.fragment.bind()}bubble(){this.dirty||(this.dirty=!0,this.owner.bubble())}rebind(){this.fragment.rebind()}render(){this.node=this.owner.node;this.isSvg=this.node.namespaceURI===v;this.rendered=!0;this.dirty=!0;this.update()}toString(){return this.fragment.toString()}unbind(){this.fragment.unbind()}unrender(){this.rendered=!1}update(){let a,b;this.dirty&&(this.dirty=!1,this.fragment.update(),this.rendered&&(a=this.fragment.toString(),b=jY(a,this.isSvg),this.attributes.filter(a=>jZ(b,a)).forEach(a=>{this.node.removeAttribute(a.name)}),b.forEach(a=>{this.node.setAttribute(a.name,a.value)}),this.attributes=b))}}function jY(a,b){let c=b?'svg':'div';return a?(jW.innerHTML=`<${c} ${a}></${c}>`)&&aK(jW.childNodes[0].attributes):[]}function jZ(a,b){let c=a.length;while(c--){if(a[c].name===b.name){return !1}}return !0}let j_={update:o,teardown:o};class j${constructor(a,b){this.owner=a;this.template=b;this.parentFragment=a.parentFragment;this.ractive=a.ractive;this.dynamicName=typeof b.n==='object';this.dynamicArgs=!!b.d;this.dynamicName?(this.nameFragment=new lL({owner:this,template:b.n})):(this.name=b.n||b);this.dynamicArgs?(this.argsFragment=new lL({owner:this,template:b.d})):(this.args=b.a||[]);this.node=null;this.intermediary=null}bind(){this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString());this.dynamicArgs&&this.argsFragment.bind()}bubble(){this.dirty||(this.dirty=!0,this.owner.bubble())}rebind(){this.dynamicName&&this.nameFragment.rebind();this.dynamicArgs&&this.argsFragment.rebind()}render(){let a=am('decorators',this.ractive,this.name);if(!a){ag(al(this.name,'decorator'));this.intermediary=j_;return}this.node=this.owner.node;let b=this.dynamicArgs?this.argsFragment.getArgsList():this.args;this.intermediary=a.apply(this.ractive,[this.node].concat(b));if(!this.intermediary||!this.intermediary.teardown){throw new Error( `The '${this.name}' decorator must return an object with a teardown method` )}}unbind(){this.dynamicName&&this.nameFragment.unbind();this.dynamicArgs&&this.argsFragment.unbind()}unrender(){this.intermediary&&this.intermediary.teardown()}update(){if(!this.dirty)return;this.dirty=!1;let a=!1;if(this.dynamicName&&this.nameFragment.dirty){let b=this.nameFragment.toString();a=b!==this.name;this.name=b}if(this.intermediary){if(a||!this.intermediary.update)this.unrender(),this.render();else{if(this.dynamicArgs){if(this.argsFragment.dirty){let a=this.argsFragment.getArgsList();this.intermediary.update.apply(this.ractive,a)}}else this.intermediary.update.apply(this.ractive,this.args)}}this.dynamicName&&this.nameFragment.dirty&&this.nameFragment.update();this.dynamicArgs&&this.argsFragment.dirty&&this.argsFragment.update()}}class ka{constructor(a,b){a.indexOf('*')!==-1&&ad(`Only component proxy-events may contain "*" wildcards, <${b.name} on-${a}="..."/> is not valid`);this.name=a;this.owner=b;this.node=null;this.handler=null}listen(a){let b=this.node=this.owner.node,c=this.name;(`on${c}` in b)||ag(al(c,'events'));b.addEventListener(c,this.handler=function(c){a.fire({b,original:c})},!1)}unlisten(){this.node.removeEventListener(this.name,this.handler,!1)}}class kb{constructor(a,b){this.eventPlugin=a;this.owner=b;this.handler=null}listen(a){let b=this.owner.node;this.handler=this.eventPlugin(b,(c = {})=>{c.node=c.node||b;a.fire(c)})}unlisten(){this.handler.teardown()}}let kc;if(!i)kc=null;else{let a={},b=C('div').style;kc=function(c){c=js(c);if(!a[c]){if(b[c]!==undefined)a[c]=c;else{let d=c.charAt(0).toUpperCase()+c.substring(1),e=n.length;while(e--){let f=n[e];if(b[f+d]!==undefined){a[c]=f+d;break}}}}return a[c]}}var kd=kc;let ke,kf='hidden';if(h){let a;if(kf in h)a='';else{let b=n.length;while(b--){let c=n[b];kf=c+'Hidden';if(kf in h){a=c;break}}}a!==undefined?(h.addEventListener(a+'visibilitychange',kg),kg()):('onfocusout' in h?(h.addEventListener('focusout',kh),h.addEventListener('focusin',ki)):(g.addEventListener('pagehide',kh),g.addEventListener('blur',kh),g.addEventListener('pageshow',ki),g.addEventListener('focus',ki)),ke=!0)}function kg(){ke=!h[kf]}function kh(){ke=!1}function ki(){ke=!0}let kj=new RegExp( '^-(?:'+n.join('|')+')-' );function kk(a){return a.replace(kj,'')}let kl=new RegExp( '^(?:'+n.join('|')+')([A-Z])' );function km(a){if(!a)return'';kl.test(a)&&(a='-'+a);return a.replace(/[A-Z]/g,a=>'-'+a.toLowerCase())}let kn;if(!i)kn=null;else{let a=C('div').style,b=a=>a,c={},d={},e,f,g,h,i,j;a.transition!==undefined?(e='transition',f='transitionend',g=!0):a.webkitTransition!==undefined?(e='webkitTransition',f='webkitTransitionEnd',g=!0):(g=!1);e&&(h=e+'Duration',i=e+'Property',j=e+'TimingFunction');kn=function(a,e,k,l,m){setTimeout(()=>{let n,o;function p(){n&&o&&(a.ractive.fire(a.name+':end',a.node,a.isIntro),m())}let q=(a.node.namespaceURI||'')+a.node.tagName,r=a.node.style,s={property:r[i],timing:r[j],duration:r[h]};r[i]=l.map(kd).map(km).join(',');r[j]=km(k.easing||'linear');r[h]=k.duration/1000+'s';function t(b){let c=l.indexOf(js(kk(b.propertyName)));c!==-1&&l.splice(c,1);if(l.length){return}r[i]=s.property;r[j]=s.duration;r[h]=s.timing;a.node.removeEventListener(f,t,!1);o=!0;p()}a.node.addEventListener(f,t,!1);setTimeout(()=>{let h=l.length,i,j,m,s=[],u,v,w;while(h--){u=l[h],i=q+u,g&&!d[i]&&(r[kd(u)]=e[u],c[i]||(j=a.getStyle(u),c[i]=a.getStyle(u)!=e[u],d[i]=!c[i],d[i]&&(r[kd(u)]=j))),(!g||d[i])&&(j===undefined&&(j=a.getStyle(u)),m=l.indexOf(u),m===-1?ah('Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!',{node:a.node}):l.splice(m,1),v=/[^\d]*$/.exec(e[u])[0],w=ao(parseFloat(j),parseFloat(e[u]))||(()=>e[u]),s.push({name:kd(u),w,v}))}if(s.length){let c;typeof k.easing==='string'?(c=a.ractive.easing[k.easing],c||(ai(al(k.easing,'easing')),c=b)):typeof k.easing==='function'?(c=k.easing):(c=b);new cc({duration:k.duration,c,step ( b){let c=s.length;while(c--){let d=s[c];a.node.style[d.name]=d.interpolator(b)+d.suffix}},complete () {n=!0;p()}})}else n=!0;l.length||(a.node.removeEventListener(f,t,!1),o=!0,p())},0)},k.delay||0)}}var ko=kn;function kp(a,b){b?a.setAttribute('style',b):(a.getAttribute('style'),a.removeAttribute('style'))}let kq=g&&(g.getComputedStyle||q.getComputedStyle),kr=aP.resolve();class ks{constructor(a,b,c,d,e){this.ractive=a;this.node=b;this.name=c;this.params=d;this.eventName=e;this.isIntro=e!=='outro';typeof c==='function'?(this._fn=c):(this._fn=am('transitions',a,c),this._fn||ai(al(c,'transition'),{a}))}animateStyle(a,b,c){if(arguments.length===4){throw new Error( 't.animateStyle() returns a promise - use .then() instead of passing a callback' )}if(!ke){this.setStyle(a,b);return kr}let d;typeof a==='string'?(d={},d[a]=b):(d=a,c=b);c||(ai('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);return new aP( a=>{if(!c.duration){this.setStyle(d);a();return}let b=Object.keys(d),e=[],f=kq(this.node),g=b.length;while(g--){let a=b[g],c=f[kd(a)];c==='0px'&&(c=0);c!=d[a]&&(e.push(a),this.node.style[kd(a)]=c)}if(!e.length){a();return}ko(this,d,c,e,a)})}getStyle(a){let b=kq(this.node);if(typeof a==='string'){let c=b[kd(a)];return c==='0px'?0:c}if(!W(a)){throw new Error( 'Transition$getStyle must be passed a string, or an array of strings representing CSS properties' )}let c={},d=a.length;while(d--){let e=a[d],f=b[kd(e)];f==='0px'&&(f=0);c[e]=f}return c}processParams(a,b){typeof a==='number'?(a={duration:a}):typeof a==='string'?(a==='slow'?(a={duration:600}):a==='fast'?(a={duration:200}):(a={duration:400})):a||(a={});return S({},b,a)}setStyle(a,b){if(typeof a==='string')this.node.style[kd(a)]=b;else{let b;for(b in a){a.hasOwnProperty(b)&&(this.node.style[kd(b)]=a[b])}}return this}start(){let a=this.node,b=a.getAttribute('style'),c;this.complete=d=>{if(c){return}!d&&this.eventName==='intro'&&kp(a,b);this._manager.remove(this);c=!0};if(!this._fn){this.complete();return}let d=this._fn.apply(this.ractive,[this].concat(this.params));d&&d.then(this.complete)}}function kt(a){let b=a.node,c=a.ractive;do {let d=c._liveQueries,e=d.length;while(e--){let c=d[e],f=d[`_${c}`];f.test(b)&&(f.add(b),a.liveQueries.push(f))}}while(c=c.parent)}function ku(a){while(a=a.parent){if(a.name==='form'){return a}}}function kv(a,b){ai(`The ${a} being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity`,{b})}class kw{constructor(a,b = 'value'){this.element=a;this.ractive=a.ractive;this.attribute=a.attributeByName[b];let c=this.attribute.interpolator;c.twowayBinding=this;let d=c.model;if(!d)c.resolver.forceResolution(),d=c.model,kv(`'${c.template.r}' reference`,this.ractive);else if(d.isUnresolved)d.forceResolution(),kv('expression',this.ractive);else if(d.isReadonly){let b=d.getKeypath().replace(/^@/,'');ai(`Cannot use two-way binding on <${a.name}> element: ${b} is read-only. To suppress this warning use <${a.name} twoway='false'...>`,{ractive:this.ractive});return !1}this.attribute.isTwoway=!0;this.model=d;let e=d.get();this.wasUndefined=e===undefined;e===undefined&&this.getInitialValue&&(e=this.getInitialValue(),d.set(e));let f=ku(a);f&&(this.resetValue=e,f.formBindings.push(this))}bind(){this.model.registerTwowayBinding(this)}handleChange(){a$.start(this.root);this.attribute.locked=!0;this.model.set(this.getValue());a$.scheduleTask(()=>this.attribute.locked=!1);a$.end()}rebind(){this.unbind();this.model=this.attribute.interpolator.model;this.bind()}render(){this.node=this.element.node;this.node._ractive.binding=this;this.rendered=!0}setFromNode(a){this.model.set(a.value)}unbind(){this.model.unregisterTwowayBinding(this)}unrender(){}}function kx(){this._ractive.binding.handleChange()}class ky extends kw{constructor(a){super(a,'checked')}render(){super.render();this.node.addEventListener('change',kx,!1);this.node.attachEvent&&this.node.addEventListener('click',kx,!1)}unrender(){this.node.removeEventListener('change',kx,!1);this.node.removeEventListener('click',kx,!1)}getInitialValue(){return!!this.element.getAttribute('checked')}getValue(){return this.node.checked}setFromNode(a){this.model.set(a.checked)}}function kz(a,b,c){let d=`${a}-bindingGroup`;return b[d]||(b[d]=new kA( d, b, c ))}class kA{constructor(a,b,c){this.model=b;this.hash=a;this.getValue=()=>{this.value=c.call(this);return this.value};this.bindings=[]}add(a){this.bindings.push(a)}bind(){this.value=this.model.get();this.model.registerTwowayBinding(this);this.bound=!0}remove(a){aJ(this.bindings,a);this.bindings.length||this.unbind()}unbind(){this.model.unregisterTwowayBinding(this);this.bound=!1;delete this.model[this.hash]}}let kB=[].push;function kC(){let a=this.bindings.filter(a=>a.node&&a.node.checked).map(a=>a.element.getAttribute('value')),b=[];a.forEach(a=>{aF(b,a)||b.push(a)});return b}class kD extends kw{constructor(a){super(a,'name');this.checkboxName=!0;this.group=kz('checkboxes',this.model,kC);this.group.add(this);this.noInitialValue&&(this.group.noInitialValue=!0);if(this.group.noInitialValue&&this.element.getAttribute('checked')){let a=this.model.get(),b=this.element.getAttribute('value');aF(a,b)||kB.call(a,b)}}bind(){this.group.bound||this.group.bind()}changed(){let a=!!this.isChecked;this.isChecked=this.node.checked;return this.isChecked===a}getInitialValue(){this.noInitialValue=!0;return[]}getValue(){return this.group.value}handleChange(){this.isChecked=this.element.node.checked;this.group.value=this.model.get();let a=this.element.getAttribute('value');this.isChecked&&!aF(this.group.value,a)?this.group.value.push(a):!this.isChecked&&aF(this.group.value,a)&&aJ(this.group.value,a);super.handleChange()}render(){super.render();let a=this.node,b=this.model.get(),c=this.element.getAttribute('value');W(b)?(this.isChecked=aF(b,c)):(this.isChecked=b==c);a.name='{{'+this.model.getKeypath()+'}}';a.checked=this.isChecked;a.addEventListener('change',kx,!1);a.attachEvent&&a.addEventListener('click',kx,!1)}setFromNode(a){this.group.bindings.forEach(a=>a.wasUndefined=!0);if(a.checked){let a=this.group.getValue();a.push(this.element.getAttribute('value'));this.group.model.set(a)}}unbind(){this.group.remove(this)}unrender(){let a=this.element.node;a.removeEventListener('change',kx,!1);a.removeEventListener('click',kx,!1)}}class kE extends kw{getInitialValue(){return this.element.fragment?this.element.fragment.toString():''}getValue(){return this.element.node.innerHTML}render(){super.render();let a=this.node;a.addEventListener('change',kx,!1);a.addEventListener('blur',kx,!1);this.ractive.lazy||(a.addEventListener('input',kx,!1),a.attachEvent&&a.addEventListener('keyup',kx,!1))}setFromNode(a){this.model.set(a.innerHTML)}unrender(){let a=this.node;a.removeEventListener('blur',kx,!1);a.removeEventListener('change',kx,!1);a.removeEventListener('input',kx,!1);a.removeEventListener('keyup',kx,!1)}}function kF(){kx.call(this);let a=this._ractive.binding.model.get();this.value=a==undefined?'':a}function kG(a){let b;return function(){b&&clearTimeout(b);b=setTimeout(()=>{let a=this._ractive.binding;a.rendered&&kx.call(this);b=null},a)}}class kH extends kw{getInitialValue(){return''}getValue(){return this.node.value}render(){super.render();let a=this.ractive.lazy,b=!1;this.element.template.a&&'lazy' in this.element.template.a&&(a=this.element.template.a.lazy,a===0&&(a=!0));a==='false'&&(a=!1);Y(a)&&(b=+a,a=!1);this.handler=b?kG(b):kx;let c=this.node;c.addEventListener('change',kx,!1);a||(c.addEventListener('input',this.handler,!1),c.attachEvent&&c.addEventListener('keyup',this.handler,!1));c.addEventListener('blur',kF,!1)}unrender(){let a=this.element.node;this.rendered=!1;a.removeEventListener('change',kx,!1);a.removeEventListener('input',this.handler,!1);a.removeEventListener('keyup',this.handler,!1);a.removeEventListener('blur',kF,!1)}}function kI(a){return a.selectedOptions?aK(a.selectedOptions):a.options?aK(a.options).filter(a=>a.selected):[]}class kJ extends kw{forceUpdate(){let a=this.getValue();a!==undefined&&(this.attribute.locked=!0,a$.scheduleTask(()=>this.attribute.locked=!1),this.model.set(a))}getInitialValue(){return this.element.options.filter(a=>a.getAttribute('selected')).map(a=>a.getAttribute('value'))}getValue(){let a=this.element.node.options,b=a.length,c=[];for(let d=0;d<b;d+=1){let b=a[d];if(b.selected){let a=b._ractive?b._ractive.value:b.value;c.push(a)}}return c}handleChange(){let a=this.attribute,b=a.getValue(),c=this.getValue();(b===undefined||!aG(c,b))&&super.handleChange();return this}render(){super.render();this.node.addEventListener('change',kx,!1);this.model.get()===undefined&&this.handleChange()}setFromNode(a){let b=kI(a),c=b.length,d=new Array( c );while(c--){let a=b[c];d[c]=a._ractive?a._ractive.value:a.value}this.model.set(d)}setValue(){throw new Error( 'TODO not implemented yet' )}unrender(){this.node.removeEventListener('change',kx,!1)}updateModel(){(this.attribute.value===undefined||!this.attribute.value.length)&&this.keypath.set(this.initialValue)}}class kK extends kH{getInitialValue(){return undefined}getValue(){let a=parseFloat(this.node.value);return isNaN(a)?undefined:a}setFromNode(a){let b=parseFloat(a.value);isNaN(b)||this.model.set(b)}}let kL={};function kM(a){return kL[a]||(kL[a]=[])}class kN extends kw{constructor(a){super(a,'checked');this.siblings=kM(this.ractive._guid+this.element.getAttribute('name'));this.siblings.push(this)}getValue(){return this.node.checked}handleChange(){a$.start(this.root);this.siblings.forEach(a=>{a.model.set(a.getValue())});a$.end()}render(){super.render();this.node.addEventListener('change',kx,!1);this.node.attachEvent&&this.node.addEventListener('click',kx,!1)}setFromNode(a){this.model.set(a.checked)}unbind(){aJ(this.siblings,this)}unrender(){this.node.removeEventListener('change',kx,!1);this.node.removeEventListener('click',kx,!1)}}function kO(){let a=this.bindings.filter(a=>a.node.checked);if(a.length>0){return a[0].element.getAttribute('value')}}class kP extends kw{constructor(a){super(a,'name');this.group=kz('radioname',this.model,kO);this.group.add(this);a.checked&&(this.group.value=this.getValue())}bind(){this.group.bound||this.group.bind();this.nameAttributeBinding={handleChange:()=>this.node.name=`{{${this.model.getKeypath()}}}`};this.model.getKeypathModel().register(this.nameAttributeBinding)}getInitialValue(){if(this.element.getAttribute('checked')){return this.element.getAttribute('value')}}getValue(){return this.element.getAttribute('value')}handleChange(){this.node.checked&&(this.group.value=this.getValue(),super.handleChange())}render(){super.render();let a=this.node;a.name=`{{${this.model.getKeypath()}}}`;a.checked=this.model.get()==this.element.getAttribute('value');a.addEventListener('change',kx,!1);a.attachEvent&&a.addEventListener('click',kx,!1)}setFromNode(a){a.checked&&this.group.model.set(this.element.getAttribute('value'))}unbind(){this.group.remove(this);this.model.getKeypathModel().unregister(this.nameAttributeBinding)}unrender(){let a=this.node;a.removeEventListener('change',kx,!1);a.removeEventListener('click',kx,!1)}}class kQ extends kw{forceUpdate(){let a=this.getValue();a!==undefined&&(this.attribute.locked=!0,a$.scheduleTask(()=>this.attribute.locked=!1),this.model.set(a))}getInitialValue(){if(this.element.getAttribute('value')!==undefined){return}let a=this.element.options,b=a.length;if(!b)return;let c,d,e=b;while(e--){let b=a[e];if(b.getAttribute('selected')){b.getAttribute('disabled')||(c=b.getAttribute('value'));d=!0;break}}if(!d){while(++e<b){if(!a[e].getAttribute('disabled')){c=a[e].getAttribute('value');break}}}c!==undefined&&(this.element.attributeByName.value.value=c);return c}getValue(){let a=this.node.options,b=a.length,c;for(c=0;c<b;c+=1){let b=a[c];if(a[c].selected&&!a[c].disabled){return b._ractive?b._ractive.value:b.value}}}render(){super.render();this.node.addEventListener('change',kx,!1)}setFromNode(a){let b=kI(a)[0];this.model.set(b._ractive?b._ractive.value:b.value)}setValue(a){this.model.set(a)}unrender(){this.node.removeEventListener('change',kx,!1)}}function kR(a){return a&&a.template.length===1&&a.template[0].t===dL&&!a.template[0].s}function kS(a){let b=a.attributeByName;if(a.getAttribute('contenteditable')||kR(b.contenteditable)){return kR(b.value)?kE:null}if(a.name==='input'){let c=a.getAttribute('type');if(c==='radio'||c==='checkbox'){let d=kR(b.name),e=kR(b.checked);if(d&&e){if(c==='radio')ah('A radio input can have two-way binding on its name attribute, or its checked attribute - not both',{ractive:a.root});else{return ky}}if(d){return c==='radio'?kP:kD}if(e){return c==='radio'?kN:ky}}if(c==='file'&&kR(b.value)){return kw}if(kR(b.value)){returnc==='number'||c==='range'?kK:kH}return null}if(a.name==='select'&&kR(b.value)){return a.getAttribute('multiple')?kJ:kQ}if(a.name==='textarea'&&kR(b.value)){return kH}}function kT(a){a.makeDirty()}class kU extends io{constructor(a){super(a);this.liveQueries=[];this.name=a.template.e.toLowerCase();this.isVoid=fX.test(this.name);let b=this.parentFragment;while(b){if(b.owner.type===dQ){this.parent=b.owner;break}b=b.parent}if(this.parent&&this.parent.name==='option'){throw new Error( `An <option> element cannot contain other elements (encountered <${this.name}>)` )}this.attributeByName={};this.attributes=[];this.template.a&&(Object.keys(this.template.a).forEach(a=>{if(a==='twoway'||a==='lazy')return;let b=new jV({a,element:this,parentFragment:this.parentFragment,template:this.template.a[a]});this.attributeByName[a]=b;a!=='value'&&a!=='type'&&this.attributes.push(b)}),this.attributeByName.type&&this.attributes.unshift(this.attributeByName.type),this.attributeByName.value&&this.attributes.push(this.attributeByName.value));this.conditionalAttributes=(this.template.m||[]).map(a=>{return new jX({owner:this,parentFragment:this.parentFragment,a})});this.template.o&&(this.decorator=new j$( this, this.template.o ));this.eventHandlers=[];this.template.v&&Object.keys(this.template.v).forEach(a=>{let b=a.split('-'),c=this.template.v[a];b.forEach(a=>{let b=am('events',this.ractive,a),d=b?new kb( b, this ):new ka( a, this );this.eventHandlers.push(new jk( this, d, c ))})});a.template.f&&!a.noContent&&(this.fragment=new lL({template:a.template.f,owner:this,cssIds:null}));this.binding=null}bind(){this.attributes.forEach(bL);this.conditionalAttributes.forEach(bL);this.eventHandlers.forEach(bL);this.decorator&&this.decorator.bind();this.fragment&&this.fragment.bind();(this.binding=this.createTwowayBinding())&&this.binding.bind()}createTwowayBinding(){let a=this.template.a;if(!a)return null;let b='twoway' in a?a.twoway===0||a.twoway==='true':this.ractive.twoway;if(!b)return null;let c=kS(this);if(!c)return null;let d=new c( this );return d&&d.model?d:null}detach(){this.decorator&&this.decorator.unrender();return N(this.node)}find(a){if(D(this.node,a))return this.node;if(this.fragment){return this.fragment.find(a)}}findAll(a,b){let c=b.test(this.node);c&&(b.add(this.node),b.live&&this.liveQueries.push(b));this.fragment&&this.fragment.findAll(a,b)}findComponent(a){if(this.fragment){return this.fragment.findComponent(a)}}findAllComponents(a,b){this.fragment&&this.fragment.findAllComponents(a,b)}findNextNode(){return null}firstNode(){return this.node}getAttribute(a){let b=this.attributeByName[a];return b?b.getValue():undefined}rebind(){this.attributes.forEach(bQ);this.conditionalAttributes.forEach(bQ);this.eventHandlers.forEach(bQ);this.decorator&&this.decorator.rebind();this.fragment&&this.fragment.rebind();this.binding&&this.binding.rebind();this.liveQueries.forEach(kT)}render(a,b){this.namespace=k$(this);let c,d=!1;if(b){let a;while(a=b.shift()){if(a.nodeName===this.template.e.toUpperCase()&&a.namespaceURI===this.namespace){this.node=c=a;d=!0;break}else N(a)}}c||(c=C(this.template.e,this.namespace,this.getAttribute('is')),this.node=c);Q(c,'_ractive',{value:{proxy:this,fragment:this.parentFragment}});this.parentFragment.cssIds&&c.setAttribute('data-ractive-css',this.parentFragment.cssIds.map(a=>`{${a}}`).join(' '));d&&this.foundNode&&this.foundNode(c);if(this.fragment){let a=d?aK(c.childNodes):undefined;this.fragment.render(c,a);a&&a.forEach(N)}if(d){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(c);let a=c.attributes.length;while(a--){let b=c.attributes[a].name;(!this.template.a||!(b in this.template.a))&&c.removeAttribute(b)}}this.attributes.forEach(bP);this.conditionalAttributes.forEach(bP);this.decorator&&a$.scheduleTask(()=>this.decorator.render(),!0);this.binding&&this.binding.render();this.eventHandlers.forEach(bP);kt(this);this._introTransition=kV(this,this.template.t0||this.template.t1,'intro');d||a.appendChild(c);this.rendered=!0}toString(){let a=this.template.e,b=this.attributes.map(kZ).join('')+this.conditionalAttributes.map(kZ).join('');this.name==='option'&&this.isSelected()&&(b+=' selected');this.name==='input'&&kY(this)&&(b+=' checked');let c=`<${a}${b}>`;if(this.isVoid)return c;this.name==='textarea'&&this.getAttribute('value')!==undefined?(c+=gg(this.getAttribute('value'))):this.getAttribute('contenteditable')!==undefined&&(c+=this.getAttribute('value')||'');this.fragment&&(c+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e)));c+=`</${a}>`;return c}unbind(){this.attributes.forEach(bS);this.conditionalAttributes.forEach(bS);this.decorator&&this.decorator.unbind();this.fragment&&this.fragment.unbind()}unrender(a){if(!this.rendered)return;this.rendered=!1;let b=this._introTransition;b&&b.complete();this.name==='option'?this.detach():a&&a$.detachWhenReady(this);this.fragment&&this.fragment.unrender();this.eventHandlers.forEach(bT);this.binding&&this.binding.unrender();!a&&this.decorator&&this.decorator.unrender();kV(this,this.template.t0||this.template.t2,'outro');let c=this.attributeByName.id;c&&delete this.ractive.nodes[c.getValue()];k_(this)}update(){this.dirty&&(this.dirty=!1,this.attributes.forEach(bV),this.conditionalAttributes.forEach(bV),this.eventHandlers.forEach(bV),this.decorator&&this.decorator.update(),this.fragment&&this.fragment.update())}}function kV(a,b,c){if(!b||!a.ractive.transitionsEnabled)return;let d=kW(a,b);if(!d)return;let e=kX(a,b),f=new ks( a.ractive, a.node, d, e, c );a$.registerTransition(f);return f}function kW(a,b){let c=b.n||b;if(typeof c==='string')return c;let d=new lL({a,template:c}).bind();c=d.toString();d.unbind();return c}function kX(a,b){if(b.a)return b.a;if(!b.d)return;let c=new lL({a,template:b.d}).bind(),d=c.getArgsList();c.unbind();return d}function kY(a){let b=a.attributeByName,c=b.type,d=b.value,e=b.name;if(!c||c.value!=='radio'||!d||!e.interpolator){return}if(d.getValue()===e.interpolator.model.get()){return !0}}function kZ(a){let b=a.toString();return b?' '+b:''}function k_(a){let b=a.liveQueries.length;while(b--){let c=a.liveQueries[b];c.remove(a.node)}}function k$(a){let b=a.getAttribute('xmlns');if(b)return b;if(a.name==='svg')return v;let c=a.parent;if(c){if(c.name==='foreignobject')return s;return c.node.namespaceURI}return a.ractive.el.namespaceURI}class la extends kU{constructor(a){super(a);this.formBindings=[]}render(a,b){super.render(a,b);this.node.addEventListener('reset',lb,!1)}unrender(a){this.node.removeEventListener('reset',lb,!1);super.unrender(a)}}function lb(){let a=this._ractive.proxy;a$.start();a.formBindings.forEach(lc);a$.end()}function lc(a){a.model.set(a.resetValue)}class ld extends io{constructor(a){super(a);this.parentFragment=a.parentFragment;this.template=a.template;this.index=a.index;this.isStatic=!!a.template.s;this.model=null;this.dirty=!1}bind(){let a=iu(this.parentFragment,this.template),b=a?a.get():undefined;if(this.isStatic){this.model={get:()=>b};return}a?(a.register(this),this.model=a):(this.resolver=this.parentFragment.resolve(this.template.r,a=>{this.model=a;a.register(this);this.handleChange();this.resolver=null}))}handleChange(){this.bubble()}rebind(){if(this.isStatic||!this.model)return;let a=iu(this.parentFragment,this.template);if(a===this.model)return;this.model.unregister(this);this.model=a;a&&(a.register(this),this.handleChange())}unbind(){this.isStatic||(this.model&&this.model.unregister(this),this.model=undefined,this.resolver&&this.resolver.unbind())}}class le extends ld{detach(){return N(this.node)}firstNode(){return this.node}getString(){return this.model?O(this.model.get()):''}render(a,b){let c=this.getString();this.rendered=!0;if(b){let d=b[0];d&&d.nodeType===3?(b.shift(),d.nodeValue!==c&&(d.nodeValue=c)):(d=this.node=h.createTextNode(c),b[0]?a.insertBefore(d,b[0]):a.appendChild(d));this.node=d}else this.node=h.createTextNode(c),a.appendChild(this.node)}toString(a){let b=this.getString();return a?gg(b):b}unrender(a){a&&this.detach();this.rendered=!1}update(){this.dirty&&(this.dirty=!1,this.rendered&&(this.node.data=this.getString()))}valueOf(){return this.model?this.model.get():undefined}}class lf extends kU{render(a,b){super.render(a,b);this.node.defaultValue=this.node.value}}function lg(a){while(a){if(a.name==='select')return a;a=a.parent}}class lh extends kU{constructor(a){let b=a.template;b.a||(b.a={});b.a.value===undefined&&!('disabled' in b.a)&&(b.a.value=b.f||'');super(a);this.select=lg(this.parent)}bind(){if(!this.select){super.bind();return}let a=this.attributeByName.selected;if(a&&this.select.getAttribute('value')!==undefined){let b=this.attributes.indexOf(a);this.attributes.splice(b,1);delete this.attributeByName.selected}super.bind();this.select.options.push(this)}isSelected(){let a=this.getAttribute('value');if(a===undefined||!this.select){return !1}let b=this.select.getAttribute('value');if(b==a){return !0}if(this.select.getAttribute('multiple')&&W(b)){let c=b.length;while(c--){if(b[c]==a){return !0}}}}unbind(){super.unbind();this.select&&aJ(this.select.options,this)}}function li(a,b,c){let d=lj(a,b,c||{});if(d)return d;d=hF.fromId(b,{noThrow:!0});if(d){let c=hF.parseFor(d,a);c.p&&T(a.partials,c.p);return a.partials[b]=c.t}}function lj(a,b,c){let d=lm(b,c.owner);if(d)return d;let e=an('partials',a,b);if(!e){return}d=e.partials[b];let f;typeof d==='function'&&(f=d.bind(e),f.isOwner=e.partials.hasOwnProperty(b),d=f.call(a,hF));if(!d&&d!==''){ah(ak,b,'partial','partial',{a});return}if(!hF.isParsed(d)){let c=hF.parseFor(d,e);c.p&&ah('Partials ({{>%s}}) cannot contain nested inline partials',b,{a});let g=f?e:lk(e,b);g.partials[b]=d=c.t}f&&(d._fn=f);return d.v?d.t:d}function lk(a,b){return a.partials.hasOwnProperty(b)?a:ll(a.constructor,b)}function ll(a,b){if(!a){return}return a.partials.hasOwnProperty(b)?a:ll(a._Parent,b)}function lm(a,b){if(b){if(b.template&&b.template.p&&b.template.p[a]){return b.template.p[a]}else if(b.parentFragment&&b.parentFragment.owner){return lm(a,b.parentFragment.owner)}}}class ln extends ld{bind(){this.refName=this.template.r;let a=this.refName?li(this.ractive,this.refName,this.parentFragment)||null:null,b;a&&(this.named=!0,this.setTemplate(this.template.r,a));a||(super.bind(),this.model&&(b=this.model.get())&&typeof b==='object'&&(typeof b.template==='string'||W(b.t))?(b.template&&(b=lo(this.template.r,b.template,this.ractive)),this.setTemplate(this.template.r,b.t)):(!this.model||typeof this.model.get()!=='string')&&this.refName?this.setTemplate(this.refName,a):this.setTemplate(this.model.get()));this.fragment=new lL({owner:this,template:this.partialTemplate}).bind()}detach(){return this.fragment.detach()}find(a){return this.fragment.find(a)}findAll(a,b){this.fragment.findAll(a,b)}findComponent(a){return this.fragment.findComponent(a)}findAllComponents(a,b){this.fragment.findAllComponents(a,b)}firstNode(a){return this.fragment.firstNode(a)}forceResetTemplate(){this.partialTemplate=undefined;this.refName&&(this.partialTemplate=li(this.ractive,this.refName,this.parentFragment));this.partialTemplate||(this.partialTemplate=li(this.ractive,this.name,this.parentFragment));this.partialTemplate||(ai(`Could not find template for partial '${this.name}'`),this.partialTemplate=[]);this.fragment.resetTemplate(this.partialTemplate);this.bubble()}rebind(){super.unbind();super.bind();this.fragment.rebind()}render(a,b){this.fragment.render(a,b)}setTemplate(a,b){this.name=a;!b&&b!==null&&(b=li(this.ractive,a,this.parentFragment));b||ai(`Could not find template for partial '${a}'`);this.partialTemplate=b||[]}toString(a){return this.fragment.toString(a)}unbind(){super.unbind();this.fragment.unbind()}unrender(a){this.fragment.unrender(a)}update(){let a;this.dirty&&(this.dirty=!1,this.named||(this.model&&(a=this.model.get()),a&&typeof a==='string'&&a!==this.name?(this.setTemplate(a),this.fragment.resetTemplate(this.partialTemplate)):a&&typeof a==='object'&&(typeof a.template==='string'||W(a.t))&&(a.template&&(a=lo(this.name,a.template,this.ractive)),this.setTemplate(this.name,a.t),this.fragment.resetTemplate(this.partialTemplate))),this.fragment.update())}}function lo(a,b,c){let d;try{d=hF.parse(b,hF.getParseOptions(c))}catch(b){ah(`Could not parse partial from expression '${a}'\n${b.message}`)};return d||{t:[]}}class lp{constructor(a){this.parent=a.owner.parentFragment;this.parentFragment=this;this.owner=a.owner;this.ractive=this.parent.ractive;this.cssIds='cssIds' in a?a.cssIds:(this.parent?this.parent.cssIds:null);this.context=null;this.rendered=!1;this.iterations=[];this.template=a.template;this.indexRef=a.indexRef;this.keyRef=a.keyRef;this.pendingNewIndices=null;this.previousIterations=null;this.isArray=!1}bind(a){this.context=a;let b=a.get();if(this.isArray=W(b)){this.iterations=[];for(let a=0;a<b.length;a+=1)this.iterations[a]=this.createIteration(a,a)}else if(Z(b)){this.isArray=!1;if(this.indexRef){let a=this.indexRef.split(',');this.keyRef=a[0];this.indexRef=a[1]}this.iterations=Object.keys(b).map((a,b)=>{return this.createIteration(a,b)})}return this}bubble(){this.owner.bubble()}createIteration(a,b){let c=new lL({owner:this,template:this.template});c.key=a;c.index=b;c.isIteration=!0;let d=this.context.joinKey(a);this.owner.template.z&&(c.aliases={},c.aliases[this.owner.template.z[0].n]=d);return c.bind(d)}detach(){let a=L();this.iterations.forEach(b=>a.appendChild(b.detach()));return a}find(a){let b=this.iterations.length,c;for(c=0;c<b;c+=1){let b=this.iterations[c].find(a);if(b)return b}}findAll(a,b){let c=this.iterations.length,d;for(d=0;d<c;d+=1)this.iterations[d].findAll(a,b)}findComponent(a){let b=this.iterations.length,c;for(c=0;c<b;c+=1){let b=this.iterations[c].findComponent(a);if(b)return b}}findAllComponents(a,b){let c=this.iterations.length,d;for(d=0;d<c;d+=1)this.iterations[d].findAllComponents(a,b)}findNextNode(a){if(a.index<this.iterations.length-1){for(let b=a.index+1;b<this.iterations.length;b++){let a=this.iterations[b].firstNode(!0);if(a)return a}}return this.owner.findNextNode()}firstNode(a){return this.iterations[0]?this.iterations[0].firstNode(a):null}rebind(a){this.context=a;this.iterations.forEach(b=>{let c=a.joinKey(b.key||b.index);this.owner.template.z&&(b.aliases={},b.aliases[this.owner.template.z[0].n]=c);b.rebind(c)})}render(a,b){this.iterations&&this.iterations.forEach(c=>c.render(a,b));this.rendered=!0}shuffle(a){this.pendingNewIndices||(this.previousIterations=this.iterations.slice());this.pendingNewIndices||(this.pendingNewIndices=[]);this.pendingNewIndices.push(a);let b=[];a.forEach((a,c)=>{if(a===-1)return;let d=this.iterations[c];b[a]=d;a!==c&&d&&(d.dirty=!0)});this.iterations=b;this.bubble()}toString(a){return this.iterations?this.iterations.map(a?bX:bW).join(''):''}unbind(){this.iterations.forEach(bS);return this}unrender(a){this.iterations.forEach(a?bU:bT);this.pendingNewIndices&&this.previousIterations&&this.previousIterations.forEach(b=>{b.rendered&&(a?bU(b):bT(b))});this.rendered=!1}update(){if(this.pendingNewIndices){this.updatePostShuffle();return}if(this.updating)return;this.updating=!0;let a=this.context.get(),b=this.isArray,c,d,e=!0,f;if(this.isArray=W(a))b&&(e=!1,this.iterations.length>a.length&&(c=this.iterations.splice(a.length)));else if(Z(a)&&!b){e=!1;c=[];d={};f=this.iterations.length;while(f--){let b=this.iterations[f];b.key in a?(d[b.key]=!0):(this.iterations.splice(f,1),c.push(b))}}e&&(c=this.iterations,this.iterations=[]);c&&c.forEach(a=>{a.unbind();a.unrender(!0)});this.iterations.forEach(bV);let g=W(a)?a.length:Z(a)?Object.keys(a).length:0,h,i;if(g>this.iterations.length){h=this.rendered?L():null;f=this.iterations.length;if(W(a)){while(f<a.length){i=this.createIteration(f,f),this.iterations.push(i),this.rendered&&i.render(h),f+=1}}else if(Z(a)){if(this.indexRef&&!this.keyRef){let a=this.indexRef.split(',');this.keyRef=a[0];this.indexRef=a[1]}Object.keys(a).forEach(a=>{(!d||!(a in d))&&(i=this.createIteration(a,f),this.iterations.push(i),this.rendered&&i.render(h),f+=1)})}if(this.rendered){let a=this.parent.findParentNode(),b=this.parent.findNextNode(this.owner);a.insertBefore(h,b)}}this.updating=!1}updatePostShuffle(){let a=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(b=>{a.forEach((c,d)=>{a[d]=b[c]})});let b=this.context.get().length,c,d=0,e=!1;a.forEach((a,b)=>{let c=this.previousIterations[b];!e&&a!==-1&&(a<d&&(e=!0),a>d&&(d=a));if(a===-1)c.unbind().unrender(!0);else{c.index=a;let b=this.context.joinKey(a);this.owner.template.z&&(c.aliases={},c.aliases[this.owner.template.z[0].n]=b);c.rebind(b)}});let f=this.rendered?L():null,g=this.rendered?this.parent.findParentNode():null;if(e){for(c=0;c<b;c+=1){let a=this.iterations[c];this.rendered&&(a?f.appendChild(a.detach()):(this.iterations[c]=this.createIteration(c,c),this.iterations[c].render(f)));this.rendered||(a||(this.iterations[c]=this.createIteration(c,c)))}}else{for(c=0;c<b;c++){let a=this.iterations[c];this.rendered?(a&&f.childNodes.length&&g.insertBefore(f,a.firstNode()),a||(a=this.iterations[c]=this.createIteration(c,c),a.render(f))):a||(this.iterations[c]=this.createIteration(c,c))}}this.rendered&&f.childNodes.length&&g.insertBefore(f,this.owner.findNextNode());this.iterations.forEach(bV);this.pendingNewIndices=null}}function lq(a){return!a||W(a)&&a.length===0||Z(a)&&Object.keys(a).length===0}function lr(a,b){if(b||W(a))return eq;if(Z(a)||typeof a==='function')return es;if(a===undefined)return null;return eo}class ls extends ld{constructor(a){super(a);this.sectionType=a.template.n||null;this.templateSectionType=this.sectionType;this.fragment=null}bind(){super.bind();this.model?(this.dirty=!0,this.update()):this.sectionType&&this.sectionType===ep&&(this.fragment=new lL({owner:this,template:this.template.f}).bind())}detach(){return this.fragment?this.fragment.detach():L()}find(a){if(this.fragment){return this.fragment.find(a)}}findAll(a,b){this.fragment&&this.fragment.findAll(a,b)}findComponent(a){if(this.fragment){return this.fragment.findComponent(a)}}findAllComponents(a,b){this.fragment&&this.fragment.findAllComponents(a,b)}firstNode(a){return this.fragment&&this.fragment.firstNode(a)}rebind(){super.rebind();this.fragment&&this.fragment.rebind(this.sectionType===eo||this.sectionType===ep?null:this.model)}render(a,b){this.rendered=!0;this.fragment&&this.fragment.render(a,b)}shuffle(a){this.fragment&&this.sectionType===eq&&this.fragment.shuffle(a)}toString(a){return this.fragment?this.fragment.toString(a):''}unbind(){super.unbind();this.fragment&&this.fragment.unbind()}unrender(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1}update(){if(!this.dirty)return;if(!this.model&&this.sectionType!==ep)return;this.dirty=!1;let a=!this.model?undefined:this.model.isRoot?this.model.value:this.model.get(),b=this.sectionType;(this.sectionType===null||this.templateSectionType===null)&&(this.sectionType=lr(a,this.template.i));b&&b!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null);let c;if(this.sectionType===eq)this.fragment?this.fragment.update():(c=new lp({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model));else if(this.sectionType===er)this.fragment?this.fragment.update():(c=new lL({owner:this,template:this.template.f}).bind(this.model));else if(this.sectionType===es)this.fragment?(lq(a)?(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.fragment.update()):lq(a)||(c=new lL({owner:this,template:this.template.f}).bind(this.model));else{let b=this.sectionType===ep?lq(a):!!a&&!lq(a);this.fragment?(b?this.fragment.update():(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null)):b&&(c=new lL({owner:this,template:this.template.f}).bind(null))}if(c){if(this.rendered){let a=this.parentFragment.findParentNode(),b=this.parentFragment.findNextNode(this);if(b){let a=L();c.render(a);b.parentNode.insertBefore(a,b)}else c.render(a)}this.fragment=c}}}function lt(a,b){let c=a.length;while(c--){if(a[c]==b)return !0}}class lu extends kU{constructor(a){super(a);this.options=[]}foundNode(a){if(this.binding){let b=kI(a);b.length>0&&(this.selectedOptions=b)}}render(a,b){super.render(a,b);this.sync();let c=this.node,d=c.options.length;while(d--)c.options[d].defaultSelected=c.options[d].selected;this.rendered=!0}sync(){let a=this.node;if(!a)return;let b=aK(a.options);if(this.selectedOptions){b.forEach(a=>{this.selectedOptions.indexOf(a)>=0?(a.selected=!0):a.selected=!1});this.binding.setFromNode(a);delete this.selectedOptions;return}let c=this.getAttribute('value'),d=this.getAttribute('multiple');if(c!==undefined){let a;b.forEach(b=>{let e=b._ractive?b._ractive.value:b.value,f=d?lt(c,e):c==e;f&&(a=!0);b.selected=f});!a&&!d&&(this.binding&&this.binding.forceUpdate())}else this.binding&&this.binding.forceUpdate()}update(){super.update();this.sync()}}class lv extends lf{constructor(a){let b=a.template;b.a&&b.a.value&&kR({template:b.a.value})?(a.noContent=!0):b.f&&(!b.a||!b.a.value)&&kR({template:b.f})&&(b.a||(b.a={}),b.a.value=b.f,a.noContent=!0);super(a)}bubble(){this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&a$.scheduleTask(()=>{this.dirty=!1;this.node.value=this.fragment.toString()}),this.parentFragment.bubble())}}class lw extends io{constructor(a){super(a);this.type=dK}bind(){}detach(){return N(this.node)}firstNode(){return this.node}rebind(){}render(a,b){this.rendered=!0;if(b){let c=b[0];c&&c.nodeType===3?(b.shift(),c.nodeValue!==this.template&&(c.nodeValue=this.template)):(c=this.node=h.createTextNode(this.template),b[0]?a.insertBefore(c,b[0]):a.appendChild(c));this.node=c}else this.node=h.createTextNode(this.template),a.appendChild(this.node)}toString(a){return a?gg(this.template):this.template}unbind(){}unrender(a){this.rendered&&a&&this.detach();this.rendered=!1}update(){}valueOf(){return this.template}}let lx={},ly,lz;try{C('table').innerHTML='foo'}catch(a){ly=!0,lz={TABLE:['<table class="x">','</table>'],THEAD:['<table><thead class="x">','</thead></table>'],TBODY:['<table><tbody class="x">','</tbody></table>'],TR:['<table><tr class="x">','</tr></table>'],SELECT:['<select class="x">','</select>']}};function lA(a,b,c){let d=[];if(a==null||a==='')return d;let e,f,g;ly&&(f=lz[b.tagName])?(e=lB('DIV'),e.innerHTML=f[0]+a+f[1],e=e.querySelector('.x'),e.tagName==='SELECT'&&(g=e.options[e.selectedIndex])):b.namespaceURI===v?(e=lB('DIV'),e.innerHTML='<svg class="x">'+a+'</svg>',e=e.querySelector('.x')):b.tagName==='TEXTAREA'?(e=C('div'),typeof e.textContent!=='undefined'?(e.textContent=a):(e.innerHTML=a)):(e=lB(b.tagName),e.innerHTML=a,e.tagName==='SELECT'&&(g=e.options[e.selectedIndex]));let h;while(h=e.firstChild){d.push(h),c.appendChild(h)}let i;if(b.tagName==='SELECT'){i=d.length;while(i--){d[i]!==g&&(d[i].selected=!1)}}return d}function lB(a){return lx[a]||(lx[a]=C(a))}class lC extends ld{constructor(a){super(a)}detach(){let a=L();this.nodes.forEach(b=>a.appendChild(b));return a}find(a){let b=this.nodes.length,c;for(c=0;c<b;c+=1){let b=this.nodes[c];if(b.nodeType!==1)continue;if(D(b,a))return b;let d=b.querySelector(a);if(d)return d}return null}findAll(a,b){let c=this.nodes.length,d;for(d=0;d<c;d+=1){let c=this.nodes[d];if(c.nodeType!==1)continue;b.test(c)&&b.add(c);let e=c.querySelectorAll(a);if(e){let a=e.length,c;for(c=0;c<a;c+=1)b.add(e[c])}}}findComponent(){return null}firstNode(){return this.nodes[0]}render(a){let b=this.model?this.model.get():'';this.nodes=lA(b,this.parentFragment.findParentNode(),a);this.rendered=!0}toString(){return this.model&&this.model.get()!=null?gb(''+this.model.get()):''}unrender(){this.nodes&&this.nodes.forEach(a=>N(a));this.rendered=!1}update(){if(this.rendered&&this.dirty){this.dirty=!1;this.unrender();let a=L();this.render(a);let b=this.parentFragment.findParentNode(),c=this.parentFragment.findNextNode(this);b.insertBefore(a,c)}}}class lD extends io{constructor(a){super(a);this.container=a.parentFragment.ractive;this.component=this.container.component;this.containerFragment=a.parentFragment;this.parentFragment=this.component.parentFragment;this.name=a.template.n||''}bind(){let a=this.name;(this.component.yielders[a]||(this.component.yielders[a]=[])).push(this);let b=this.container._inlinePartials[a||'content'];typeof b==='string'&&(b=hw(b).t);b||(ah(`Could not find template for partial "${a}"`,{ractive:this.ractive}),b=[]);this.fragment=new lL({owner:this,ractive:this.container.parent,b}).bind()}bubble(){this.dirty||(this.containerFragment.bubble(),this.dirty=!0)}detach(){return this.fragment.detach()}find(a){return this.fragment.find(a)}findAll(a,b){this.fragment.find(a,b)}findComponent(a){return this.fragment.findComponent(a)}findAllComponents(a,b){this.fragment.findAllComponents(a,b)}findNextNode(){return this.containerFragment.findNextNode(this)}firstNode(a){return this.fragment.firstNode(a)}rebind(){this.fragment.rebind()}render(a,b){return this.fragment.render(a,b)}setTemplate(a){let b=this.parentFragment.ractive.partials[a];typeof b==='string'&&(b=hw(b).t);this.partialTemplate=b||[]}toString(a){return this.fragment.toString(a)}unbind(){this.fragment.unbind();aJ(this.component.yielders[this.name],this)}unrender(a){this.fragment.unrender(a)}update(){this.dirty=!1;this.fragment.update()}}function lE(a,b){let c=an('components',a,b),d;if(c){d=c.components[b];if(!d._Parent){let e=d.bind(c);e.isOwner=c.components.hasOwnProperty(b);d=e();if(!d){ah(ak,b,'component','component',{a});return}typeof d==='string'&&(d=lE(a,d));d._fn=e;c.components[b]=d}}return d}let lF={};lF[dZ]=iw;lF[dY]=jr;lF[dL]=le;lF[dR]=ln;lF[dN]=ls;lF[dM]=lC;lF[dW]=lD;let lG={doctype:jr,form:la,input:lf,option:lh,select:lu,textarea:lv};function lH(a){if(typeof a.template==='string'){return new lw( a )}if(a.template.t===dQ){let b=lE(a.parentFragment.ractive,a.template.e);if(b){return new jq( a, b )}let c=a.template.e.toLowerCase(),d=lG[c]||kU;return new d( a )}let b=lF[a.template.t];if(!b)throw new Error( `Unrecognised item type ${a.template.t}` );return new b( a )}class lI{constructor(a,b,c){this.fragment=a;this.reference=aw(b);this.callback=c;this.keys=ax(b);this.resolved=!1;while(a){a.context&&a.context.addUnresolved(this.keys[0],this),a=a.componentParent||a.parent}}attemptResolution(){if(this.resolved)return;let a=bF(this.fragment,this.reference);a&&(this.resolved=!0,this.callback(a))}forceResolution(){if(this.resolved)return;let a=this.fragment.findContext().joinAll(this.keys);this.callback(a);this.resolved=!0}unbind(){aJ(this.fragment.unresolved,this);if(this.resolved)return;let a=this.fragment;while(a){a.context&&a.context.removeUnresolved(this.keys[0],this),a=a.componentParent||a.parent}}}function lJ(a,b,c,d = 0){return a.map(a=>{if(a.type===dK){return a.template}if(a.fragment){if(a.fragment.iterations){return a.fragment.iterations.map(a=>{return lJ(a.items,b,c,d)}).join('')}else{return lJ(a.fragment.items,b,c,d)}}let e=`${c}-${d++}`;b[e]=a.model?a.model.wrapper?a.model.wrapper.value:a.model.get():undefined;return'${'+e+'}'}).join('')}function lK(a){a.unrender(!0)}class lL{constructor(a){this.owner=a.owner;this.isRoot=!a.owner.parentFragment;this.parent=this.isRoot?null:this.owner.parentFragment;this.ractive=a.ractive||(this.isRoot?a.owner:this.parent.ractive);this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null;this.context=null;this.rendered=!1;this.cssIds='cssIds' in a?a.cssIds:(this.parent?this.parent.cssIds:null);this.resolvers=[];this.dirty=!1;this.dirtyArgs=this.dirtyValue=!0;this.template=a.template||[];this.createItems()}bind(a){this.context=a;this.items.forEach(bL);this.bound=!0;this.dirty&&this.update();return this}bubble(){this.dirtyArgs=this.dirtyValue=!0;this.dirty||(this.dirty=!0,this.isRoot?(this.ractive.component?this.ractive.component.bubble():this.bound&&a$.addFragment(this)):this.owner.bubble())}createItems(){this.items=this.template.map((a,b)=>{return lH({parentFragment:this,a,b})})}detach(){let a=L();this.items.forEach(b=>a.appendChild(b.detach()));return a}find(a){let b=this.items.length,c;for(c=0;c<b;c+=1){let b=this.items[c].find(a);if(b)return b}}findAll(a,b){if(this.items){let c=this.items.length,d;for(d=0;d<c;d+=1){let c=this.items[d];c.findAll&&c.findAll(a,b)}}return b}findComponent(a){let b=this.items.length,c;for(c=0;c<b;c+=1){let b=this.items[c].findComponent(a);if(b)return b}}findAllComponents(a,b){if(this.items){let c=this.items.length,d;for(d=0;d<c;d+=1){let c=this.items[d];c.findAllComponents&&c.findAllComponents(a,b)}}return b}findContext(){let a=this;while(!a.context)a=a.parent;return a.context}findNextNode(a){for(let b=a.index+1;b<this.items.length;b++){if(!this.items[b])continue;let a=this.items[b].firstNode(!0);if(a)return a}if(this.isRoot){if(this.ractive.component){return this.ractive.component.parentFragment.findNextNode(this.ractive.component)}return null}return this.owner.findNextNode(this)}findParentNode(){let a=this;do {if(a.owner.type===dQ){return a.owner.node}if(a.isRoot&&!a.ractive.component){return a.ractive.el}a.owner.type===dW?(a=a.owner.containerFragment):(a=a.componentParent||a.parent)}while(a);throw new Error( 'Could not find parent node' )}findRepeatingFragment(){let a=this;while(a.parent&&!a.isIteration)a=a.parent||a.componentParent;return a}firstNode(a){let b;for(let c=0;c<this.items.length;c++){b=this.items[c].firstNode(!0);if(b){return b}}if(a)return null;return this.parent.findNextNode(this.owner)}getArgsList(){if(this.dirtyArgs){let a={},b=lJ(this.items,a,this.ractive._guid),c=gS('['+b+']',a);this.argsList=c?c.value:[this.toString()];this.dirtyArgs=!1}return this.argsList}rebind(a){this.context=a;this.items.forEach(bQ)}render(a,b){if(this.rendered)throw new Error( 'Fragment is already rendered!' );this.rendered=!0;this.items.forEach(c=>c.render(a,b))}resetTemplate(a){let b=this.bound,c=this.rendered;b&&(c&&this.unrender(!0),this.unbind());this.template=a;this.createItems();if(b){this.bind(this.context);if(c){let a=this.findParentNode(),b=this.parent?this.parent.findNextNode(this.owner):null;if(b){let c=L();this.render(c);a.insertBefore(c,b)}else this.render(a)}}}resolve(a,b){if(!this.context){return this.parent.resolve(a,b)}let c=new lI( this, a, b );this.resolvers.push(c);return c}toHtml(){return this.toString()}toString(a){return this.items.map(a?bX:bW).join('')}unbind(){this.items.forEach(bS);this.bound=!1;return this}unrender(a){this.items.forEach(a?lK:bT);this.rendered=!1}update(){this.dirty&&!this.updating&&(this.dirty=!1,this.updating=!0,this.items.forEach(bV),this.updating=!1)}valueOf(){if(this.items.length===1){return this.items[0].valueOf()}if(this.dirtyValue){let a={},b=lJ(this.items,a,this.ractive._guid),c=gS(b,a);this.value=c?c.value:this.toString();this.dirtyValue=!1}return this.value}}function lM(a){hG.init(null,this,{a});let b=this.transitionsEnabled;this.transitionsEnabled=!1;let c=this.component;c&&(c.shouldDestroy=!0);this.unrender();c&&(c.shouldDestroy=!1);this.fragment.unbind().unrender(!0);this.fragment=new lL({template:this.template,root:this,owner:this});let d=L();this.fragment.bind(this.viewmodel).render(d);this.el.insertBefore(d,this.anchor);this.transitionsEnabled=b}var lN=cR('reverse');function lO(a,b){let c=a$.start(this,!0);if(Z(a)){let b=a;for(const c in b){b.hasOwnProperty(c)&&lP(this,c,b[c])}}else lP(this,a,b);a$.end();return c}function lP(a,b,c){typeof c==='function'&&(c=dt(c,a));if(/\*/.test(b))a.viewmodel.findMatches(ax(b)).forEach(a=>{a.set(c)});else{let d=a.viewmodel.joinAll(ax(b));d.set(c)}}var lQ=cR('shift'),lR=cR('sort'),lS=cR('splice');function lT(a,b){return aA(this,a,(b===undefined?-1:-b))}let lU=new aD( 'teardown' );function lV(){this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(bM);this.fragment.rendered&&this.el.__ractive_instances__&&aJ(this.el.__ractive_instances__,this);this.shouldDestroy=!0;let a=this.fragment.rendered?this.unrender():aP.resolve();Object.keys(this._links).forEach(a=>this._links[a].unlink());lU.fire(this);return a}function lW(a){if(typeof a!=='string'){throw new TypeError( aj )}let b;if(/\*/.test(a)){b={};this.viewmodel.findMatches(ax(a)).forEach(a=>{b[a.getKeypath()]=!a.get()});return this.set(b)}return this.set(a,!this.get(a))}function lX(){let a=[this.cssId,...this.findAllComponents().map(a=>a.cssId)],b=Object.keys(a.reduce((a,b)=>(a[b]=!0, a),{}));return c$(b)}function lY(){return this.fragment.toString(!0)}function lZ(a,b,c){b instanceof HTMLElement||Z(b)&&(c=b);b=b||this.event.node;b||ad(`No node was supplied for transition ${a}`);let d=new ks( this, b, a, c ),e=a$.start(this,!0);a$.registerTransition(d);a$.end();return e}function l_(a){let b=this._links[a];if(b){b.unlink();delete this._links[a];return this.set(a,b.intialValue)}else{return aP.resolve(!0)}}let l$=new aD( 'unrender' );function ma(){if(!this.fragment.rendered){ah('ractive.unrender() was called on a Ractive instance that was not rendered');return aP.resolve()}let a=a$.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this.fragment.unrender(b);aJ(this.el.__ractive_instances__,this);l$.fire(this);a$.end();return a}var mb=cR('unshift');let mc=new aD( 'update' );function md(a){a&&(a=ax(a));let b=a?this.viewmodel.joinAll(a):this.viewmodel;if(b.parent&&b.parent.wrapper)return this.update(b.parent.getKeypath(this));let c=a$.start(this,!0);b.mark();b.registerChange(b.getKeypath(),b.get());if(a){let c=b.parent;while(a.length&&c){c.clearUnresolveds&&c.clearUnresolveds(a.pop()),c=c.parent}}b.notifyUpstream();a$.end();mc.fire(this,b);return c}function me(a,b){let c=a$.start(this,!0);a?this.viewmodel.joinAll(ax(a)).updateFromBindings(b!==!1):this.viewmodel.updateFromBindings(!0);a$.end();return c}var mf={add:aB,animate:bf,detach:bh,find:bi,findAll:bo,findAllComponents:bp,findComponent:bq,findContainer:br,findParent:bs,fire:bD,get:cq,insert:cs,cu,merge:cz,cA,cE,cI,off:cL,on:cM,once:cN,cS,cT,render:dd,reset:ij,im,resetTemplate:lM,lN,set:lO,lQ,lR,lS,subtract:lT,teardown:lV,toggle:lW,toCSS:lX,toCss:lX,toHTML:lY,toHtml:lY,transition:lZ,l_,unrender:ma,mb,update:md,updateModel:me};function mg(a,b,c){if(c||mh(a,b)){return function(){var c='_super' in this,d=this._super,e;this._super=b;e=a.apply(this,arguments);c&&(this._super=d);return e}}else{return a}}function mh(a,b){return typeof b==='function'&&/_super/.test(a)}function mi(a){let b={};while(a){mj(a,b),ml(a,b),a._Parent!==ms?(a=a._Parent):(a=!1)}return b}function mj(a,b){hP.forEach(c=>{mk(c.useDefaults?a.prototype:a,b,c.name)})}function mk(a,b,c){var d,e=Object.keys(a[c]);if(!e.length){return}(d=b[c])||(d=b[c]={});e.filter(a=>!(a in d)).forEach(b=>d[b]=a[c][b])}function ml(a,b){Object.keys(a.prototype).forEach(c=>{if(c==='computed'){return}var d=a.prototype[c];if(!(c in b))b[c]=d._method?d._method:d;else if(typeof b[c]==='function'&&typeof d==='function'&&b[c]._method){let a,e=d._method;e&&(d=d._method);a=mg(b[c]._method,d);e&&(a._method=a);b[c]=a}})}function mm(...a){if(!a.length){return mn(this)}else{return a.reduce(mn,this)}}function mn(a,b = {}){var c,d;b.prototype instanceof ms&&(b=mi(b));c=function(a){if(!(this instanceof c))return new c( a );iX(this,a||{});jf(this,a||{},{})};d=P(a.prototype);d.constructor=c;R(c,{defaults:{value:d},extend:{value:mm,writable:!0,configurable:!0},_Parent:{value:a}});h_.extend(a,d,b);dv.extend(a,d,b);b.computed&&(d.computed=S(P(a.prototype.computed),b.computed));c.prototype=d;return c}function mo(a){if(!a||!a._ractive)return{};let b=a._ractive,c=b.fragment.ractive,f=b.fragment.findContext();return{c,keypath:f.getKeypath(c),rootpath:f.getKeypath(),e,d}}function mp(...a){return a.map(av).join('.')}function mq(a){return ax(a).map(ay)}let mr='function';if(typeof Date.now!==mr||typeof String.prototype.trim!==mr||typeof Object.keys!==mr||typeof Array.prototype.indexOf!==mr||typeof Array.prototype.forEach!==mr||typeof Array.prototype.map!==mr||typeof Array.prototype.filter!==mr||g&&typeof g.addEventListener!==mr){throw new Error( 'It looks like you\'re attempting to use Ractive.js in an older browser. You\'ll need to use one of the \'legacy builds\' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.' )}function ms(a){if(!(this instanceof ms))return new ms( a );iX(this,a||{});jf(this,a||{},{})}S(ms.prototype,mf,c);ms.prototype.constructor=ms;ms.defaults=ms.prototype;R(ms,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:mm},escapeKey:{value:av},getNodeInfo:{value:mo},joinKeys:{value:mp},parse:{value:hw},splitKeypath:{value:mq},unescapeKey:{value:ay},getCSS:{value:c$},Promise:{value:aP},enhance:{writable:!0,value:!1},svg:{value:m},magic:{value:l},VERSION:{value:'<@version@>'},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:f},events:{writable:!0,value:{}},interpolators:{writable:!0,value:aq},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}});return ms}()