!function(){'use strict';function a(a){a=a||'';var b=document.head||document.getElementsByTagName('head')[0],c=document.createElement('style');c.type='text/css';c.styleSheet?(c.styleSheet.cssText=a):c.appendChild(document.createTextNode(a));b.appendChild(c)}a("hr {\n\tmargin: 20px 0;\n\tborder: 0;\n\tborder-top: 1px dashed #c5c5c5;\n\tborder-bottom: 1px dashed #f7f7f7;\n}\n\n.learn a {\n\tfont-weight: normal;\n\ttext-decoration: none;\n\tcolor: #b83f45;\n}\n\n.learn a:hover {\n\ttext-decoration: underline;\n\tcolor: #787e7e;\n}\n\n.learn h3,\n.learn h4,\n.learn h5 {\n\tmargin: 10px 0;\n\tfont-weight: 500;\n\tline-height: 1.2;\n\tcolor: #000;\n}\n\n.learn h3 {\n\tfont-size: 24px;\n}\n\n.learn h4 {\n\tfont-size: 18px;\n}\n\n.learn h5 {\n\tmargin-bottom: 0;\n\tfont-size: 14px;\n}\n\n.learn ul {\n\tpadding: 0;\n\tmargin: 0 0 30px 25px;\n}\n\n.learn li {\n\tline-height: 20px;\n}\n\n.learn p {\n\tfont-size: 15px;\n\tfont-weight: 300;\n\tline-height: 1.3;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n}\n\n#issue-count {\n\tdisplay: none;\n}\n\n.quote {\n\tborder: none;\n\tmargin: 20px 0 60px 0;\n}\n\n.quote p {\n\tfont-style: italic;\n}\n\n.quote p:before {\n\tcontent: '“';\n\tfont-size: 50px;\n\topacity: .15;\n\tposition: absolute;\n\ttop: -20px;\n\tleft: 3px;\n}\n\n.quote p:after {\n\tcontent: '”';\n\tfont-size: 50px;\n\topacity: .15;\n\tposition: absolute;\n\tbottom: -42px;\n\tright: 3px;\n}\n\n.quote footer {\n\tposition: absolute;\n\tbottom: -40px;\n\tright: 0;\n}\n\n.quote footer img {\n\tborder-radius: 3px;\n}\n\n.quote footer a {\n\tmargin-left: 5px;\n\tvertical-align: middle;\n}\n\n.speech-bubble {\n\tposition: relative;\n\tpadding: 10px;\n\tbackground: rgba(0, 0, 0, .04);\n\tborder-radius: 5px;\n}\n\n.speech-bubble:after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 100%;\n\tright: 30px;\n\tborder: 13px solid transparent;\n\tborder-top-color: rgba(0, 0, 0, .04);\n}\n\n.learn-bar > .learn {\n\tposition: absolute;\n\twidth: 272px;\n\ttop: 8px;\n\tleft: -300px;\n\tpadding: 10px;\n\tborder-radius: 5px;\n\tbackground-color: rgba(255, 255, 255, .6);\n\ttransition-property: left;\n\ttransition-duration: 500ms;\n}\n\n@media (min-width: 899px) {\n\t.learn-bar {\n\t\twidth: auto;\n\t\tpadding-left: 300px;\n\t}\n\n\t.learn-bar > .learn {\n\t\tleft: 8px;\n\t}\n}\n");a("html,\nbody {\n\tmargin: 0;\n\tpadding: 0;\n}\n\nbutton {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tbackground: none;\n\tfont-size: 100%;\n\tvertical-align: baseline;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tcolor: inherit;\n\t-webkit-appearance: none;\n\tappearance: none;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n}\n\nbody {\n\tfont: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n\tline-height: 1.4em;\n\tbackground: #f5f5f5;\n\tcolor: #4d4d4d;\n\tmin-width: 230px;\n\tmax-width: 550px;\n\tmargin: 0 auto;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\tfont-weight: 300;\n}\n\nbutton,\ninput[type=\"checkbox\"] {\n\toutline: none;\n}\n\n.hidden {\n\tdisplay: none;\n}\n\n.todoapp {\n\tbackground: #fff;\n\tmargin: 130px 0 40px 0;\n\tposition: relative;\n\tbox-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),\n\t            0 25px 50px 0 rgba(0, 0, 0, 0.1);\n}\n\n.todoapp input::-webkit-input-placeholder {\n\tfont-style: italic;\n\tfont-weight: 300;\n\tcolor: #e6e6e6;\n}\n\n.todoapp input::-moz-placeholder {\n\tfont-style: italic;\n\tfont-weight: 300;\n\tcolor: #e6e6e6;\n}\n\n.todoapp input::input-placeholder {\n\tfont-style: italic;\n\tfont-weight: 300;\n\tcolor: #e6e6e6;\n}\n\n.todoapp h1 {\n\tposition: absolute;\n\ttop: -155px;\n\twidth: 100%;\n\tfont-size: 100px;\n\tfont-weight: 100;\n\ttext-align: center;\n\tcolor: rgba(175, 47, 47, 0.15);\n\t-webkit-text-rendering: optimizeLegibility;\n\t-moz-text-rendering: optimizeLegibility;\n\ttext-rendering: optimizeLegibility;\n}\n\n.new-todo,\n.edit {\n\tposition: relative;\n\tmargin: 0;\n\twidth: 100%;\n\tfont-size: 24px;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tline-height: 1.4em;\n\tborder: 0;\n\toutline: none;\n\tcolor: inherit;\n\tpadding: 6px;\n\tborder: 1px solid #999;\n\tbox-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\n\tbox-sizing: border-box;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n}\n\n.new-todo {\n\tpadding: 16px 16px 16px 60px;\n\tborder: none;\n\tbackground: rgba(0, 0, 0, 0.003);\n\tbox-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);\n}\n\n.main {\n\tposition: relative;\n\tz-index: 2;\n\tborder-top: 1px solid #e6e6e6;\n}\n\nlabel[for='toggle-all'] {\n\tdisplay: none;\n}\n\n.toggle-all {\n\tposition: absolute;\n\ttop: -55px;\n\tleft: -12px;\n\twidth: 60px;\n\theight: 34px;\n\ttext-align: center;\n\tborder: none; /* Mobile Safari */\n}\n\n.toggle-all:before {\n\tcontent: '❯';\n\tfont-size: 22px;\n\tcolor: #e6e6e6;\n\tpadding: 10px 27px 10px 27px;\n}\n\n.toggle-all:checked:before {\n\tcolor: #737373;\n}\n\n.todo-list {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n}\n\n.todo-list li {\n\tposition: relative;\n\tfont-size: 24px;\n\tborder-bottom: 1px solid #ededed;\n}\n\n.todo-list li:last-child {\n\tborder-bottom: none;\n}\n\n.todo-list li.editing {\n\tborder-bottom: none;\n\tpadding: 0;\n}\n\n.todo-list li.editing .edit {\n\tdisplay: block;\n\twidth: 506px;\n\tpadding: 13px 17px 12px 17px;\n\tmargin: 0 0 0 43px;\n}\n\n.todo-list li.editing .view {\n\tdisplay: none;\n}\n\n.todo-list li .toggle {\n\ttext-align: center;\n\twidth: 40px;\n\t/* auto, since non-WebKit browsers doesn't support input styling */\n\theight: auto;\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tmargin: auto 0;\n\tborder: none; /* Mobile Safari */\n\t-webkit-appearance: none;\n\tappearance: none;\n}\n\n.todo-list li .toggle:after {\n\tcontent: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"-10 -18 100 135\"><circle cx=\"50\" cy=\"50\" r=\"50\" fill=\"none\" stroke=\"#ededed\" stroke-width=\"3\"/></svg>');\n}\n\n.todo-list li .toggle:checked:after {\n\tcontent: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"-10 -18 100 135\"><circle cx=\"50\" cy=\"50\" r=\"50\" fill=\"none\" stroke=\"#bddad5\" stroke-width=\"3\"/><path fill=\"#5dc2af\" d=\"M72 25L42 71 27 56l-4 4 20 20 34-52z\"/></svg>');\n}\n\n.todo-list li label {\n\twhite-space: pre-line;\n\tword-break: break-all;\n\tpadding: 15px 60px 15px 15px;\n\tmargin-left: 45px;\n\tdisplay: block;\n\tline-height: 1.2;\n\ttransition: color 0.4s;\n}\n\n.todo-list li.completed label {\n\tcolor: #d9d9d9;\n\ttext-decoration: line-through;\n}\n\n.todo-list li .destroy {\n\tdisplay: none;\n\tposition: absolute;\n\ttop: 0;\n\tright: 10px;\n\tbottom: 0;\n\twidth: 40px;\n\theight: 40px;\n\tmargin: auto 0;\n\tfont-size: 30px;\n\tcolor: #cc9a9a;\n\tmargin-bottom: 11px;\n\ttransition: color 0.2s ease-out;\n}\n\n.todo-list li .destroy:hover {\n\tcolor: #af5b5e;\n}\n\n.todo-list li .destroy:after {\n\tcontent: '×';\n}\n\n.todo-list li:hover .destroy {\n\tdisplay: block;\n}\n\n.todo-list li .edit {\n\tdisplay: none;\n}\n\n.todo-list li.editing:last-child {\n\tmargin-bottom: -1px;\n}\n\n.footer {\n\tcolor: #777;\n\tpadding: 10px 15px;\n\theight: 20px;\n\ttext-align: center;\n\tborder-top: 1px solid #e6e6e6;\n}\n\n.footer:before {\n\tcontent: '';\n\tposition: absolute;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\theight: 50px;\n\toverflow: hidden;\n\tbox-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),\n\t            0 8px 0 -3px #f6f6f6,\n\t            0 9px 1px -3px rgba(0, 0, 0, 0.2),\n\t            0 16px 0 -6px #f6f6f6,\n\t            0 17px 2px -6px rgba(0, 0, 0, 0.2);\n}\n\n.todo-count {\n\tfloat: left;\n\ttext-align: left;\n}\n\n.todo-count strong {\n\tfont-weight: 300;\n}\n\n.filters {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\tposition: absolute;\n\tright: 0;\n\tleft: 0;\n}\n\n.filters li {\n\tdisplay: inline;\n}\n\n.filters li a {\n\tcolor: inherit;\n\tmargin: 3px;\n\tpadding: 3px 7px;\n\ttext-decoration: none;\n\tborder: 1px solid transparent;\n\tborder-radius: 3px;\n}\n\n.filters li a.selected,\n.filters li a:hover {\n\tborder-color: rgba(175, 47, 47, 0.1);\n}\n\n.filters li a.selected {\n\tborder-color: rgba(175, 47, 47, 0.2);\n}\n\n.clear-completed,\nhtml .clear-completed:active {\n\tfloat: right;\n\tposition: relative;\n\tline-height: 20px;\n\ttext-decoration: none;\n\tcursor: pointer;\n}\n\n.clear-completed:hover {\n\ttext-decoration: underline;\n}\n\n.info {\n\tmargin: 65px auto 0;\n\tcolor: #bfbfbf;\n\tfont-size: 10px;\n\ttext-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n\ttext-align: center;\n}\n\n.info p {\n\tline-height: 1;\n}\n\n.info a {\n\tcolor: inherit;\n\ttext-decoration: none;\n\tfont-weight: 400;\n}\n\n.info a:hover {\n\ttext-decoration: underline;\n}\n\n/*\n\tHack to remove background from Mobile Safari.\n\tCan't use it globally since it destroys checkboxes in Firefox\n*/\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n\t.toggle-all,\n\t.todo-list li .toggle {\n\t\tbackground: none;\n\t}\n\n\t.todo-list li .toggle {\n\t\theight: 40px;\n\t}\n\n\t.toggle-all {\n\t\t-webkit-transform: rotate(90deg);\n\t\ttransform: rotate(90deg);\n\t\t-webkit-appearance: none;\n\t\tappearance: none;\n\t}\n}\n\n@media (max-width: 430px) {\n\t.footer {\n\t\theight: 50px;\n\t}\n\n\t.filters {\n\t\tbottom: 10px;\n\t}\n}\n");function b(a,b){return(b||document).querySelector(a)}function c(a,b){return(b||document).querySelectorAll(a)}function d(a,b,c,d){a.addEventListener(b,c,!!d)}function e(a,b,e,f){var g=e==='blur'||e==='focus';d(a,e,h,g);function h(d){var e=d.target,g=c(b,a),h=Array.prototype.indexOf.call(g,e)>=0;h&&f.call(e,d)}}function f(a,b){if(!a.parentNode){return undefined}if(a.parentNode.tagName.toLowerCase()===b.toLowerCase()){return a.parentNode}return f(a.parentNode,b)}NodeList.prototype.forEach=Array.prototype.forEach;class g{constructor(a){this.template=a;this.ENTER_KEY=13;this.ESCAPE_KEY=27;this.$todoList=b('.todo-list');this.$todoItemCounter=b('.todo-count');this.$clearCompleted=b('.clear-completed');this.$main=b('.main');this.$footer=b('.footer');this.$toggleAll=b('.toggle-all');this.$newTodo=b('.new-todo')}_removeItem(a){var c=b('[data-id="'+a+'"]');c&&this.$todoList.removeChild(c)}_clearCompletedButton(a,b){this.$clearCompleted.innerHTML=this.template.clearCompletedButton(a);this.$clearCompleted.style.display=b?'block':'none'}_editItemDone(a,d){var e=b('[data-id="'+a+'"]');if(!e){return}var f=b('input.edit',e);e.removeChild(f);e.className=e.className.replace('editing','');c('label',e).forEach(function(a){a.textContent=d})}render(a,b){var c=this,d={showEntries:function(){c.$todoList.innerHTML=c.template.show(b)},removeItem:function(){c._removeItem(b)},updateElementCount:function(){c.$todoItemCounter.innerHTML=c.template.itemCounter(b)},clearCompletedButton:function(){c._clearCompletedButton(b.completed,b.visible)},contentBlockVisibility:function(){c.$main.style.display=c.$footer.style.display=b.visible?'block':'none'},toggleAll:function(){c.$toggleAll.checked=b.checked},setFilter:function(){h(b)},clearNewTodo:function(){c.$newTodo.value=''},elementComplete:function(){i(b.id,b.completed)},editItem:function(){j(b.id,b.title)},editItemDone:function(){c._editItemDone(b.id,b.title)}};d[a]()}_bindItemEditDone(a){var b=this;e(b.$todoList,'li .edit','blur',function(){this.dataset.iscanceled||a({id:k(this),title:this.value})});e(b.$todoList,'li .edit','keypress',function(a){a.keyCode===b.ENTER_KEY&&this.blur()})}_bindItemEditCancel(a){var b=this;e(b.$todoList,'li .edit','keyup',function(c){c.keyCode===b.ESCAPE_KEY&&(this.dataset.iscanceled=!0,this.blur(),a({id:k(this)}))})}bind(a,b){var c=this;a==='newTodo'?d(c.$newTodo,'change',function(){b(c.$newTodo.value)}):a==='removeCompleted'?d(c.$clearCompleted,'click',function(){b()}):a==='toggleAll'?d(c.$toggleAll,'click',function(){b({completed:this.checked})}):a==='itemEdit'?e(c.$todoList,'li label','dblclick',function(){b({id:k(this)})}):a==='itemRemove'?e(c.$todoList,'.destroy','click',function(){b({id:k(this)})}):a==='itemToggle'?e(c.$todoList,'.toggle','click',function(){b({id:k(this),completed:this.checked})}):a==='itemEditDone'?c._bindItemEditDone(b):a==='itemEditCancel'&&c._bindItemEditCancel(b)}}function h(a){b('.filters .selected').className='';b('.filters [href="#/'+a+'"]').className='selected'}function i(a,c){var d=b('[data-id="'+a+'"]');if(!d){return}d.className=c?'completed':'';b('input',d).checked=c}function j(a,c){var d=b('[data-id="'+a+'"]');if(!d){return}d.className=d.className+' editing';var e=document.createElement('input');e.className='edit';d.appendChild(e);e.focus();e.value=c}function k(a){var b=f(a,'li');return parseInt(b.dataset.id,10)}function l(a,b){var c=this;c.model=a;c.view=b;c.view.bind('newTodo',function(a){c.addItem(a)});c.view.bind('itemEdit',function(a){c.editItem(a.id)});c.view.bind('itemEditDone',function(a){c.editItemSave(a.id,a.title)});c.view.bind('itemEditCancel',function(a){c.editItemCancel(a.id)});c.view.bind('itemRemove',function(a){c.removeItem(a.id)});c.view.bind('itemToggle',function(a){c.toggleComplete(a.id,a.completed)});c.view.bind('removeCompleted',function(){c.removeCompletedItems()});c.view.bind('toggleAll',function(a){c.toggleAll(a.completed)})}l.prototype.setView=function(a){var b=a.split('/')[1],c=b||'';this._updateFilterState(c)};l.prototype.showAll=function(){var a=this;a.model.read(function(b){a.view.render('showEntries',b)})};l.prototype.showActive=function(){var a=this;a.model.read({completed:!1},function(b){a.view.render('showEntries',b)})};l.prototype.showCompleted=function(){var a=this;a.model.read({completed:!0},function(b){a.view.render('showEntries',b)})};l.prototype.addItem=function(a){var b=this;if(a.trim()===''){return}b.model.create(a,function(){b.view.render('clearNewTodo');b._filter(!0)})};l.prototype.editItem=function(a){var b=this;b.model.read(a,function(c){b.view.render('editItem',{a,title:c[0].title})})};l.prototype.editItemSave=function(a,b){var c=this;b.trim()?c.model.update(a,{b},function(){c.view.render('editItemDone',{a,b})}):c.removeItem(a)};l.prototype.editItemCancel=function(a){var b=this;b.model.read(a,function(c){b.view.render('editItemDone',{a,title:c[0].title})})};l.prototype.removeItem=function(a){var b=this;b.model.remove(a,function(){b.view.render('removeItem',a)});b._filter()};l.prototype.removeCompletedItems=function(){var a=this;a.model.read({completed:!0},function(b){b.forEach(function(b){a.removeItem(b.id)})});a._filter()};l.prototype.toggleComplete=function(a,b,c){var d=this;d.model.update(a,{b},function(){d.view.render('elementComplete',{a,b})});c||d._filter()};l.prototype.toggleAll=function(a){var b=this;b.model.read({completed:!a},function(c){c.forEach(function(c){b.toggleComplete(c.id,a,!0)})});b._filter()};l.prototype._updateCount=function(){var a=this;a.model.getCount(function(b){a.view.render('updateElementCount',b.active);a.view.render('clearCompletedButton',{completed:b.completed,visible:b.completed>0});a.view.render('toggleAll',{checked:b.completed===b.total});a.view.render('contentBlockVisibility',{visible:b.total>0})})};l.prototype._filter=function(a){var b=this._activeRoute.charAt(0).toUpperCase()+this._activeRoute.substr(1);this._updateCount();(a||this._lastActiveRoute!=='All'||this._lastActiveRoute!==b)&&this['show'+b]();this._lastActiveRoute=b};l.prototype._updateFilterState=function(a){this._activeRoute=a;a===''&&(this._activeRoute='All');this._filter();this.view.render('setFilter',a)};function m(a){this.storage=a}m.prototype.create=function(a,b){a=a||'';b=b||function(){};var c={title:a.trim(),completed:!1};this.storage.save(c,b)};m.prototype.read=function(a,b){var c=typeof a;b=b||function(){};if(c==='function'){b=a;return this.storage.findAll(b)}else c==='string'||c==='number'?(a=parseInt(a,10),this.storage.find({id:a},b)):this.storage.find(a,b);return undefined};m.prototype.update=function(a,b,c){this.storage.save(b,c,a)};m.prototype.remove=function(a,b){this.storage.remove(a,b)};m.prototype.removeAll=function(a){this.storage.drop(a)};m.prototype.getCount=function(a){var b={active:0,completed:0,total:0};this.storage.findAll(function(c){c.forEach(function(a){a.completed?b.completed++:b.active++;b.total++});a(b)})};function n(a,b){b=b||function(){};this._dbName=a;if(!localStorage[a]){var c={todos:[]};localStorage[a]=JSON.stringify(c)}b.call(this,JSON.parse(localStorage[a]))}n.prototype.find=function(a,b){if(!b){return}var c=JSON.parse(localStorage[this._dbName]).todos;b.call(this,c.filter(function(b){for(var c in a){if(a[c]!==b[c]){return !1}}return !0}))};n.prototype.findAll=function(a){a=a||function(){};a.call(this,JSON.parse(localStorage[this._dbName]).todos)};n.prototype.save=function(a,b,c){var d=JSON.parse(localStorage[this._dbName]),e=d.todos;b=b||function(){};if(c){for(var f=0;f<e.length;f++){if(e[f].id===c){for(var g in a)e[f][g]=a[g];break}}localStorage[this._dbName]=JSON.stringify(d);b.call(this,JSON.parse(localStorage[this._dbName]).todos)}else a.id=new Date().getTime(),e.push(a),localStorage[this._dbName]=JSON.stringify(d),b.call(this,[a])};n.prototype.remove=function(a,b){var c=JSON.parse(localStorage[this._dbName]),d=c.todos;for(var e=0;e<d.length;e++){if(d[e].id===a){d.splice(e,1);break}}localStorage[this._dbName]=JSON.stringify(c);b.call(this,JSON.parse(localStorage[this._dbName]).todos)};n.prototype.drop=function(a){localStorage[this._dbName]=JSON.stringify({todos:[]});a.call(this,JSON.parse(localStorage[this._dbName]).todos)};var o={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#x27;','`':'&#x60;'},p=function(a){return o[a]},q=/[&<>"'`]/g,r=new RegExp(q.source),s=function(a){if(a&&r.test(a)){return a.replace(q,p)}else{return a}};function t(){this.defaultTemplate="\n    <li data-id=\"{{id}}\" class=\"{{completed}}\">\n      <div class=\"view\">\n        <input class=\"toggle\" type=\"checkbox\" {{checked}} />\n        <label>{{title}}</label>\n        <button class=\"destroy\"></button>\n      </div>\n    </li>\n  "}t.prototype.show=function(a){var b,c,d='';for(b=0, c=a.length;b<c;b++){var e=this.defaultTemplate,f='',g='';a[b].completed&&(f='completed',g='checked');e=e.replace('{{id}}',a[b].id);e=e.replace('{{title}}',s(a[b].title));e=e.replace('{{completed}}',f);e=e.replace('{{checked}}',g);d+=e}return d};t.prototype.itemCounter=function(a){var b=a===1?'':'s';return'<strong>'+a+'</strong> item'+b+' left'};t.prototype.clearCompletedButton=function(a){if(a>0){return'Clear completed'}else{return''}};var u;function v(a){this.storage=new n(a);this.model=new m(this.storage);this.template=new t();this.view=new g(this.template);this.controller=new l(this.model, this.view)}function w(){u.controller.setView(document.location.hash)}d(window,'load',function(){u=new v('todos-vanillajs');w()});d(window,'hashchange',w)}()